# üèÜ Section 1.04 | Foundations | **"SCIM vs LDAP vs Proprietary APIs"**

## üìå At a glance  
SCIM is often compared to **LDAP** and to **proprietary user management APIs**.  
While they all deal with identity data, they serve **different purposes** and solve different problems.  

---

## üìñ What is the difference?  
- **SCIM (System for Cross-domain Identity Management)**  
  - A modern, open standard for **provisioning users and groups** across domains.  
  - Uses **REST + JSON** over HTTP.  
  - Defined by IETF in RFC 7643 (Schema) and RFC 7644 (Protocol).  

- **LDAP (Lightweight Directory Access Protocol)**  
  - An older protocol used to **query and update directory services** (like Active Directory, OpenLDAP).  
  - Focused on **storing identity data** in hierarchical directories.  
  - Uses **binary + text encodings** over TCP, not REST.  

- **Proprietary APIs**  
  - Custom APIs provided by apps (e.g., Salesforce SOAP API, custom HR system API).  
  - Usually not standardized ‚Üí each app requires its own connector.  
  - Often lack lifecycle focus or interoperability.  

**üîÑ Mental map**
```text
SCIM ‚Üí Standard protocol for provisioning between IdP and SaaS apps
LDAP ‚Üí Directory query/update protocol (on-prem & some cloud directories)
Proprietary APIs ‚Üí One-off, app-specific integration points
```

> **Note (worth keeping):** LDAP and SCIM are not competitors. LDAP is often used **within a directory**, while SCIM is used for **cross-domain provisioning**. Proprietary APIs are only used if SCIM is not available.  

---

## üîë Key characteristics  
- **SCIM** ‚Üí Cloud-friendly, provisioning-focused, REST/JSON, standardized.  
- **LDAP** ‚Üí Directory-first, complex schema, hierarchical queries, harder to extend.  
- **Proprietary APIs** ‚Üí Vendor-specific, inconsistent, harder to maintain.  

---

## üåç Why it matters (and how it helps you later)  
- Clears up confusion ‚Üí SCIM is not a ‚Äúnew LDAP.‚Äù  
- Helps you choose the right integration: use SCIM where possible, LDAP for directory lookups, and proprietary APIs as a fallback.  
- Prepares you to explain **why SCIM adoption is growing** in interviews and real-world projects.  

---

## üõ†Ô∏è Where it‚Äôs used (flows + impact)
- **Joiner** ‚Üí HR adds employee ‚Üí IdP **POST /Users** ‚Üí app account **created automatically**, no IT tickets required.
- **Mover** ‚Üí Role/department change ‚Üí IdP **PATCH /Users** or **PATCH /Groups** ‚Üí roles, entitlements, and memberships **updated instantly**.
- **Leaver** ‚Üí Exit event ‚Üí IdP **DELETE /Users** or `active=false` ‚Üí accounts **disabled across apps the same day**, no orphaned access.

üëâ Without SCIM: weeks of manual tickets and scripts. With SCIM: minutes, fully auditable.

- **LDAP** ‚Üí Active Directory queries for authentication and group lookups.  
- **Proprietary APIs** ‚Üí Older HR systems, legacy apps without SCIM support.  

---

## üîó How this links to other concepts (learning bridges)
- **Core Objects (1.03)** ‚Üí Lifecycle acts on Users & Groups. Without these, lifecycle has no targets.
- **CRUD Operations (3.04)** ‚Üí JML maps directly to POST, PATCH/PUT, and DELETE or soft disable.
- **Failures (4.03)** ‚Üí Shows what happens when lifecycle fails (e.g., orphaned accounts left active).

- **[SCIM Architecture (1.02)](./1.02-scim-architecture.md)** ‚Üí client/server model that LDAP lacks.  
- **[Lifecycle Operations (1.05)](./1.05-lifecycle-operations.md)** ‚Üí provisioning in action, which LDAP doesn‚Äôt directly cover.  

---

<details>
<summary><strong>‚öôÔ∏è Technical deep dive</strong> (click to expand)</summary>

**Example SCIM Create User request (REST/JSON):**
```http
POST /scim/v2/Users
Content-Type: application/json

{
  "userName": "jdoe",
  "name": { "givenName": "John", "familyName": "Doe" },
  "emails": [{ "value": "jdoe@example.com", "primary": true }]
}
```

**Equivalent LDAP Add User (LDIF):**
```ldif
dn: uid=jdoe,ou=People,dc=example,dc=com
objectClass: inetOrgPerson
cn: John Doe
sn: Doe
uid: jdoe
mail: jdoe@example.com
```

**Proprietary API Example (SOAP snippet):**
```xml
<createUser>
  <username>jdoe</username>
  <firstName>John</firstName>
  <lastName>Doe</lastName>
  <email>jdoe@example.com</email>
</createUser>
```
</details>

---

<details>
<summary><strong>üè¢ Real-world scenario</strong> (click to expand)</summary>
An enterprise integrates Okta with three apps:  
- **Slack** ‚Üí via SCIM. User accounts are automatically provisioned and deprovisioned.  
- **Active Directory** ‚Üí accessed via LDAP for on-prem authentication and group queries.  
- **Legacy HR system** ‚Üí integrated using its proprietary SOAP API until a SCIM adapter is built.  
</details>

---

<details>
<summary><strong>‚ùå Common pitfalls</strong> (click to expand)</summary>

- Thinking SCIM replaces LDAP (they solve different problems).  
- Using proprietary APIs when SCIM is available ‚Üí leads to unnecessary complexity.  
- Forgetting that LDAP schemas are hierarchical and not JSON-based.  
- Underestimating the cost of maintaining proprietary connectors.  
</details>

---

<details>
<summary><strong>‚ö†Ô∏è Risks & issues</strong> (click to expand)</summary>

| Risk | Impact | Mitigation |
|------|--------|------------|
| Wrong protocol choice | Failed or costly integration | Use SCIM when available, LDAP for directories |
| Proprietary lock-in | High maintenance, vendor dependency | Replace with SCIM when possible |
| Confusion in interviews | Missed opportunities | Remember: SCIM = provisioning, LDAP = directories |
</details>

---

<details>
<summary><strong>üìù Mini quiz</strong> (click to expand)</summary>

1) Which protocol is designed specifically for cross-domain provisioning?  
a) LDAP  
b) Proprietary APIs  
c) SCIM  
d) None of the above  

2) Which is most likely used to query groups in Active Directory?  
a) SCIM  
b) LDAP  
c) Proprietary APIs  
d) OIDC  

3) True or False: SCIM replaces LDAP in all cases.  
</details>

---

## üîó Navigation  
üëâ **Back:** [1.03 Core Objects: Users & Groups](./1.03-core-objects.md)  
üëâ **Next:** [1.05 Lifecycle Operations in SCIM](./1.05-lifecycle-operations.md)  

## ‚ö†Ô∏è Risks & issues
| Risk | Impact | Mitigation |
|------|--------|------------|
| Mis-mapped attributes | Inconsistent accounts | Validate schema mapping in pilots |
| Weak deprovisioning | Orphaned accounts remain active | Test disable/delete paths in each app |
| Partial vendor support | Missing PATCH or filters | Check `/ServiceProviderConfig`, plan workarounds |
| Protocol confusion | Wrong tool for the job | Train teams on SCIM vs SSO protocols |

Real-world: A company kept 200+ Slack users active months after exit because SCIM wasn‚Äôt connected. Audit flagged this as high-risk.
