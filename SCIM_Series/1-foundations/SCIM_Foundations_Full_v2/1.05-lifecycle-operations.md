# ğŸ† Section 1.05 | Foundations | **Lifecycle Operations in SCIM (Joiner, Mover, Leaver)**

## ğŸ“Œ At a glance
SCIM automates **joiner, mover, and leaver (JML)** events by standardizing create, update, and deprovision actions on Users and Groups.

## ğŸ“– What are SCIM lifecycle operations?
Lifecycle operations are identity changes over time:
- **Joiner (Provision)** â†’ create new users/groups
- **Mover (Update)** â†’ modify attributes and memberships
- **Leaver (Deprovision)** â†’ disable or delete accounts

**Flow**
```
HR Event â†’ IdP (SCIM client) â†’ SCIM API â†’ App (SCIM server)
Hire        POST /Users            â†’    account created
Transfer    PATCH /Users|/Groups   â†’    attributes/memberships updated
Terminate   DELETE /Users or active=false â†’ access removed
```

> **Note (worth keeping):** SCIM standardizes **how** changes are communicated, not **when**. Timing comes from HR/IAM policy.

## ğŸ”‘ Key characteristics
- **POST** creates, **PATCH/PUT** update, **DELETE/active=false** deprovisions
- **GET + filter** find users to sync or validate
- **Stateless** per HTTP; send all necessary fields

## ğŸŒ Why it matters (and how it helps you later)
- Prevents orphaned accounts via reliable deprovisioning
- Connects HR events directly to app access
- Maps cleanly to CRUD youâ€™ll use in Section 3

## ğŸ› ï¸ Where itâ€™s used (flows + impact)
- **Joiner** â†’ Workday hire â†’ Okta **creates** Slack/Zoom accounts automatically
- **Mover** â†’ Department change â†’ Entra ID **updates** groups & roles via `PATCH`
- **Leaver** â†’ Contract ends â†’ SailPoint **disables** GitHub/Jira within minutes

## ğŸ”— How this links to other concepts (learning bridges)
- **Core Objects (1.03)** â†’ lifecycle acts on Users & Groups
- **CRUD (3.04)** â†’ JML = POST/PATCH/DELETE (or `active=false`)
- **Common Failures (4.03)** â†’ what breaks when lifecycle isnâ€™t wired

## âš™ï¸ Technical deep dive
**Create User (Joiner)**
```http
POST /scim/v2/Users
{ "userName":"jdoe","name":{"givenName":"John","familyName":"Doe"},"active":true }
```
**Update User (Mover)**
```http
PATCH /scim/v2/Users/2819c223-7f76-453a-919d-413861904646
{ "Operations":[{"op":"Replace","path":"department","value":"Engineering"}] }
```
**Deprovision User (Leaver)**
```http
DELETE /scim/v2/Users/2819c223-7f76-453a-919d-413861904646
```
**Tip:** Prefer `active=false` when you need a softâ€‘disable trail.

## ğŸ¢ Realâ€‘world scenario
Consulting firm: Workday â†’ Okta â†’ SaaS. New analyst is **provisioned** to Slack/ServiceNow, project transfer **updates** memberships automatically, offboarding **disables** all accounts the same day.

## âŒ Common pitfalls
- Using DELETE when policy expects soft disable
- Assuming `PATCH` support; some SPs require full `PUT`
- Lag between HR and SCIM calls causing compliance gaps
- Not removing group memberships on exit

## âš ï¸ Risks & issues
| Risk | Impact | Mitigation |
|---|---|---|
| Misâ€‘mapped lifecycle â†’ status drift | Wrong access state | Validate HRâ†’IdPâ†’SP mapping |
| Incomplete deprovisioning | Orphaned access | Test disable/delete in each app |
| No PATCH support | Inefficient updates | Use PUT fallback; document limits |

## ğŸ“ Mini quiz
1) â€œMoverâ€ maps to which verb? **PATCH (or PUT)**  
2) Safer leaver action? **active=false (soft disable)**  
3) True/False: SCIM dictates when changes happen. **False**

## ğŸ”— Navigation
ğŸ‘‰ **Back:** [1.04 SCIM vs LDAP vs Proprietary APIs](./1.04-scim-vs-ldap.md) Â· ğŸ‘‰ **Next:** [1.06 SCIM in IAM](./1.06-scim-in-iam.md)
