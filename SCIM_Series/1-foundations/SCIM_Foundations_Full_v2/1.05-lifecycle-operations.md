# 🏆 Section 1.05 | Foundations | **Lifecycle Operations in SCIM (Joiner, Mover, Leaver)**

## 📌 At a glance
SCIM automates **joiner, mover, and leaver (JML)** events by standardizing create, update, and deprovision actions on Users and Groups.

## 📖 What are SCIM lifecycle operations?
Lifecycle operations are identity changes over time:
- **Joiner (Provision)** → create new users/groups
- **Mover (Update)** → modify attributes and memberships
- **Leaver (Deprovision)** → disable or delete accounts

**Flow**
```
HR Event → IdP (SCIM client) → SCIM API → App (SCIM server)
Hire        POST /Users            →    account created
Transfer    PATCH /Users|/Groups   →    attributes/memberships updated
Terminate   DELETE /Users or active=false → access removed
```

> **Note (worth keeping):** SCIM standardizes **how** changes are communicated, not **when**. Timing comes from HR/IAM policy.

## 🔑 Key characteristics
- **POST** creates, **PATCH/PUT** update, **DELETE/active=false** deprovisions
- **GET + filter** find users to sync or validate
- **Stateless** per HTTP; send all necessary fields

## 🌍 Why it matters (and how it helps you later)
- Prevents orphaned accounts via reliable deprovisioning
- Connects HR events directly to app access
- Maps cleanly to CRUD you’ll use in Section 3

## 🛠️ Where it’s used (flows + impact)
- **Joiner** → Workday hire → Okta **creates** Slack/Zoom accounts automatically
- **Mover** → Department change → Entra ID **updates** groups & roles via `PATCH`
- **Leaver** → Contract ends → SailPoint **disables** GitHub/Jira within minutes

## 🔗 How this links to other concepts (learning bridges)
- **Core Objects (1.03)** → lifecycle acts on Users & Groups
- **CRUD (3.04)** → JML = POST/PATCH/DELETE (or `active=false`)
- **Common Failures (4.03)** → what breaks when lifecycle isn’t wired

## ⚙️ Technical deep dive
**Create User (Joiner)**
```http
POST /scim/v2/Users
{ "userName":"jdoe","name":{"givenName":"John","familyName":"Doe"},"active":true }
```
**Update User (Mover)**
```http
PATCH /scim/v2/Users/2819c223-7f76-453a-919d-413861904646
{ "Operations":[{"op":"Replace","path":"department","value":"Engineering"}] }
```
**Deprovision User (Leaver)**
```http
DELETE /scim/v2/Users/2819c223-7f76-453a-919d-413861904646
```
**Tip:** Prefer `active=false` when you need a soft‑disable trail.

## 🏢 Real‑world scenario
Consulting firm: Workday → Okta → SaaS. New analyst is **provisioned** to Slack/ServiceNow, project transfer **updates** memberships automatically, offboarding **disables** all accounts the same day.

## ❌ Common pitfalls
- Using DELETE when policy expects soft disable
- Assuming `PATCH` support; some SPs require full `PUT`
- Lag between HR and SCIM calls causing compliance gaps
- Not removing group memberships on exit

## ⚠️ Risks & issues
| Risk | Impact | Mitigation |
|---|---|---|
| Mis‑mapped lifecycle → status drift | Wrong access state | Validate HR→IdP→SP mapping |
| Incomplete deprovisioning | Orphaned access | Test disable/delete in each app |
| No PATCH support | Inefficient updates | Use PUT fallback; document limits |

## 📝 Mini quiz
1) “Mover” maps to which verb? **PATCH (or PUT)**  
2) Safer leaver action? **active=false (soft disable)**  
3) True/False: SCIM dictates when changes happen. **False**

## 🔗 Navigation
👉 **Back:** [1.04 SCIM vs LDAP vs Proprietary APIs](./1.04-scim-vs-ldap.md) · 👉 **Next:** [1.06 SCIM in IAM](./1.06-scim-in-iam.md)
