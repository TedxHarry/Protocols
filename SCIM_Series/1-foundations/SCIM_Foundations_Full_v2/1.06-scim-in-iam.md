# 🏆 Section 1.06 | Foundations | **Where SCIM fits in IAM (Provisioning vs Authentication Protocols)**

## 📌 At a glance
SCIM is **provisioning**. SAML/OIDC are **authentication**. OAuth2 is **authorization**. They work together but solve different problems.

## 📖 What is SCIM’s role in IAM?
- **SCIM** → lifecycle management: create/update/disable users & groups across apps
- **SAML** → enterprise SSO via XML assertions (who you are)
- **OIDC** → modern SSO with JWTs (who you are)
- **OAuth2** → tokens to access APIs/resources (what you can do)

**Mental map**
```
SCIM → Provisioning (accounts & attributes)
SAML/OIDC → Authentication (sign-in)
OAuth2 → Authorization (API/resource access)
```

> **Note (worth keeping):** A user may be **provisioned by SCIM** days before they **authenticate via SAML/OIDC** for the first time.

## 🔑 Key characteristics
- **Provisioning vs Authentication** → lifecycle vs login
- **Async vs Real‑time** → SCIM follows HR/IAM events; SSO happens at sign‑in
- **Complementary** → SCIM prepares accounts; SSO controls entry; OAuth2 controls actions

## 🌍 Why it matters (and how it helps you later)
- Prevents design mistakes (trying to “provision with SAML”)
- Clarifies vendor docs where SCIM and SSO are configured together
- Gives a crisp interview answer to “Is SCIM an authentication protocol?” (No.)

## 🛠️ Where it’s used (flows + impact)
- **SCIM** → Okta **creates** Slack account ahead of day‑one
- **SAML** → User **logs in** to Slack via enterprise SSO
- **OAuth2** → Slack **access token** governs API actions

## 🔗 How this links to other concepts (learning bridges)
- **What is SCIM? (1.01)** → provisioning definition
- **Lifecycle (1.05)** → JML events that trigger SCIM
- **Auth tracks (SAML/OIDC)** → parallel learning path for sign‑in

## ⚙️ Technical deep dive
**SCIM (Provisioning)**
```http
POST /scim/v2/Users
{ "userName":"jdoe","active":true }
```
**SAML (Authentication)**
```xml
<saml:Assertion><saml:Subject>jdoe@example.com</saml:Subject></saml:Assertion>
```
**OIDC (ID token)**
```json
{"iss":"https://login.microsoftonline.com/","sub":"123","email":"jdoe@example.com"}
```
**OAuth2 (Access token)**
```json
{"access_token":"eyJhbGciOi...","scope":"repo read:user","expires_in":3600}
```

## 🏢 Real‑world scenario
Entra ID **provisions** a Slack account via SCIM ahead of start date. On day one, the user **authenticates** via SAML SSO. When a script calls Slack APIs, OAuth2 **access tokens** control what the script can do.

## ❌ Common pitfalls
- Treating SCIM as login tech
- Using SAML/OIDC to “fake” provisioning
- Assuming OAuth2 overlaps with SCIM

## ⚠️ Risks & issues
| Risk | Impact | Mitigation |
|---|---|---|
| Protocol confusion | Wrong design | Map lifecycle vs login vs access early |
| Missing provisioning | SSO succeeds but user absent in app | Validate SCIM before enabling SSO |
| Overlapping configs | Setup errors | Document SCIM + SSO flows separately |

## 📝 Mini quiz
1) Which provisions accounts? **SCIM**  
2) Which handles sign‑in? **SAML/OIDC**  
3) Which issues access tokens? **OAuth2**

## 🔗 Navigation
👉 **Back:** [1.05 Lifecycle Operations](./1.05-lifecycle-operations.md) · 👉 **Next:** [2.01 Core Schema Overview](../2-core-schema/2.01-core-schema-overview.md)
