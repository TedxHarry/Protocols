# üèÜ Section 1.06 | Foundations | **"Where SCIM fits in IAM (Provisioning vs Authentication Protocols)"**

## üìå At a glance  
SCIM is a **provisioning protocol**, not an authentication protocol.  
It standardizes **how identities are created, updated, and removed** across systems, while protocols like **SAML, OIDC, and OAuth2** handle **login and access tokens**.  

---

## üìñ What is SCIM‚Äôs role in IAM?  
In IAM, multiple protocols serve different purposes:  

- **SCIM (System for Cross-domain Identity Management)**  
  - Handles **provisioning and deprovisioning**.  
  - Ensures accounts and groups exist in the right apps.  
  - Works asynchronously, triggered by HR or IAM events.  

- **SAML (Security Assertion Markup Language)**  
  - Handles **authentication** (who you are) using XML assertions.  
  - Common for enterprise SSO into legacy web apps.  

- **OIDC (OpenID Connect)**  
  - Modern authentication protocol using **JWT tokens**.  
  - Built on top of OAuth2, widely used for web/mobile SSO.  

- **OAuth2**  
  - Handles **authorization**, issuing tokens for APIs/resources.  
  - Defines what you can do once authenticated.  

**üîÑ Mental map**
```text
SCIM ‚Üí Provisioning (accounts + attributes)
SAML/OIDC ‚Üí Authentication (who you are, login sessions)
OAuth2 ‚Üí Authorization (what you can access)
```

> **Note (worth keeping):** A user might be **provisioned by SCIM** into Slack days before they ever **authenticate with SAML or OIDC** to log in. SCIM prepares the account; SSO protocols control login.  

---

## üîë Key characteristics  
- **Provisioning vs Authentication** ‚Üí SCIM = lifecycle, SAML/OIDC = login, OAuth2 = access tokens.  
- **Asynchronous vs Real-time** ‚Üí SCIM acts when HR/IAM events occur, authentication happens instantly at login.  
- **Complementary, not competing** ‚Üí SCIM ensures accounts exist, SAML/OIDC ensure secure login.  

---

## üåç Why it matters (and how it helps you later)  
- Clears up confusion between SCIM and SSO protocols.  
- Helps you explain SCIM‚Äôs **unique value** in interviews: it‚Äôs not about login, it‚Äôs about lifecycle.  
- Prevents wrong design decisions (e.g., trying to use SAML for provisioning).  
- Prepares you for vendor docs where SCIM and SSO protocols are configured side by side.  

---

## üõ†Ô∏è Where it‚Äôs used  
- **SCIM** ‚Üí Okta creates users in Slack before login.  
- **SAML** ‚Üí User logs into Slack via enterprise SSO.  
- **OIDC** ‚Üí User logs into GitHub with Microsoft account.  
- **OAuth2** ‚Üí User‚Äôs access token controls GitHub API usage.  

---

## üîó How this links to other concepts  
- **[What is SCIM? (1.01)](./1.01-what-is-scim.md)** ‚Üí defines SCIM as provisioning standard.  
- **[Lifecycle Operations (1.05)](./1.05-lifecycle-operations.md)** ‚Üí shows SCIM in action for JML events.  
- **Authentication (separate protocols)** ‚Üí covered in parallel IAM learning tracks (SAML, OIDC, OAuth2).  

---

<details>
<summary><strong>‚öôÔ∏è Technical deep dive</strong> (click to expand)</summary>

**SCIM example (Provisioning):**
```http
POST /scim/v2/Users
{
  "userName": "jdoe",
  "name": { "givenName": "John", "familyName": "Doe" },
  "active": true
}
```

**SAML example (Authentication):**
```xml
<saml:Assertion>
  <saml:Subject>jdoe@example.com</saml:Subject>
  <saml:AttributeStatement>
    <saml:Attribute Name="department" Value="Engineering"/>
  </saml:AttributeStatement>
</saml:Assertion>
```

**OIDC example (Authentication token):**
```json
{
  "iss": "https://login.microsoftonline.com/",
  "sub": "1234567890",
  "email": "jdoe@example.com",
  "aud": "client-app-id"
}
```

**OAuth2 example (Access token):**
```json
{
  "access_token": "eyJhbGciOiJI...",
  "scope": "repo read:user",
  "expires_in": 3600
}
```
</details>

---

<details>
<summary><strong>üè¢ Real-world scenario</strong> (click to expand)</summary>
A company integrates Entra ID with Slack:  
- HR **hires** a new employee ‚Üí Entra ID **provisions** the Slack account using SCIM.  
- On the first day, the user **authenticates** via SAML SSO to log into Slack.  
- When using Slack APIs, the user‚Äôs **OAuth2 token** controls what actions they can perform.  
</details>

---

<details>
<summary><strong>‚ùå Common pitfalls</strong> (click to expand)</summary>

- Thinking SCIM is an authentication protocol.  
- Forgetting provisioning and authentication solve different problems.  
- Using SAML/OIDC as a workaround for provisioning gaps (leads to shadow accounts).  
- Assuming OAuth2 and SCIM overlap ‚Äî they don‚Äôt.  
</details>

---

<details>
<summary><strong>‚ö†Ô∏è Risks & issues</strong> (click to expand)</summary>

| Risk | Impact | Mitigation |
|------|--------|------------|
| Confusing SCIM with SAML/OIDC | Wrong protocol used | Always map lifecycle vs login vs access |
| Missing provisioning | User can‚Äôt log in even if SSO works | Validate SCIM before enabling SSO |
| Overlapping configs | Errors in IAM setup | Document SCIM + SSO flows separately |
</details>

---

<details>
<summary><strong>üìù Mini quiz</strong> (click to expand)</summary>

1) Which protocol is used to provision accounts before login?  
a) SAML  
b) OIDC  
c) SCIM  
d) OAuth2  

2) Which statement is true about SCIM?  
a) It is an authentication protocol.  
b) It provisions users and groups across systems.  
c) It issues API access tokens.  
d) It replaces OAuth2.  

3) True or False: A user must log in via OIDC before SCIM can create their account.  
</details>

---

## üîó Navigation  
üëâ **Back:** [1.05 Lifecycle Operations in SCIM](./1.05-lifecycle-operations.md)  
üëâ **Next:** [2.01 Core Schema Overview](../2-core-schema/2.01-core-schema-overview.md)  
