# 🏆 Section 1.03 | Foundations | **"Core Objects: Users & Groups"**

## 📌 At a glance  
SCIM is built around two core objects: **Users** and **Groups**.  
They are the foundation of identity management in SCIM and define how accounts and memberships are represented across systems.  

---

## 📖 What are SCIM core objects?  
SCIM defines standardized **resource types** that all implementations must support:  

- **User** → Represents an individual identity (employee, contractor, student).  
- **Group** → Represents a collection of users, usually tied to roles, teams, or permissions.  

Every SCIM integration revolves around these two objects because they cover the most common provisioning and deprovisioning scenarios.  

**🔄 Flow overview**
```text
IdP (client) ──> SCIM API ──> SP (server)
    POST /Users          →   new account created
    PATCH /Users         →   user updated
    POST /Groups         →   group created
    PATCH /Groups        →   membership updated
```

> **Note (worth keeping):** Users and Groups are **mandatory resources** in every SCIM implementation, even if the SP only partially supports them. Extensions and custom attributes build on top of these, not instead of them.  

---

## 🔑 Key characteristics  
- **Users and Groups are core resources** → everything else in SCIM depends on them.  
- **User object** includes identifiers, names, emails, phone numbers, and enterprise attributes.  
- **Group object** contains a `displayName` and a list of members (user references).  
- **Both are extensible** → enterprises can add attributes (e.g., costCenter, department).  
- **Always JSON-based** → portable across vendors.  

---

## 🌍 Why it matters (and how it helps you later)  
- Without understanding **Users and Groups**, SCIM payloads don’t make sense.  
- Helps you troubleshoot **account creation failures** (often missing required User attributes).  
- Helps you debug **group-based provisioning** in SaaS apps (Slack channels, Zoom licenses, ServiceNow roles).  
- Sets you up for the schema deep dive in Section 2, where each attribute is defined and extended.  

---

## 🛠️ Where it’s used  
- **Users** → Provisioning accounts in Slack, Zoom, GitHub, ServiceNow.  
- **Groups** → Mapping role-based or team-based memberships (Okta groups → SaaS app groups).  
- **SailPoint/IGA tools** → Assigning entitlements through SCIM Groups.  

---

## 🔗 How this links to other concepts  
- **[SCIM Architecture (1.02)](./1.02-scim-architecture.md)** → showed client–server flow, this file details what flows inside.  
- **[User Schema (2.02)](../2-core-schema/2.02-user-schema.md)** → attribute-level definition of User.  
- **[Group Schema (2.03)](../2-core-schema/2.03-group-schema.md)** → details group structure and membership.  

---

<details>
<summary><strong>⚙️ Technical deep dive</strong> (click to expand)</summary>

**Minimal User example:**  
```json
{
  "schemas": ["urn:ietf:params:scim:schemas:core:2.0:User"],
  "userName": "jdoe",
  "name": { "givenName": "John", "familyName": "Doe" },
  "emails": [{ "value": "jdoe@example.com", "primary": true }]
}
```

**Minimal Group example:**  
```json
{
  "schemas": ["urn:ietf:params:scim:schemas:core:2.0:Group"],
  "displayName": "Engineering",
  "members": [
    { "value": "2819c223-7f76-453a-919d-413861904646", "$ref": "/Users/2819c223-7f76-453a-919d-413861904646" }
  ]
}
```

**Key points:**  
- Users require a `userName`.  
- Groups require a `displayName`.  
- Group members are **references** to User objects.  
</details>

---

<details>
<summary><strong>🏢 Real-world scenario</strong> (click to expand)</summary>
A university provisions student accounts into Google Workspace.  
- Each new student is created as a **User** via `/Users`.  
- Students are also added to Groups (e.g., “Class of 2025”) via `/Groups`.  
- When a student leaves, their **User** is disabled and removed from Groups.  
</details>

---

<details>
<summary><strong>❌ Common pitfalls</strong> (click to expand)</summary>

- Forgetting `userName` in User payloads (causes rejections).  
- Not handling case sensitivity for `userName`.  
- Assuming all SPs support Groups fully (many only partially implement).  
- Confusing `id` (system-generated) with `externalId` (client-supplied).  
</details>

---

<details>
<summary><strong>⚠️ Risks & issues</strong> (click to expand)</summary>

| Risk | Impact | Mitigation |
|------|--------|------------|
| Missing required attributes | Failed account creation | Validate against schema first |
| Group misalignment | Wrong access mapped | Cross-check IdP and SP group mappings |
| Orphaned references | Broken memberships | Ensure deprovisioning removes users from groups |
</details>

---

<details>
<summary><strong>📝 Mini quiz</strong> (click to expand)</summary>

1) Which attributes are **mandatory** for User and Group objects?  
a) `userName` for User, `displayName` for Group  
b) `id` for User, `id` for Group  
c) `emails` for User, `members` for Group  
d) None, they are optional  

2) What does a Group membership reference point to?  
a) The Group’s `displayName`  
b) The User’s `userName`  
c) The User’s `id`  
d) The SP’s schema definition  

3) True or False: Groups are optional in SCIM implementations.  
</details>

---

## 🔗 Navigation  
👉 **Back:** [1.02 SCIM Architecture](./1.02-scim-architecture.md)  
👉 **Next:** [1.04 SCIM vs LDAP vs Proprietary APIs](./1.04-scim-vs-ldap.md)  
