# üèÜ Section 1.04 | Foundations | ‚ÄúSCIM vs LDAP‚Äù

---

## üìå At a glance
SCIM and LDAP are both used to manage identity data, but they differ in **design, usage, and scope**.  
LDAP (Lightweight Directory Access Protocol) is older and directory-focused, while SCIM is modern, cloud-ready, and API-driven.  

---

## üìñ What is SCIM vs LDAP?
- **LDAP** is a protocol for querying and managing directory services. It has been widely used for on-premise identity stores such as Active Directory or OpenLDAP.  
- **SCIM** is a provisioning standard designed for **cloud and SaaS applications**, using REST and JSON for simplicity and interoperability.  

> **Notes**
- LDAP ‚Üí Query/search directory entries.  
- SCIM ‚Üí Provision/deprovision users and groups across systems.  
- LDAP focuses on **authentication/lookup**; SCIM focuses on **lifecycle management**.  

---

## ‚ùó Problem before SCIM
- LDAP was not designed for cloud-scale SaaS integrations.  
- Each SaaS app required custom LDAP connectors or batch sync jobs.  
- LDAP queries are **stateful and complex**; SCIM offers **stateless REST APIs**.  
- Enterprises needed a **lightweight, standardized way** to provision cloud accounts ‚Üí SCIM filled this gap.  

---

## üîë Key characteristics

### LDAP
- Tree-structured directory data model.  
- Optimized for **search and authentication**.  
- Schema is rigid and must be predefined.  
- Uses **BER/ASN.1 encoding** (binary), not web-friendly.  
- Heavily used in on-premises infrastructure (e.g., Active Directory).  

### SCIM
- RESTful + JSON API model.  
- Optimized for **provisioning and lifecycle events**.  
- Schema is extensible (core + enterprise + custom).  
- Uses **HTTP + JSON**, web-native.  
- Designed for cloud SaaS applications and IdPs.  

---

## üåç Why it matters (and how it helps you later)
- LDAP remains important for **on-prem directory services**.  
- SCIM is the **future standard** for cloud-based provisioning.  
- Understanding differences helps in **migration projects**, where companies move from LDAP-heavy setups to SCIM-driven integrations.  
- Career payoff: Many IAM projects involve **bridging LDAP and SCIM worlds** (e.g., syncing Active Directory with Entra ID + SCIM to SaaS).  

---

## üõ†Ô∏è Where it‚Äôs used (flows + impact)

### LDAP Typical Flow
```
Client ‚Üí LDAP Bind ‚Üí Query Directory ‚Üí Return User/Group Data
```

### SCIM Typical Flow
```
IdP (Client) ‚Üí POST/PUT/PATCH ‚Üí SCIM Server (SP)
```

- **LDAP without SCIM**: Good for internal authentication but weak at SaaS provisioning.  
- **SCIM**: Automates SaaS account provisioning, updates, and deactivation.  

Impact: Modern enterprises often run **both**: LDAP for legacy apps, SCIM for cloud.  

---

## üîó How this links to other concepts
- [1.03 Core Objects](1.03-core-objects.md) ‚Üí Both LDAP and SCIM model **users and groups**, but in different formats.  
- [1.05 Lifecycle Operations](1.05-lifecycle-operations.md) ‚Üí Shows how SCIM operationalizes joiner/mover/leaver events, which LDAP was never designed to handle in SaaS.  
- [6.03 CIAM vs IGA](../6-advanced-future/6.03-ciam-vs-iga.md) ‚Üí Explores broader context of identity management across protocols.  

---

## ‚öôÔ∏è Technical deep dive

### Example: LDAP Query
```ldif
ldapsearch -x -b "dc=example,dc=com" "(uid=bjensen)" cn mail
```
**Result:**
```
dn: uid=bjensen,ou=People,dc=example,dc=com
cn: Barbara Jensen
mail: bjensen@example.com
```

### Example: SCIM User Fetch
```http
GET /Users?filter=userName eq "bjensen"
Authorization: Bearer <token>
```
**Response:**
```json
{
  "Resources": [
    {
      "id": "2819c223-7f76-453a-919d-413861904646",
      "userName": "bjensen",
      "emails": [{ "value": "bjensen@example.com" }]
    }
  ]
}
```

**Key differences**:  
- LDAP: Binary encoding, hierarchical tree search.  
- SCIM: JSON payload, flat REST call.  

---

## üè¢ Real-world scenario
A multinational company integrates its on-prem Active Directory with Microsoft Entra ID.  

- LDAP continues to serve internal apps (authentication/authorization).  
- Entra ID synchronizes users from AD, then uses **SCIM** to provision accounts into 30+ SaaS apps (Workday, ServiceNow, Salesforce).  

**Impact:** LDAP handles internal legacy needs, while SCIM ensures **cloud scalability and compliance**.  

---

## ‚ùå Common pitfalls
- Thinking SCIM replaces LDAP completely ‚Üí in reality, both coexist.  
- Trying to use LDAP for SaaS provisioning ‚Üí brittle and error-prone.  
- Forgetting LDAP requires **bind/authentication context**, while SCIM is **stateless REST**.  
- Not accounting for schema mismatches when bridging LDAP to SCIM.  

---

## ‚ö†Ô∏è Risks & issues

| Risk | Impact | Mitigation |
|------|--------|------------|
| Legacy LDAP reliance | Blocks SaaS adoption | Bridge LDAP ‚Üí SCIM via IdP or sync tools |
| Schema rigidity in LDAP | Hard to adapt to new attributes | Use SCIM‚Äôs extensibility where possible |
| Security misconfiguration | Weak binds or open LDAP queries | Enforce TLS + proper ACLs |
| Dual systems complexity | Harder troubleshooting | Document integration architecture clearly |

**Real-world:** A migration project failed because the team assumed LDAP could handle SaaS lifecycle management. They had to reimplement provisioning using SCIM mid-project.  

---

## üìù Mini quiz
1. Which protocol is **older and directory-focused**?  
   a) SCIM  
   b) LDAP  
   c) SAML  
   d) OIDC  

2. Which protocol is **web-native and uses JSON**?  
   a) LDAP  
   b) Kerberos  
   c) SCIM  
   d) RADIUS  

3. Scenario: A company needs to deprovision SaaS accounts automatically when employees leave. Which protocol should they use?  
   a) LDAP  
   b) SCIM  
   c) Kerberos  
   d) TACACS+  

---

## üîó Navigation
üëâ Back: [1.03 Core Objects](1.03-core-objects.md)  
üëâ Next: [1.05 Lifecycle Operations](1.05-lifecycle-operations.md)
