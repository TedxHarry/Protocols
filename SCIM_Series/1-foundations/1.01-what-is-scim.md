# 🏆 Section 1.01 | Foundations | “What is SCIM?”

---

## 📌 At a glance
SCIM (System for Cross-domain Identity Management) is an **open standard protocol** for identity provisioning.  
It provides **standard schemas and REST APIs** so organizations can consistently create, update, and deprovision users and groups across multiple applications.  

---

## 📖 What is SCIM?
SCIM is a **standards-based protocol** that eliminates the need for one-off integrations between identity providers (IdPs) and service providers (SPs).  
It ensures that identity data flows are **predictable, secure, and interoperable**, regardless of the vendor.  

> **Notes**
- Defined by **RFC 7643 (Schema)** and **RFC 7644 (Protocol)**.  
- Primary resources: **Users** and **Groups**.  
- Widely adopted by SaaS vendors such as **Salesforce, Slack, Zoom, Okta, Entra ID**.  

---

## ❗ Problem before SCIM
- Each SaaS app required a **custom connector** or API integration.  
- **Inconsistent attributes** led to mismatched user records across systems.  
- Manual provisioning created delays, errors, and compliance risks.  
- Offboarding failures left **orphaned accounts**, exposing sensitive data.  

---

## 🔑 Key characteristics
- **Standard schemas** → unify how attributes like `userName`, `emails`, `groups` are defined.  
- **REST + JSON APIs** → lightweight, simple to debug.  
- **Lifecycle support** → maps directly to joiner, mover, and leaver events.  
- **Interoperability** → one SCIM connector supports many apps, avoiding custom builds.  
- **Extensible** → allows enterprise and vendor-specific attributes.  
- **Focus on automation** → reduces manual IT work and human error.  
- **Secure deprovisioning** → accounts can be disabled or removed cleanly.  

---

## 🌍 Why it matters (and how it helps you later)
- **IAM relevance**: SCIM is the **de facto standard** for provisioning in modern IAM. If you work with Azure Entra, Okta, SailPoint, Ping, or any major SaaS vendor, SCIM is at the center.  
- **Governance**: Automates offboarding → closes compliance gaps (no active accounts for ex-employees).  
- **Security**: Minimizes risk by ensuring identities are removed on time.  
- **Audit readiness**: Provides a clear, logged trail of identity changes.  
- **Career skill**: Mastering SCIM makes you employable in **IAM, IGA, CIAM, and cloud security engineering** roles.  
- For this series: understanding SCIM is a **core building block** before we dive into schemas, protocol operations, and advanced implementations.  

---

## 🛠️ Where it’s used (flows + impact)

### Typical flow
```
HR System → IdP → SCIM → Application
```

- **Joiner (new hire)**:  
  HR adds employee → IdP triggers → `POST /Users` → account created in app.  
- **Mover (role change)**:  
  HR updates title/department → IdP triggers → `PATCH /Users` → permissions updated.  
- **Leaver (termination)**:  
  HR termination → IdP triggers → `PATCH active:false` or `DELETE /Users` → account disabled.  

### With vs without SCIM
- ❌ Without SCIM → manual tickets, provisioning delays (days), high error rate, orphaned accounts.  
- ✅ With SCIM → automated, real-time provisioning (minutes), consistent attributes, improved compliance.  

---

## 🔗 How this links to other concepts
- [1.02 SCIM Architecture](1.02-scim-architecture.md) → shows **how IdPs and SPs communicate** using SCIM, preparing you to understand the flows in detail.  
- [1.03 Core Objects](1.03-core-objects.md) → dives into **Users and Groups**, the two resource objects every SCIM system revolves around.  
- [1.05 Lifecycle Operations](1.05-lifecycle-operations.md) → explains how **joiner/mover/leaver** events are implemented through SCIM operations.  

👉 You cannot master later sections like filtering, bulk operations, or troubleshooting until you first understand **what SCIM is and why it exists**.  

---

## ⚙️ Technical deep dive

### Core SCIM resource rules
| Attribute | Required? | Description |
|-----------|-----------|-------------|
| `id` | Yes | Unique identifier for the resource (set by server). |
| `externalId` | No | Client-managed identifier, useful for HR systems. |
| `schemas` | Yes | Array of schema URNs applied to this resource. |
| `meta` | Yes | Metadata such as `created`, `lastModified`. |

### Example: Minimal user creation
```http
POST /Users
Content-Type: application/scim+json

{
  "schemas": ["urn:ietf:params:scim:schemas:core:2.0:User"],
  "userName": "jane.doe",
  "name": {
    "givenName": "Jane",
    "familyName": "Doe"
  },
  "emails": [
    { "value": "jane.doe@example.com", "primary": true }
  ]
}
```
**Key fields**:  
- `schemas` → required array (must include User schema).  
- `userName` → login name, unique per tenant.  
- `emails` → multi-valued attribute with `primary:true`.  

### Example: Disable user
```http
PATCH /Users/2819c223-7f76-453a-919d-413861904646
Content-Type: application/scim+json

{
  "schemas":["urn:ietf:params:scim:api:messages:2.0:PatchOp"],
  "Operations": [{
    "op": "replace",
    "path": "active",
    "value": false
  }]
}
```
**Key fields**:  
- `schemas` must reference PatchOp schema.  
- `active:false` disables account instead of deleting, preserving audit records.  

---

## 🏢 Real-world scenario
A global enterprise integrates Workday HR with Azure Entra ID (IdP), provisioning 15 SaaS apps (Salesforce, Zoom, Slack, ServiceNow, etc.).  

- Before SCIM: IT manually created 3,000 accounts/month across systems. Average onboarding delay = **3–5 business days**. Offboarding failures left ~8% of ex-employee accounts still active.  
- After SCIM: HR termination triggers → Entra ID SCIM connector disables user across all apps in **under 10 minutes**.  
**Impact**: Compliance audit passed, IT workload cut by 70%, and risk of orphaned accounts eliminated.  

---

## ❌ Common pitfalls
- Forgetting to include `schemas` in every request.  
- Assuming all vendors support **PATCH** (many only allow PUT).  
- Using `DELETE` instead of `active:false` → breaks audit trail.  
- Ignoring **case sensitivity** in `userName`.  
- Not checking `/ServiceProviderConfig` before relying on features like filtering.  

---

## ⚠️ Risks & issues

| Risk | Impact | Mitigation |
|------|--------|------------|
| Vendor partial SCIM support | Some operations fail silently | Test via `/ServiceProviderConfig` and adjust mappings |
| Attribute mismapping | Incorrect entitlements or wrong data in apps | Use schema reference and test with pilot users |
| Orphaned accounts if deprovision fails | Security + compliance exposure | Monitor deprovision logs and retry failed requests |
| Using DELETE too often | Permanent data loss, lost audit trail | Use `active:false` unless true deletion is required |

**Real-world:** A financial firm failed an audit when 200 ex-contractor accounts were found active due to unmonitored SCIM deprovision errors.  

---

## 📝 Mini quiz
1. Which RFC defines SCIM **protocol operations**?  
   a) RFC 7643  
   b) RFC 7644  
   c) RFC 5280  
   d) RFC 6749  

2. Which attribute must always be included in every SCIM resource?  
   a) `schemas`  
   b) `status`  
   c) `externalId`  
   d) `groups`  

3. Scenario: A user is terminated in HR, but their Salesforce account stays active. Logs show SCIM calls failed silently. What’s the most likely issue?  
   a) Missing `schemas` field  
   b) Vendor lacked full SCIM support  
   c) `externalId` mismatch  
   d) PATCH instead of PUT used  

---

## 🔗 Navigation
👉 Back: [README](../README.md)  
👉 Next: [1.02 SCIM Architecture](1.02-scim-architecture.md)
