# ğŸ† Section 1.02 | Foundations | **"SCIM Architecture"**

## ğŸ“Œ At a glance  
SCIM follows a **clientâ€“server architecture** where an **Identity Provider (IdP)** acts as the client and a **Service Provider (SP)** exposes SCIM APIs as the server.  
This setup standardizes how identities are **provisioned, updated, and deprovisioned** across applications.  

---

## ğŸ“– What is SCIM architecture?  
SCIM architecture describes the **roles and interactions** between systems that use SCIM to exchange identity data.  

- The **IdP (Identity Provider)** â€” such as Okta, Microsoft Entra ID, or SailPoint â€” **initiates** provisioning events.  
- The **SP (Service Provider)** â€” such as Slack, Zoom, or ServiceNow â€” exposes **SCIM endpoints** (`/Users`, `/Groups`) to receive and process these requests.  
- Communication happens over **REST APIs with JSON payloads**.  

**ğŸ”„ Flow overview**
```text
Identity Provider (IdP) â”€â”€ SCIM API â”€â”€> Service Provider (SP)
    (create/update user)                 (account created/updated)
```

> **Note (worth keeping):** In SCIM, the IdP is always the **client** and the SP is always the **server**, even if both support APIs. Confusing this is a common mistake during troubleshooting.  

---

## ğŸ”‘ Key characteristics  
- **IdP as client** â†’ always initiates provisioning requests.  
- **SP as server** â†’ exposes SCIM API endpoints to process requests.  
- **Endpoints are predictable** â†’ `/Users`, `/Groups`, `/Schemas`, `/ServiceProviderConfig`.  
- **RESTful interaction** â†’ IdP sends POST/PUT/PATCH/DELETE, SP replies with JSON.  
- **Stateless operations** â†’ each request is independent, following HTTP conventions.  

---

## ğŸŒ Why it matters (and how it helps you later)  
- Knowing the architecture helps you debug **who is responsible** when something fails (IdP or SP).  
- Explains why SCIM is so widely adopted â€” it keeps roles consistent across vendors.  
- Builds the mental model youâ€™ll need before diving into **schemas** (Section 2) and **operations** (Section 3).  
- Prepares you to answer interview questions like *â€œWho initiates a SCIM request, IdP or SP?â€*.  

---


## ğŸ› ï¸ Where itâ€™s used (flows + impact)
- **Joiner** â†’ HR adds employee â†’ IdP **POST /Users** â†’ app account **created automatically**, no IT tickets required.
- **Mover** â†’ Role/department change â†’ IdP **PATCH /Users** or **PATCH /Groups** â†’ roles, entitlements, and memberships **updated instantly**.
- **Leaver** â†’ Exit event â†’ IdP **DELETE /Users** or `active=false` â†’ accounts **disabled across apps the same day**, no orphaned access.

ğŸ‘‰ Without SCIM: weeks of manual tickets and scripts. With SCIM: minutes, fully auditable.

## ğŸ”— How this links to other concepts (learning bridges)
- **Core Objects (1.03)** â†’ Lifecycle acts on Users & Groups. Without these, lifecycle has no targets.
- **CRUD Operations (3.04)** â†’ JML maps directly to POST, PATCH/PUT, and DELETE or soft disable.
- **Failures (4.03)** â†’ Shows what happens when lifecycle fails (e.g., orphaned accounts left active).
## ğŸ”— Navigation  
ğŸ‘‰ **Back:** [1.01 What is SCIM?](./1.01-what-is-scim.md)  
ğŸ‘‰ **Next:** [1.03 Core Objects: Users & Groups](./1.03-core-objects.md)  


## âš ï¸ Risks & issues
| Risk | Impact | Mitigation |
|------|--------|------------|
| Mis-mapped attributes | Inconsistent accounts | Validate schema mapping in pilots |
| Weak deprovisioning | Orphaned accounts remain active | Test disable/delete paths in each app |
| Partial vendor support | Missing PATCH or filters | Check `/ServiceProviderConfig`, plan workarounds |
| Protocol confusion | Wrong tool for the job | Train teams on SCIM vs SSO protocols |

Real-world: A company kept 200+ Slack users active months after exit because SCIM wasnâ€™t connected. Audit flagged this as high-risk.
