# SECTION 7: Supporting Governance
Access requests, certifications, and compliance

## 7.1: Access Requests

### 7.1.1: Basic Steps of Access Request Process

### Overview
The access request process in SailPoint ISC enables users to request additional access beyond their auto-assigned birthright access. Understanding the complete request lifecycle—from submission through provisioning—is essential for ISC administrators and critical for certification.

**What you'll learn:**
- Complete access request workflow
- Request submission process
- Validation and pre-processing steps
- Approval workflow initiation
- Provisioning execution
- Request status tracking
- Common request types

---

### Access Request Lifecycle

#### Seven Core Stages
```
1. Request Submission
   ↓
2. Request Validation
   ↓
3. Approval Workflow
   ↓
4. Approval Decision
   ↓
5. Provisioning Plan Creation
   ↓
6. Provisioning Execution
   ↓
7. Confirmation & Completion
```

**Critical concept:** Each stage must complete successfully before the next stage begins. Failure at any stage stops the entire process.

---

### Stage 1: Request Submission

#### Request Initiation Methods

**Method 1: Self-Service Portal (Most Common)**
```
User logs in to ISC
→ Access Request menu
→ Search for requestable items
→ Select role/access profile/entitlement
→ Add to cart
→ Submit request
```

**Method 2: Manager/Admin Request on Behalf**
```
Manager logs in
→ Request Access For...
→ Select identity (the beneficiary)
→ Search and select items
→ Submit request
```

**Method 3: API-based Request**
```bash
POST /v3/access-requests
{
  "requestedFor": ["identity-id"],
  "requestedItems": [
    {
      "type": "ACCESS_PROFILE",
      "id": "access-profile-id",
      "comment": "Need for project X"
    }
  ]
}
```

**Method 4: Automated Request (via Lifecycle Event)**
```
Lifecycle state change triggers workflow
→ Workflow creates access request automatically
→ Request submitted programmatically
```

#### Requestable Items

**What can be requested:**

**1. Roles**
- Must have `requestable = true`
- May contain multiple access profiles
- Single request grants all included access

**2. Access Profiles**
- Must have `requestable = true`
- Contains 2-7 related entitlements
- Purpose-based access bundles

**3. Individual Entitlements**
- Must be marked requestable
- Single entitlement from specific source
- Less common (access profiles preferred)

**4. Accounts**
- Request account creation on specific source
- Typically for new applications
- May require additional information

**What cannot be requested:**
- Disabled roles/access profiles
- Items marked `requestable = false`
- Items user already possesses
- Items that violate policies (if policy enforcement enabled)

---

#### Request Submission Details

**Required information:**

**Mandatory fields:**
- **Requested For**: Who is receiving the access (identity ID)
- **Requested Items**: What access is being requested (role/AP/entitlement IDs)

**Optional but recommended:**
- **Business Justification**: Why access is needed
- **Request Comments**: Additional context
- **Duration**: Temporary access timeframe (if supported)
- **Custom Fields**: Organization-specific metadata

**Example request payload:**
```json
{
  "requestedFor": ["2c91808a7624751a01762f19d665344d"],
  "requestedItems": [
    {
      "type": "ROLE",
      "id": "2c91808b7691234a01769f19d6653e1a",
      "comment": "Need Engineering Tools role for Project Phoenix development work"
    }
  ],
  "clientMetadata": {
    "projectCode": "PHX-2024",
    "costCenter": "ENG-001"
  }
}
```

#### User Experience

**Typical submission flow:**

**Step 1: Access request catalog**
```
Dashboard → Request Access
OR
My Access → Request New Access
```

**Step 2: Search for items**
```
Search bar: "VPN"
Results:
- VPN Access (Role)
- VPN User Group (Access Profile)
- VPN-Users (Entitlement)

Filters available:
- Item type (Role, Access Profile, Entitlement)
- Source application
- Categories/tags
```

**Step 3: View item details**
```
Click on item → Details panel shows:
- Description
- Included entitlements (for roles/APs)
- Approval requirements
- Typical approval time
- Owner
```

**Step 4: Add to cart**
```
"Request Access" button
→ Item added to request cart
→ Can add multiple items
→ Can request for self or others (if permitted)
```

**Step 5: Review and submit**
```
Cart shows:
- All items to be requested
- Requester (for whom)
- Required justification fields

"Submit Request" button
→ Confirmation message
→ Request ID provided (e.g., "AR-2024-01234")
```

---

### Stage 2: Request Validation

#### Automatic Validation Checks

**Validation occurs immediately after submission, BEFORE approval workflow starts.**

**Check 1: Item is requestable**
```
Validation: Is the item marked requestable = true?

If NO:
- Request rejected immediately
- Error: "Item not available for request"
- User notified

If YES:
- Continue to Check 2
```

**Check 2: User doesn't already have access**
```
Validation: Does requestor already possess this access?

Check:
- Direct entitlement assignment
- Access via existing roles
- Access via existing access profiles

If already has:
- Request rejected (duplicate access)
- Error: "Access already granted"
- Show existing assignment details

If doesn't have:
- Continue to Check 3
```

**Check 3: Policy compliance (if enabled)**
```
Validation: Would granting access violate policies?

Policies checked:
- Separation of Duties (SoD)
- Role compatibility
- Risk score thresholds
- Custom policy rules

If violates policy:
- Behavior depends on policy configuration
- DENY: Request rejected immediately
- WARN: Request continues with warning
- LOG: Request continues, violation logged

If complies:
- Continue to Check 4
```

**Check 4: Approval workflow exists**
```
Validation: Is approval workflow properly configured?

Check:
- Approval chain defined
- Approvers valid and active
- No circular references
- Fallback approver configured

If workflow invalid:
- Request fails
- Error: "Approval workflow configuration error"
- Admin notified

If workflow valid:
- Continue to Stage 3
```

**Check 5: Required fields present**
```
Validation: Are all required custom fields populated?

Example required fields:
- Business justification
- Project code
- Cost center
- Manager approval indicator

If missing required fields:
- Request rejected
- Error: "Required information missing"
- List missing fields

If all fields present:
- Validation complete
- Proceed to approval workflow
```

---

### Stage 3: Approval Workflow Initiation

#### Work Item Creation

**When validation passes, ISC creates approval work items.**

**Work item components:**
```json
{
  "workItemId": "WI-2024-05678",
  "requestId": "AR-2024-01234",
  "type": "Approval",
  "requester": "john.smith",
  "requestedFor": "jane.doe",
  "requestedItem": {
    "type": "ROLE",
    "name": "Engineering Tools",
    "id": "2c91808b..."
  },
  "approver": "mike.manager",
  "created": "2024-02-15T10:30:00Z",
  "dueDate": "2024-02-17T10:30:00Z",
  "status": "Pending",
  "priority": "Normal"
}
```

#### Approval Chain Determination

**ISC determines WHO must approve based on configuration.**

**Common approver types:**

**1. MANAGER**
```
Approver: Requester's direct manager
Resolution: Look up manager from identity attribute
Fallback: If no manager, use fallback approver

Example:
User: john.smith
Manager attribute: "mike.manager"
Approver: mike.manager
```

**2. OWNER**
```
Approver: Owner of the requested item
Resolution: Role/Access Profile owner field
Fallback: If owner inactive, use fallback

Example:
Requested: "VPN Access" role
Role owner: "network.admin"
Approver: network.admin
```

**3. SOURCE_OWNER**
```
Approver: Owner of the source application
Resolution: Source owner field
Used for: Access profiles tied to specific sources

Example:
Requested: "Salesforce Sales User" AP
Source: Salesforce
Source owner: "crm.admin"
Approver: crm.admin
```

**4. APP_OWNER**
```
Approver: Owner of the application
Similar to SOURCE_OWNER
Legacy term, same concept
```

**5. GOVERNANCE_GROUP**
```
Approver: Designated governance group
Resolution: Look up governance group members
Any member can approve
Distribution: Work item sent to all members

Example:
Governance group: "IT Security Team"
Members: [security.admin1, security.admin2, security.admin3]
Work item sent to: All 3 members
Approval: First to respond approves/denies for group
```

**6. WORKFLOW**
```
Approver: Determined by custom workflow logic
Resolution: Workflow executes to determine approver(s)
Flexible: Can implement complex approval logic

Example:
Workflow: "High-Value Access Approval"
Logic: If risk > 50, requires CISO approval
       If risk ≤ 50, requires manager approval
```

#### Multi-Level Approval Chains

**Some requests require multiple approvals in sequence.**

**Example: Engineering Manager Role**
```
Level 1: Manager approval
  → Approver: Requester's manager
  → Decision: Approve/Deny
  
If Level 1 Approved:
Level 2: Role owner approval
  → Approver: Engineering Managers role owner
  → Decision: Approve/Deny

If Level 2 Approved:
Level 3: Security review
  → Approver: IT Security governance group
  → Decision: Approve/Deny

Final: All 3 levels must approve for access to be granted
```

**Sequential approval characteristics:**
- Each level waits for previous level
- Denial at any level = entire request denied
- No skipping levels
- Escalation possible if approver doesn't respond

---

#### Approval Notification

**Approvers notified via multiple channels:**

**Email notification:**
```
Subject: Access Request Pending Your Approval

You have a pending access request:

Request ID: AR-2024-01234
Requester: John Smith (john.smith@corp.com)
Requested For: Jane Doe
Requested Item: Engineering Tools (Role)
Justification: "Need for Project Phoenix development"

[Approve Button] [Deny Button] [View Details]

This request will expire in 48 hours if no action taken.
```

**In-app notification:**
```
ISC Dashboard → Notifications badge (1)
"My Work" section → Pending Approvals (1)
Click to view → Full request details
Approve/Deny with comments
```

**Mobile notification (if mobile app enabled):**
```
Push notification:
"Access request requires your approval"
Tap to open → Mobile approval interface
Quick approve/deny
```

---

### Stage 4: Approval Decision

#### Approver Actions

**Three possible decisions:**

**1. Approve**
```
Action: Approver clicks "Approve"
Optional: Add approval comments
Effect:
- Work item marked "Approved"
- If multi-level: Next level begins
- If final level: Proceed to provisioning
- Requester notified
```

**2. Deny**
```
Action: Approver clicks "Deny"
Required: Denial reason/comments
Effect:
- Work item marked "Denied"
- Entire request rejected
- No provisioning occurs
- Requester notified with reason
- Request closed
```

**3. Forward/Reassign**
```
Action: Approver forwards to another approver
Required: Reason for forward
Optional: Comments
Effect:
- Work item reassigned
- New approver notified
- Original approver removed
- Requester notified of reassignment
```

**4. Request More Information**
```
Action: Approver requests clarification
Effect:
- Work item status: "Information Requested"
- Requester notified
- Awaits requester response
- Timer paused until response received
```

**5. No Action (Timeout)**
```
Action: Approver doesn't respond within SLA
Effect (depends on configuration):
- Option A: Auto-deny after timeout
- Option B: Escalate to manager/fallback
- Option C: Auto-approve (rare, risky)
- Timeout typically: 24-72 hours
```

#### Decision Recording

**All approval decisions are permanently recorded:**
```json
{
  "requestId": "AR-2024-01234",
  "workItemId": "WI-2024-05678",
  "approver": "mike.manager",
  "decision": "Approved",
  "decisionDate": "2024-02-15T14:30:00Z",
  "comments": "Approved for Project Phoenix. Temp access for 90 days.",
  "ipAddress": "10.5.2.100",
  "userAgent": "Mozilla/5.0..."
}
```

**Audit trail includes:**
- Who approved/denied
- When decision made
- From where (IP address)
- Comments provided
- Time from assignment to decision
- Any forwards/reassignments

---

### Stage 5: Provisioning Plan Creation

#### What is a Provisioning Plan?

**Provisioning plan:** ISC's internal blueprint for what changes need to be made on target systems.

**Plan created after final approval received.**

**Plan components:**

**1. Identity information**
```
Who is receiving access:
- Identity ID
- Identity name
- Identity attributes
- Existing accounts
```

**2. Account requests**
```
What accounts need creation/modification:
- Source/application
- Operation (Create/Modify)
- Account attributes
- Attribute values
```

**3. Entitlement requests**
```
What entitlements to grant:
- Entitlement name
- Entitlement source
- Native identity
- Operation (Add/Grant)
```

**4. Provisioning target**
```
Where changes will be made:
- Target system/source
- Connection method
- Service account
```

#### Example Provisioning Plan

**Request:** Jane Doe requests "VPN Access" role

**Plan created:**
```json
{
  "planId": "PP-2024-00789",
  "requestId": "AR-2024-01234",
  "identity": {
    "id": "2c91808a...",
    "name": "jane.doe"
  },
  "accountRequests": [
    {
      "application": "Active Directory",
      "operation": "Modify",
      "nativeIdentity": "CN=Jane Doe,OU=Users,DC=corp,DC=local",
      "attributeRequests": [
        {
          "name": "memberOf",
          "operation": "Add",
          "value": "CN=VPN-Users,OU=Groups,DC=corp,DC=local"
        }
      ]
    }
  ],
  "status": "Pending",
  "created": "2024-02-15T14:35:00Z"
}
```

**Plan interpretation:**
- Modify Jane's existing AD account
- Add her to VPN-Users group
- Single entitlement grant
- No account creation needed

---

### Stage 6: Provisioning Execution

#### Execution Process

**Step 1: Plan Submission**
```
Provisioning plan sent to provisioning engine
Queued for execution
Priority assigned (Normal/High/Critical)
```

**Step 2: Account Resolution**
```
Identify target account:
- Find correlated account for identity
- Verify account exists and is active
- If account missing: Create account first

Example:
Identity: jane.doe
Source: Active Directory
Correlated account: "CORP\jdoe"
Account found: YES
Proceed: To entitlement provisioning
```

**Step 3: Entitlement Provisioning**
```
For each entitlement in plan:
1. Connect to target system
2. Execute provisioning command
3. Verify success
4. Log result

Example (AD group add):
Command: Add-ADGroupMember -Identity "VPN-Users" -Members "jdoe"
Execution: SUCCESS
Verification: Get-ADGroupMember confirms membership
Log: "User jdoe added to VPN-Users at 2024-02-15 14:36:22"
```

**Step 4: Confirmation**
```
Provisioning completes:
- Success: Mark plan complete
- Partial: Mark partially complete, log failures
- Failure: Mark failed, capture error details

Update request status:
- Provisioning complete
- Access granted
- Close request
```

#### Provisioning Methods

**Method 1: Real-time provisioning**
```
ISC directly modifies target system
Immediate execution
Used for: Connected systems with APIs
Examples: Active Directory, Salesforce, O365
```

**Method 2: Ticketing integration**
```
ISC creates ticket in external system
Manual fulfillment by application team
Used for: Disconnected or manual systems
Examples: Legacy apps, physical access, manual processes

Process:
1. ISC creates ServiceNow ticket
2. Ticket assigned to application team
3. Team manually grants access
4. Team closes ticket
5. ISC receives closure notification
6. ISC updates request status
```

**Method 3: File-based provisioning**
```
ISC generates flat file with changes
File sent to target system
Target system processes file
Used for: Batch-oriented systems
Examples: Mainframes, certain HR systems
```

---

### Stage 7: Confirmation & Completion

#### Request Completion

**Final status determination:**

**Status: Completed (Success)**
```
All provisioning succeeded
Access granted to target systems
Request marked complete
Status: "Completed"
Color: Green
```

**Status: Partially Completed**
```
Some provisioning succeeded, some failed
Partial access granted
Status: "Partially Completed"
Color: Yellow
Details: Lists succeeded vs. failed items
```

**Status: Failed**
```
All provisioning failed
No access granted
Status: "Failed"
Color: Red
Error details captured
```

**Status: Canceled**
```
Request canceled before completion
By: Requester or approver
When: During approval or provisioning
Status: "Canceled"
Access: Not granted
```

#### Requester Notification

**Completion email:**
```
Subject: Access Request Completed - AR-2024-01234

Your access request has been completed.

Request ID: AR-2024-01234
Requested Item: Engineering Tools (Role)
Status: Completed

Access Details:
✓ VPN Access - Granted
✓ Engineering Shared Drive - Granted
✓ Development Tools - Granted

You can now access these resources.

If you have questions, reply to this email or contact IT Support.
```

**In-app notification:**
```
Dashboard → Notifications
"Your access request AR-2024-01234 is complete"
Click for details → Full request history
```

#### Audit Trail

**Complete record preserved:**
```json
{
  "requestId": "AR-2024-01234",
  "requester": "john.smith",
  "requestedFor": "jane.doe",
  "submittedDate": "2024-02-15T10:30:00Z",
  "requestedItems": [...]
  ,
  "approvalHistory": [
    {
      "approver": "mike.manager",
      "decision": "Approved",
      "date": "2024-02-15T14:30:00Z",
      "comments": "Approved for Project Phoenix"
    }
  ],
  "provisioningHistory": [
    {
      "target": "Active Directory",
      "operation": "Add to group VPN-Users",
      "status": "Success",
      "date": "2024-02-15T14:36:22Z"
    }
  ],
  "completedDate": "2024-02-15T14:37:00Z",
  "finalStatus": "Completed",
  "totalDuration": "4 hours 7 minutes"
}
```

---

### Request Status Tracking

#### Status Values

**During lifecycle:**

| Status | Meaning | Typical Duration |
|--------|---------|------------------|
| Submitted | Request received, pending validation | Seconds |
| Validating | Automatic validation in progress | Seconds |
| Pending Approval | Awaiting approver decision | Hours to days |
| Approved | Approved, pending provisioning | Minutes |
| Provisioning | Executing provisioning plan | Minutes to hours |
| Completed | Successfully provisioned | N/A (final) |
| Partially Completed | Some items provisioned | N/A (final) |
| Failed | Provisioning failed | N/A (final) |
| Denied | Approver denied request | N/A (final) |
| Canceled | Canceled by requester/admin | N/A (final) |

#### Tracking Methods

**Method 1: My Requests page**
```
User Dashboard → My Requests
Shows all requests submitted by/for user
Filters: Status, Date range, Item type
Click request → Full details and history
```

**Method 2: Request ID search**
```
Search bar: "AR-2024-01234"
Direct access to request details
Works for any request user has visibility to
```

**Method 3: Email status updates**
```
Automatic emails at key milestones:
- Request submitted
- Request approved
- Request denied
- Request completed
- Provisioning failed
```

**Method 4: API query**
```bash
GET /v3/access-requests/{requestId}

Response includes:
- Current status
- Full approval history
- Provisioning status
- Timestamps for all events
```

---

### Common Request Types

#### Type 1: New Access (Most Common)
```
Scenario: User needs access they don't have
Example: Developer needs database access for new project
Request: "Database Developer Tools" access profile
Flow: Submit → Approve (manager) → Provision → Complete
Typical duration: 4-24 hours
```

#### Type 2: Temporary/Time-Bound Access
```
Scenario: User needs temporary access
Example: Contractor needs 90-day access
Request: "Contractor Network Access" role
Duration: 90 days specified
Flow: Submit → Approve → Provision → Auto-revoke after 90 days
Special: Automatic revocation scheduled
```

#### Type 3: Elevated/Privileged Access
```
Scenario: User needs elevated permissions
Example: Admin needs elevated AD rights
Request: "Domain Admin" role
Flow: Submit → Multi-level approval (manager + security) → Provision → Complete
Typical duration: 1-3 days (longer due to multiple approvals)
Special: Often requires additional justification
```

#### Type 4: Account Creation
```
Scenario: User needs account on new system
Example: New hire needs email account
Request: Create account in Office 365
Flow: Submit → Approve → Create account → Provision entitlements → Complete
Special: Account creation before entitlement provisioning
```

#### Type 5: Batch Request (Multiple Items)
```
Scenario: User needs multiple related items
Example: New project requires 5 different access profiles
Request: Shopping cart with 5 items
Flow: Submit → Approve (once for all) → Provision (all items) → Complete
Efficiency: Single approval for multiple items
```

---

### Exam Tips

**Key concepts tested:**
✅ Seven stages of access request lifecycle
✅ Request validation checks
✅ Approver types (MANAGER, OWNER, etc.)
✅ Provisioning plan components
✅ Request status values and meanings
✅ Difference between approval and provisioning
✅ Role of requestable flag

**Common exam scenarios:**
- Trace request through lifecycle stages
- Identify why request failed validation
- Determine who approves based on configuration
- Understand provisioning plan structure
- Interpret request status correctly
- Troubleshoot stuck requests

**Remember:**
- Validation happens BEFORE approval
- Approval ≠ Provisioning (separate stages)
- Multi-level approvals are sequential
- Provisioning plan created after final approval
- Request status indicates current stage
- All decisions permanently recorded
- Requestable flag must be true

---

### Key Takeaways

✅ **Seven lifecycle stages** - Submission → Validation → Approval → Decision → Plan Creation → Provisioning → Completion

✅ **Validation first** - Automatic checks before approval workflow starts

✅ **Multiple approver types** - MANAGER, OWNER, SOURCE_OWNER, GOVERNANCE_GROUP, WORKFLOW

✅ **Provisioning plan** - Blueprint created after approval, before execution

✅ **Separate approval and provisioning** - Approval grants permission; provisioning grants access

✅ **Complete audit trail** - Every action recorded with who, when, where, why

✅ **Status tracking** - Real-time visibility into request progress

✅ **Requestable flag required** - Items must be marked requestable = true

---

**Next Section:** 7.1.2 - Request Submission and Tracking - We'll cover detailed request submission procedures, tracking mechanisms, and user experience optimization.
