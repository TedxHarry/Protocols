# Section 6.4: Role Management

## 6.4.1: Automated Role Assignment Criteria

### Overview
Role assignment in SailPoint ISC can be automated using membership criteria that evaluate identity attributes, account attributes, or entitlements. This automation ensures roles are dynamically assigned and revoked based on real-time data, reducing manual administration and improving compliance.

**Three primary methods for role assignment:**
1. **STANDARD** - Criteria-based assignment using expressions
2. **IDENTITY_LIST** - Manual assignment to specific identities
3. **Legacy methods** - Older selection criteria (migrating to STANDARD/IDENTITY_LIST)

---

### Core Concepts

#### Assignment Type: STANDARD (Criteria-Based)
The STANDARD type uses Boolean logic to evaluate conditions against identity data. This is the most common and powerful assignment method.

**Key characteristics:**
- **Dynamic** - Automatically assigns/revokes based on changing data
- **Scalable** - Single criteria can affect thousands of identities
- **Auditable** - Clear, documented logic for role membership
- **Certification-ready** - Easy to review and validate assignments

**Supported operations:**
- `EQUALS` - Exact match (case-sensitive)
- `NOT_EQUALS` - Does not match
- `CONTAINS` - Substring match
- `STARTS_WITH` - Prefix match
- `ENDS_WITH` - Suffix match
- `AND` - All child criteria must be true
- `OR` - At least one child criterion must be true

---

### Criteria Structure

#### Three Criteria Types

**1. IDENTITY criteria** - Evaluates identity attributes
- Uses attributes from Identity Profile mappings
- Example: `department`, `location`, `employeeType`
- No source ID required (identity-level data)

**2. ACCOUNT criteria** - Evaluates account attributes
- Uses attributes from specific source accounts
- Example: Account status, account type, region
- **Requires source ID** to specify which system

**3. ENTITLEMENT criteria** - Checks for specific entitlements
- Evaluates if identity has particular access
- Example: AD group membership, application role
- **Requires source ID** to identify the entitlement source

---

### Criteria Expression Logic

#### Leaf Nodes (Individual Conditions)
Leaf nodes are the actual comparisons that evaluate to true or false.

**Required fields for leaf nodes:**
- `type` - IDENTITY, ACCOUNT, or ENTITLEMENT
- `key` - Attribute or entitlement name
- `operation` - EQUALS, NOT_EQUALS, CONTAINS, STARTS_WITH, ENDS_WITH
- `value` - String to compare against
- `sourceId` - Required for ACCOUNT and ENTITLEMENT types

**Leaf node example:**
```json
{
  "type": "IDENTITY",
  "key": "department",
  "operation": "EQUALS",
  "value": "Engineering"
}
```

#### Branch Nodes (Logical Operators)
Branch nodes combine multiple criteria using Boolean logic.

**AND operation:**
- ALL child criteria must evaluate to true
- Used for restrictive conditions
- Example: Department = Engineering AND location = Austin

**OR operation:**
- AT LEAST ONE child criterion must be true
- Used for inclusive conditions
- Example: Department = Finance OR department = Accounting

**Required fields for branch nodes:**
- `operation` - AND or OR
- `children` - Array of child criteria (leaf or branch nodes)

**Branch node example:**
```json
{
  "operation": "AND",
  "children": [
    {
      "type": "IDENTITY",
      "key": "department",
      "operation": "EQUALS",
      "value": "Finance"
    },
    {
      "type": "IDENTITY",
      "key": "location",
      "operation": "EQUALS",
      "value": "New York"
    }
  ]
}
```

---

### Criteria Hierarchy Rules

#### Maximum Depth: 3 Levels
SailPoint ISC supports a maximum of three levels of criteria nesting, including leaf nodes.

**Valid hierarchy patterns:**

**Level 1 only (Simple):**
```
Leaf node
```

**Level 2 (Single operator):**
```
AND/OR
├── Leaf
├── Leaf
└── Leaf
```

**Level 3 (Nested operators):**
```
OR
├── AND
│   ├── Leaf
│   └── Leaf
└── AND
    ├── Leaf
    └── Leaf
```

#### Alternating Operator Constraint
AND nodes can ONLY be children of OR nodes, and vice versa. You cannot nest AND under AND or OR under OR.

**❌ INVALID** (AND under AND):
```
AND
└── AND  ← NOT ALLOWED
    ├── Leaf
    └── Leaf
```

**✅ VALID** (AND under OR):
```
OR
└── AND  ← ALLOWED
    ├── Leaf
    └── Leaf
```

---

### Common Assignment Patterns

#### Pattern 1: Single Department
Assign role to all members of one department.
```json
{
  "type": "IDENTITY",
  "key": "department",
  "operation": "EQUALS",
  "value": "Sales"
}
```

**Business scenario:** Sales Representative role for all Sales department members.

---

#### Pattern 2: Multiple Departments (OR)
Assign role to members of ANY listed department.
```json
{
  "operation": "OR",
  "children": [
    {
      "type": "IDENTITY",
      "key": "department",
      "operation": "EQUALS",
      "value": "Finance"
    },
    {
      "type": "IDENTITY",
      "key": "department",
      "operation": "EQUALS",
      "value": "Accounting"
    }
  ]
}
```

**Business scenario:** Financial Systems Access role for Finance OR Accounting.

---

#### Pattern 3: Department AND Location (AND)
Assign role only when ALL conditions are met.
```json
{
  "operation": "AND",
  "children": [
    {
      "type": "IDENTITY",
      "key": "department",
      "operation": "EQUALS",
      "value": "Engineering"
    },
    {
      "type": "IDENTITY",
      "key": "location",
      "operation": "EQUALS",
      "value": "Austin"
    }
  ]
}
```

**Business scenario:** Austin Engineering Lab Access - only Engineering staff in Austin.

---

#### Pattern 4: Multiple Locations for Department (OR + AND)
Assign role to one department across multiple locations.
```json
{
  "operation": "AND",
  "children": [
    {
      "type": "IDENTITY",
      "key": "department",
      "operation": "EQUALS",
      "value": "Support"
    },
    {
      "operation": "OR",
      "children": [
        {
          "type": "IDENTITY",
          "key": "location",
          "operation": "EQUALS",
          "value": "Denver"
        },
        {
          "type": "IDENTITY",
          "key": "location",
          "operation": "EQUALS",
          "value": "Phoenix"
        }
      ]
    }
  ]
}
```

**Business scenario:** Regional Support role for Support staff in Denver OR Phoenix.

---

#### Pattern 5: Employee Type Exclusion (NOT_EQUALS)
Assign role to everyone EXCEPT a specific employee type.
```json
{
  "type": "IDENTITY",
  "key": "employeeType",
  "operation": "NOT_EQUALS",
  "value": "Contractor"
}
```

**Business scenario:** Internal Systems Access - all employees except contractors.

---

#### Pattern 6: Partial String Match (CONTAINS)
Assign role based on substring within an attribute.
```json
{
  "type": "IDENTITY",
  "key": "title",
  "operation": "CONTAINS",
  "value": "Manager"
}
```

**Business scenario:** Manager Portal Access for anyone with "Manager" in their title.

---

#### Pattern 7: Account Attribute Check
Assign role based on attribute from a specific source account.
```json
{
  "type": "ACCOUNT",
  "key": "accountType",
  "operation": "EQUALS",
  "value": "privileged",
  "sourceId": "2c91808a7624751a01762f19d665344d"
}
```

**Business scenario:** Privileged Access Monitor role for users with privileged account type in AD.

---

#### Pattern 8: Entitlement-Based Assignment
Assign role to identities who already have a specific entitlement.
```json
{
  "type": "ENTITLEMENT",
  "key": "CN=VPN-Users,OU=Groups,DC=corp,DC=acme,DC=com",
  "operation": "EQUALS",
  "value": "true",
  "sourceId": "2c91808a7624751a01762f19d665344d"
}
```

**Business scenario:** Remote Worker role for anyone in the VPN-Users AD group.

---

### Assignment Type: IDENTITY_LIST

#### Manual Identity Assignment
The IDENTITY_LIST type explicitly specifies which identities should receive the role.

**Characteristics:**
- **Static** - No automatic assignment/revocation
- **Manual maintenance** - Requires updating identity list
- **Use cases:**
  - Small, stable user groups
  - Executive or special access roles
  - Temporary project teams
  - Exception-based assignments

**Configuration:**
Instead of criteria expressions, you provide an array of identity IDs:
```json
{
  "type": "IDENTITY_LIST",
  "identities": [
    "2c91808a7624751a01762f19d665344d",
    "2c91808a7624751a01762f19d665355e",
    "2c91808a7624751a01762f19d665366f"
  ]
}
```

**When to use IDENTITY_LIST:**
- Executive roles (CEO, CFO, CISO)
- Board member access
- Special project teams
- Testing/pilot groups
- Roles with < 10 members

**When NOT to use IDENTITY_LIST:**
- Large user populations (> 20 identities)
- Roles based on job function or department
- Frequently changing membership
- Roles that scale with organization growth

---

### Best Practices for Criteria Design

#### 1. Start Simple, Add Complexity
Begin with single conditions and test before adding nested logic.

**Example progression:**
1. Test: `department = Engineering`
2. Validate results
3. Add: `AND location = Austin`
4. Validate refined results

#### 2. Use Identity Attributes When Possible
Identity attributes are easier to maintain and audit than account/entitlement criteria.

**Preferred:**
```json
{
  "type": "IDENTITY",
  "key": "department",
  "operation": "EQUALS",
  "value": "Finance"
}
```

**Less preferred (unless necessary):**
```json
{
  "type": "ACCOUNT",
  "key": "departmentCode",
  "operation": "EQUALS",
  "value": "FIN",
  "sourceId": "2c918..."
}
```

#### 3. Document Business Logic
Include clear descriptions in role definitions explaining the membership criteria.

**Good role description:**
"Assigned to all Finance department employees in New York and London offices. Provides access to financial reporting systems and shared drives."

#### 4. Test Before Production
Always test role criteria in non-production environment:
- Validate criteria matches expected identities
- Check for unintended inclusions/exclusions
- Verify automatic assignment/revocation behavior
- Test edge cases (null values, missing attributes)

#### 5. Monitor Assignment Changes
Track role assignment changes to catch:
- Unexpected mass assignments
- Criteria matching more/fewer identities than expected
- Data quality issues causing incorrect assignments

#### 6. Avoid Over-Nesting
Use the minimum nesting depth required:
- Simpler criteria = easier troubleshooting
- Fewer levels = better performance
- Less complexity = easier auditing

**Over-nested:**
```json
{
  "operation": "OR",
  "children": [
    {
      "operation": "AND",
      "children": [
        {"type": "IDENTITY", "key": "dept", "operation": "EQUALS", "value": "Sales"},
        {"type": "IDENTITY", "key": "region", "operation": "EQUALS", "value": "West"}
      ]
    },
    {
      "operation": "AND",
      "children": [
        {"type": "IDENTITY", "key": "dept", "operation": "EQUALS", "value": "Sales"},
        {"type": "IDENTITY", "key": "region", "operation": "EQUALS", "value": "East"}
      ]
    }
  ]
}
```

**Better:**
```json
{
  "operation": "AND",
  "children": [
    {"type": "IDENTITY", "key": "department", "operation": "EQUALS", "value": "Sales"},
    {
      "operation": "OR",
      "children": [
        {"type": "IDENTITY", "key": "region", "operation": "EQUALS", "value": "West"},
        {"type": "IDENTITY", "key": "region", "operation": "EQUALS", "value": "East"}
      ]
    }
  ]
}
```

---

### Common Pitfalls and Solutions

#### Pitfall 1: Case Sensitivity
EQUALS operation is case-sensitive.

**Problem:**
```json
{
  "type": "IDENTITY",
  "key": "department",
  "operation": "EQUALS",
  "value": "engineering"  ← Won't match "Engineering"
}
```

**Solutions:**
- Standardize data in Identity Profile transforms (use `lower` or `upper`)
- Use CONTAINS operation if case varies
- Document required case formatting

#### Pitfall 2: Missing Source IDs
ACCOUNT and ENTITLEMENT criteria require valid source IDs.

**Problem:**
```json
{
  "type": "ACCOUNT",
  "key": "accountStatus",
  "operation": "EQUALS",
  "value": "active"
  ← Missing sourceId field!
}
```

**Solution:**
Always include sourceId for ACCOUNT/ENTITLEMENT criteria:
```json
{
  "type": "ACCOUNT",
  "key": "accountStatus",
  "operation": "EQUALS",
  "value": "active",
  "sourceId": "2c91808a7624751a01762f19d665344d"
}
```

#### Pitfall 3: Null or Missing Attributes
Identities with null/missing attributes won't match EQUALS criteria.

**Problem scenario:**
- Criteria: `location = Austin`
- 10% of identities have null `location` attribute
- Those 10% won't get the role even if they should

**Solutions:**
- Fix data quality at source
- Use transforms to provide default values
- Create separate criteria for null handling
- Document known data quality issues

#### Pitfall 4: Invalid Nesting
Violating the alternating operator constraint causes errors.

**Invalid:**
```json
{
  "operation": "AND",
  "children": [
    {
      "operation": "AND",  ← Cannot nest AND under AND
      "children": [...]
    }
  ]
}
```

**Valid:**
```json
{
  "operation": "OR",
  "children": [
    {
      "operation": "AND",  ← Can nest AND under OR
      "children": [...]
    }
  ]
}
```

#### Pitfall 5: Too Many Conditions
Overly complex criteria are hard to maintain and troubleshoot.

**Problem:**
Role has 15 different OR conditions checking various departments, locations, and titles.

**Solutions:**
- Split into multiple roles with simpler criteria
- Consolidate using CONTAINS or STARTS_WITH where appropriate
- Re-evaluate if data model needs improvement
- Consider creating parent/child role relationships

---

### Performance Considerations

#### Criteria Evaluation Timing
Role membership criteria are evaluated:
- During identity refresh (aggregation)
- When identity attributes change
- During manual role assignment operations
- During certification campaigns

#### Optimization Tips

**1. Minimize ACCOUNT/ENTITLEMENT criteria**
- Identity criteria evaluate faster
- Account/Entitlement criteria require additional source lookups

**2. Use appropriate operations**
- `EQUALS` is fastest (direct comparison)
- `CONTAINS`/`STARTS_WITH`/`ENDS_WITH` are slower (pattern matching)

**3. Order matters in nested criteria**
- More selective conditions first
- Example: Check department before title (fewer departments than titles)

**4. Avoid redundant criteria**
```json
{
  "operation": "AND",
  "children": [
    {"type": "IDENTITY", "key": "dept", "operation": "EQUALS", "value": "Sales"},
    {"type": "IDENTITY", "key": "dept", "operation": "NOT_EQUALS", "value": "Engineering"}  ← Redundant
  ]
}
```

---

### Exam Tips

**Key concepts tested:**
✅ Understanding of STANDARD vs IDENTITY_LIST assignment types
✅ Knowledge of supported operations (EQUALS, CONTAINS, etc.)
✅ Maximum nesting depth (3 levels including leaf nodes)
✅ Alternating operator constraint (AND/OR alternation)
✅ Difference between IDENTITY, ACCOUNT, and ENTITLEMENT criteria types
✅ When sourceId is required (ACCOUNT and ENTITLEMENT)
✅ Common use cases for each pattern

**Common exam scenarios:**
- Given business requirement, design correct criteria
- Identify invalid criteria structures
- Troubleshoot why role isn't assigning correctly
- Choose between STANDARD and IDENTITY_LIST for given scenario
- Fix criteria syntax errors
- Calculate how many identities match given criteria

**Quick reference for exam:**

| Criteria Type | Requires sourceId? | Evaluates Against |
|---------------|-------------------|-------------------|
| IDENTITY | No | Identity Profile attributes |
| ACCOUNT | Yes | Account attributes from specific source |
| ENTITLEMENT | Yes | Entitlements from specific source |

| Operation | Description | Use Case |
|-----------|-------------|----------|
| EQUALS | Exact match (case-sensitive) | Specific values |
| NOT_EQUALS | Does not match | Exclusions |
| CONTAINS | Substring match | Partial matches |
| STARTS_WITH | Prefix match | Code patterns |
| ENDS_WITH | Suffix match | Domain/extension |
| AND | All must be true | Restrictive |
| OR | At least one true | Inclusive |

**Remember:**
- Max 3 levels of nesting
- AND/OR must alternate
- IDENTITY_LIST for < 20 static members
- STANDARD for dynamic, scalable assignment
- Test criteria before production
- Document business logic clearly

---

### Practice Exercise 1: Design Simple Criteria

**Scenario:**
Create role assignment criteria for "HR Specialist" role that should be assigned to:
- All employees in the HR department

**Your task:** Design the criteria JSON.

<details>
<summary>Click for answer</summary>
```json
{
  "type": "IDENTITY",
  "key": "department",
  "operation": "EQUALS",
  "value": "HR"
}
```

**Explanation:**
- Single condition = leaf node only (Level 1)
- Uses IDENTITY type (identity attribute)
- EQUALS operation for exact department match
- No sourceId needed for IDENTITY criteria
</details>

---

### Practice Exercise 2: Design OR Criteria

**Scenario:**
Create role assignment criteria for "Executive Assistant" role that should be assigned to:
- Employees with title "Executive Assistant" OR
- Employees with title "Senior Executive Assistant"

**Your task:** Design the criteria JSON.

<details>
<summary>Click for answer</summary>
```json
{
  "operation": "OR",
  "children": [
    {
      "type": "IDENTITY",
      "key": "title",
      "operation": "EQUALS",
      "value": "Executive Assistant"
    },
    {
      "type": "IDENTITY",
      "key": "title",
      "operation": "EQUALS",
      "value": "Senior Executive Assistant"
    }
  ]
}
```

**Explanation:**
- OR operation = at least one condition must match
- Two leaf nodes as children
- Both check same attribute (title) with different values
- Level 2 structure (OR with leaf children)
</details>

---

### Practice Exercise 3: Design AND Criteria

**Scenario:**
Create role assignment criteria for "Austin Engineering" role that should be assigned to:
- Employees in Engineering department AND
- Located in Austin office

**Your task:** Design the criteria JSON.

<details>
<summary>Click for answer</summary>
```json
{
  "operation": "AND",
  "children": [
    {
      "type": "IDENTITY",
      "key": "department",
      "operation": "EQUALS",
      "value": "Engineering"
    },
    {
      "type": "IDENTITY",
      "key": "location",
      "operation": "EQUALS",
      "value": "Austin"
    }
  ]
}
```

**Explanation:**
- AND operation = both conditions must be true
- Two different identity attributes checked
- More restrictive than OR (fewer matches)
- Level 2 structure (AND with leaf children)
</details>

---

### Practice Exercise 4: Design Nested Criteria

**Scenario:**
Create role assignment criteria for "Financial Analyst" role that should be assigned to:
- Employees in Finance department in New York office OR
- Employees in Accounting department in London office

**Your task:** Design the criteria JSON.

<details>
<summary>Click for answer</summary>
```json
{
  "operation": "OR",
  "children": [
    {
      "operation": "AND",
      "children": [
        {
          "type": "IDENTITY",
          "key": "department",
          "operation": "EQUALS",
          "value": "Finance"
        },
        {
          "type": "IDENTITY",
          "key": "location",
          "operation": "EQUALS",
          "value": "New York"
        }
      ]
    },
    {
      "operation": "AND",
      "children": [
        {
          "type": "IDENTITY",
          "key": "department",
          "operation": "EQUALS",
          "value": "Accounting"
        },
        {
          "type": "IDENTITY",
          "key": "location",
          "operation": "EQUALS",
          "value": "London"
        }
      ]
    }
  ]
}
```

**Explanation:**
- Level 3 structure (OR → AND → leaf)
- Top-level OR: Either combination works
- Two AND nodes checking department + location
- Follows alternating operator rule (OR → AND)
- Common pattern for role across multiple locations
</details>

---

### Practice Exercise 5: Identify Invalid Criteria

**Scenario:**
Review this criteria and identify what's wrong:
```json
{
  "operation": "AND",
  "children": [
    {
      "operation": "AND",
      "children": [
        {
          "type": "IDENTITY",
          "key": "department",
          "operation": "EQUALS",
          "value": "Sales"
        },
        {
          "type": "IDENTITY",
          "key": "region",
          "operation": "EQUALS",
          "value": "West"
        }
      ]
    },
    {
      "type": "IDENTITY",
      "key": "employeeType",
      "operation": "EQUALS",
      "value": "Full-time"
    }
  ]
}
```

**Your task:** Identify the error and provide the corrected version.

<details>
<summary>Click for answer</summary>

**Error identified:**
Violates the alternating operator constraint - AND nested under AND is not allowed.

**Corrected version:**
```json
{
  "operation": "AND",
  "children": [
    {
      "type": "IDENTITY",
      "key": "department",
      "operation": "EQUALS",
      "value": "Sales"
    },
    {
      "type": "IDENTITY",
      "key": "region",
      "operation": "EQUALS",
      "value": "West"
    },
    {
      "type": "IDENTITY",
      "key": "employeeType",
      "operation": "EQUALS",
      "value": "Full-time"
    }
  ]
}
```

**Explanation:**
- Flattened the structure - no need for nested AND
- All conditions at same level under single AND
- Level 2 structure (simpler and valid)
- Achieves same result without violating constraints
</details>

---

### Practice Exercise 6: Account Attribute Criteria

**Scenario:**
Create role assignment criteria for "Active Directory Privileged Users" role that should be assigned to:
- Users who have an account in Active Directory (sourceId: "2c91808a7624751a01762f19d665344d")
- Where the account attribute "accountType" equals "privileged"

**Your task:** Design the criteria JSON.

<details>
<summary>Click for answer</summary>
```json
{
  "type": "ACCOUNT",
  "key": "accountType",
  "operation": "EQUALS",
  "value": "privileged",
  "sourceId": "2c91808a7624751a01762f19d665344d"
}
```

**Explanation:**
- Uses ACCOUNT type (account attribute check)
- **Must include sourceId** for ACCOUNT criteria
- Checks attribute on accounts from specific source
- Single condition = leaf node only
- Common pattern for privileged access monitoring
</details>

---

### Practice Exercise 7: Choose Assignment Type

**Scenario A:**
You need to assign a "Regional Manager" role to 850 employees across the organization based on their job title.

**Scenario B:**
You need to assign a "Board of Directors" role to 7 specific executives.

**Your task:** For each scenario, choose STANDARD or IDENTITY_LIST and explain why.

<details>
<summary>Click for answer</summary>

**Scenario A: STANDARD**

**Reason:**
- Large user population (850 identities)
- Clear, consistent assignment criteria (job title)
- Dynamic - new managers should auto-receive role
- Scalable as organization grows
- Easy to audit (criteria documents business rule)

**Example criteria:**
```json
{
  "type": "IDENTITY",
  "key": "title",
  "operation": "CONTAINS",
  "value": "Regional Manager"
}
```

**Scenario B: IDENTITY_LIST**

**Reason:**
- Small, specific user group (7 identities)
- No consistent attribute pattern
- Static membership (rarely changes)
- Manual control appropriate for executive access
- Simple maintenance for small list

**Example configuration:**
```json
{
  "type": "IDENTITY_LIST",
  "identities": [
    "2c91808a7624751a01762f19d665344d",
    "2c91808a7624751a01762f19d665355e",
    "2c91808a7624751a01762f19d665366f",
    "2c91808a7624751a01762f19d665377g",
    "2c91808a7624751a01762f19d665388h",
    "2c91808a7624751a01762f19d665399i",
    "2c91808a7624751a01762f19d6653aaj"
  ]
}
```

**Key principle:**
- STANDARD for scalable, rule-based assignment
- IDENTITY_LIST for small, specific, static groups
</details>

---

### Review Questions

Test your understanding before moving to the next section:

1. What are the three types of criteria you can use in STANDARD role assignment?
2. What is the maximum nesting depth for role membership criteria?
3. Which operations require a sourceId field?
4. What's the alternating operator constraint?
5. When should you use IDENTITY_LIST instead of STANDARD?
6. What's the difference between EQUALS and CONTAINS operations?
7. How many identities can one role typically have in ISC? (soft limit)
8. What happens when an identity's attributes change and they no longer match role criteria?

<details>
<summary>Click for answers</summary>

1. **IDENTITY** (identity attributes), **ACCOUNT** (account attributes), **ENTITLEMENT** (entitlements from sources)

2. **3 levels** including leaf nodes

3. **ACCOUNT** and **ENTITLEMENT** criteria require sourceId

4. **AND nodes can only be children of OR nodes and vice versa** - you cannot nest the same operator type under itself

5. Use IDENTITY_LIST for:
   - Small groups (< 20 identities)
   - Static membership
   - No consistent assignment pattern
   - Executive/special access roles

6. **EQUALS**: Exact, case-sensitive match of entire value
   **CONTAINS**: Checks if value exists as substring anywhere in attribute

7. **800 roles** per org (soft limit - can request increase via support)

8. The role is **automatically revoked** during the next identity refresh/aggregation

</details>

---

### Key Takeaways

✅ **STANDARD assignment** uses criteria expressions for dynamic, scalable role assignment

✅ **Three criteria types**: IDENTITY (identity attributes), ACCOUNT (account attributes), ENTITLEMENT (entitlements)

✅ **Criteria structure**: Leaf nodes (comparisons) + Branch nodes (AND/OR logic)

✅ **Operations**: EQUALS, NOT_EQUALS, CONTAINS, STARTS_WITH, ENDS_WITH, AND, OR

✅ **Constraints**: Max 3 levels, alternating AND/OR, sourceId required for ACCOUNT/ENTITLEMENT

✅ **IDENTITY_LIST** for small (< 20), static groups with manual control

✅ **Best practices**: Start simple, prefer IDENTITY criteria, test before production, document logic

✅ **Common pitfalls**: Case sensitivity, missing sourceIds, null attributes, invalid nesting

---

**Next Section:** 6.4.2 - Role Membership Rules - We'll cover how to create, test, and validate role membership rules in the ISC UI, troubleshoot assignment issues, and manage role membership at scale.
