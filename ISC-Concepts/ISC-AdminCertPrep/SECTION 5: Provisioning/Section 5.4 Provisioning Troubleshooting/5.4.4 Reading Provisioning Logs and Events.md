# 5.4.4 Reading Provisioning Logs and Events

**Learning Objective:** Learn how to read and interpret provisioning logs and events to understand what happened during provisioning operations.

---

## Understanding Log Anatomy

### **Log Entry Structure**

**Standard Log Format:**
```
[Timestamp] [Level] [Component] Message

Example:
2024-02-14 10:30:15 DEBUG [AD-Connector] Creating user: john.smith
```

**Components:**
```
Timestamp: 2024-02-14 10:30:15
  - Date and time of event
  - Format: YYYY-MM-DD HH:MM:SS
  - Timezone: Usually UTC or local VA time

Level: DEBUG
  - Log level (ERROR, WARN, INFO, DEBUG, TRACE)
  - Indicates severity/verbosity

Component: [AD-Connector]
  - Which connector or service
  - Examples: AD-Connector, SF-Connector, VA-Service

Message: Creating user: john.smith
  - Actual log message
  - Describes what's happening
```

**Exam Tip:** Log entries have timestamp, level, component, and message. Read them in sequence to understand operation flow.

---

## Reading Successful Provisioning Flow

### **Complete Account Creation - Active Directory**

**Full Log Sequence (DEBUG Level):**
```
2024-02-14 10:30:15 INFO [AD-Connector] Starting account creation for: john.smith
2024-02-14 10:30:15 DEBUG [AD-Connector] Identity: John Smith (EMP12345)
2024-02-14 10:30:15 DEBUG [AD-Connector] Operation: Create Account
2024-02-14 10:30:15 DEBUG [AD-Connector] Source: Active Directory

2024-02-14 10:30:15 DEBUG [AD-Connector] Input parameters:
2024-02-14 10:30:15 DEBUG [AD-Connector]   username: john.smith
2024-02-14 10:30:15 DEBUG [AD-Connector]   firstName: John
2024-02-14 10:30:15 DEBUG [AD-Connector]   lastName: Smith
2024-02-14 10:30:15 DEBUG [AD-Connector]   email: john.smith@company.com
2024-02-14 10:30:15 DEBUG [AD-Connector]   department: Sales
2024-02-14 10:30:15 DEBUG [AD-Connector]   manager: Jane Doe (EMP99999)

2024-02-14 10:30:15 DEBUG [AD-Connector] Connecting to domain controller
2024-02-14 10:30:15 DEBUG [AD-Connector] Target DC: dc01.company.com:636
2024-02-14 10:30:15 DEBUG [AD-Connector] Protocol: LDAPS (secure)
2024-02-14 10:30:15 DEBUG [AD-Connector] Bind DN: CN=svc_sailpoint,OU=Service,DC=company,DC=com

2024-02-14 10:30:15 DEBUG [AD-Connector] LDAP bind operation initiated
2024-02-14 10:30:15 DEBUG [AD-Connector] Bind successful (resultCode=0)
2024-02-14 10:30:15 INFO [AD-Connector] LDAP connection established

2024-02-14 10:30:16 DEBUG [AD-Connector] Determining target OU
2024-02-14 10:30:16 DEBUG [AD-Connector] Department: Sales
2024-02-14 10:30:16 DEBUG [AD-Connector] Applying OU placement rule
2024-02-14 10:30:16 DEBUG [AD-Connector] Mapped to: OU=Sales,OU=Users,DC=company,DC=com
2024-02-14 10:30:16 DEBUG [AD-Connector] Target OU verified in AD

2024-02-14 10:30:16 DEBUG [AD-Connector] Looking up manager DN
2024-02-14 10:30:16 DEBUG [AD-Connector] Manager identity: Jane Doe (EMP99999)
2024-02-14 10:30:16 DEBUG [AD-Connector] Manager AD account: jane.doe
2024-02-14 10:30:16 DEBUG [AD-Connector] Manager DN: CN=jane.doe,OU=Sales,OU=Users,DC=company,DC=com

2024-02-14 10:30:16 DEBUG [AD-Connector] Building PowerShell command
2024-02-14 10:30:16 DEBUG [AD-Connector] Command: New-ADUser -Name "john.smith" -GivenName "John" -Surname "Smith" -SamAccountName "john.smith" -UserPrincipalName "john.smith@company.com" -DisplayName "John Smith" -EmailAddress "john.smith@company.com" -Department "Sales" -Manager "CN=jane.doe,OU=Sales,OU=Users,DC=company,DC=com" -Path "OU=Sales,OU=Users,DC=company,DC=com" -AccountPassword (ConvertTo-SecureString "TempPass123!" -AsPlainText -Force) -ChangePasswordAtLogon $true -Enabled $true

2024-02-14 10:30:16 DEBUG [AD-Connector] Executing PowerShell command
2024-02-14 10:30:17 DEBUG [AD-Connector] PowerShell execution completed
2024-02-14 10:30:17 DEBUG [AD-Connector] Exit code: 0 (success)
2024-02-14 10:30:17 DEBUG [AD-Connector] PowerShell output: (none)

2024-02-14 10:30:17 DEBUG [AD-Connector] Verifying account creation
2024-02-14 10:30:17 DEBUG [AD-Connector] LDAP search for: sAMAccountName=john.smith
2024-02-14 10:30:17 DEBUG [AD-Connector] Account found: CN=john.smith,OU=Sales,OU=Users,DC=company,DC=com
2024-02-14 10:30:17 INFO [AD-Connector] Account created successfully: john.smith

2024-02-14 10:30:17 DEBUG [AD-Connector] Adding to default groups
2024-02-14 10:30:17 DEBUG [AD-Connector] Group 1: Domain Users (automatic)
2024-02-14 10:30:17 DEBUG [AD-Connector] Group 2: All-Employees

2024-02-14 10:30:17 DEBUG [AD-Connector] Adding to group: All-Employees
2024-02-14 10:30:17 DEBUG [AD-Connector] Group DN: CN=All-Employees,OU=Groups,DC=company,DC=com
2024-02-14 10:30:17 DEBUG [AD-Connector] Command: Add-ADGroupMember -Identity "All-Employees" -Members "john.smith"
2024-02-14 10:30:18 DEBUG [AD-Connector] Group membership added successfully

2024-02-14 10:30:18 DEBUG [AD-Connector] Adding to group: VPN-Users
2024-02-14 10:30:18 DEBUG [AD-Connector] Group DN: CN=VPN-Users,OU=Groups,DC=company,DC=com
2024-02-14 10:30:18 DEBUG [AD-Connector] Command: Add-ADGroupMember -Identity "VPN-Users" -Members "john.smith"
2024-02-14 10:30:18 DEBUG [AD-Connector] Group membership added successfully

2024-02-14 10:30:18 INFO [AD-Connector] Provisioning completed successfully
2024-02-14 10:30:18 INFO [AD-Connector] Account: john.smith
2024-02-14 10:30:18 INFO [AD-Connector] DN: CN=john.smith,OU=Sales,OU=Users,DC=company,DC=com
2024-02-14 10:30:18 INFO [AD-Connector] Groups: All-Employees, VPN-Users
2024-02-14 10:30:18 INFO [AD-Connector] Duration: 3 seconds
```

**How to Read This:**

**Phase 1: Initialization (10:30:15)**
```
What's happening:
  ✓ Starting account creation
  ✓ Gathering input parameters
  ✓ All required data present

Key indicators:
  INFO "Starting account creation" - Operation begins
  DEBUG shows all input parameters - Verify data complete
```

**Phase 2: Connection (10:30:15)**
```
What's happening:
  ✓ Connecting to domain controller
  ✓ LDAP bind successful
  ✓ Authenticated

Key indicators:
  DEBUG "Connecting to domain controller" - Starting connection
  DEBUG "Bind successful (resultCode=0)" - Authentication OK
  INFO "LDAP connection established" - Ready to proceed
```

**Phase 3: Preparation (10:30:16)**
```
What's happening:
  ✓ Determining target OU (based on department)
  ✓ Looking up manager DN
  ✓ Building PowerShell command

Key indicators:
  DEBUG "Determining target OU" - Figuring out where to create
  DEBUG "Mapped to: OU=Sales..." - OU determined
  DEBUG "Manager DN: CN=jane.doe..." - Manager found
  DEBUG "Building PowerShell command" - Preparing to execute
```

**Phase 4: Execution (10:30:16-10:30:17)**
```
What's happening:
  ✓ Executing PowerShell New-ADUser command
  ✓ Command completed successfully
  ✓ Account created

Key indicators:
  DEBUG "Executing PowerShell command" - Running command
  DEBUG "Exit code: 0 (success)" - Command succeeded
  INFO "Account created successfully" - Confirmation
```

**Phase 5: Verification (10:30:17)**
```
What's happening:
  ✓ Searching AD for new account
  ✓ Confirming account exists
  ✓ Validated creation

Key indicators:
  DEBUG "LDAP search for: sAMAccountName=john.smith" - Looking for account
  DEBUG "Account found: CN=john.smith..." - Account exists
```

**Phase 6: Group Assignments (10:30:17-10:30:18)**
```
What's happening:
  ✓ Adding to All-Employees group
  ✓ Adding to VPN-Users group
  ✓ Group memberships added

Key indicators:
  DEBUG "Adding to group: All-Employees" - Adding groups
  DEBUG "Group membership added successfully" - Each group added
```

**Phase 7: Completion (10:30:18)**
```
What's happening:
  ✓ All operations complete
  ✓ Success summary
  ✓ Duration recorded

Key indicators:
  INFO "Provisioning completed successfully" - Final success
  INFO shows account name, DN, groups
  INFO "Duration: 3 seconds" - Performance metric
```

---

## Reading Failed Provisioning Flow

### **Failed Account Creation - Duplicate Account**

**Log Sequence with Failure:**
```
2024-02-14 11:15:20 INFO [AD-Connector] Starting account creation for: jane.doe
2024-02-14 11:15:20 DEBUG [AD-Connector] Identity: Jane Doe (EMP12346)
2024-02-14 11:15:20 DEBUG [AD-Connector] Operation: Create Account

2024-02-14 11:15:20 DEBUG [AD-Connector] Input parameters:
2024-02-14 11:15:20 DEBUG [AD-Connector]   username: jane.doe
2024-02-14 11:15:20 DEBUG [AD-Connector]   firstName: Jane
2024-02-14 11:15:20 DEBUG [AD-Connector]   lastName: Doe
2024-02-14 11:15:20 DEBUG [AD-Connector]   department: Sales

2024-02-14 11:15:20 DEBUG [AD-Connector] Connecting to domain controller
2024-02-14 11:15:20 DEBUG [AD-Connector] Target DC: dc01.company.com:636
2024-02-14 11:15:20 DEBUG [AD-Connector] Bind successful

2024-02-14 11:15:21 DEBUG [AD-Connector] Determining target OU
2024-02-14 11:15:21 DEBUG [AD-Connector] Department: Sales
2024-02-14 11:15:21 DEBUG [AD-Connector] Target OU: OU=Sales,OU=Users,DC=company,DC=com

2024-02-14 11:15:21 DEBUG [AD-Connector] Building PowerShell command
2024-02-14 11:15:21 DEBUG [AD-Connector] Command: New-ADUser -Name "jane.doe" -GivenName "Jane" -Surname "Doe" -SamAccountName "jane.doe" -Path "OU=Sales,OU=Users,DC=company,DC=com" -Enabled $true

2024-02-14 11:15:21 DEBUG [AD-Connector] Executing PowerShell command
2024-02-14 11:15:22 ERROR [AD-Connector] PowerShell execution failed
2024-02-14 11:15:22 ERROR [AD-Connector] Exit code: 1 (failure)
2024-02-14 11:15:22 ERROR [AD-Connector] Error output: New-ADUser : The specified account already exists
2024-02-14 11:15:22 ERROR [AD-Connector] LDAP Error 68: ENTRY_ALREADY_EXISTS
2024-02-14 11:15:22 ERROR [AD-Connector] Attempted DN: CN=jane.doe,OU=Sales,OU=Users,DC=company,DC=com

2024-02-14 11:15:22 DEBUG [AD-Connector] Checking for existing account
2024-02-14 11:15:22 DEBUG [AD-Connector] LDAP search for: sAMAccountName=jane.doe
2024-02-14 11:15:22 DEBUG [AD-Connector] Existing account found:
2024-02-14 11:15:22 DEBUG [AD-Connector]   DN: CN=jane.doe,OU=Sales,OU=Users,DC=company,DC=com
2024-02-14 11:15:22 DEBUG [AD-Connector]   Created: 2024-01-15 08:22:33
2024-02-14 11:15:22 DEBUG [AD-Connector]   Status: Enabled

2024-02-14 11:15:22 ERROR [AD-Connector] Account creation failed: Account already exists
2024-02-14 11:15:22 INFO [AD-Connector] Provisioning failed for: jane.doe
2024-02-14 11:15:22 INFO [AD-Connector] Duration: 2 seconds
```

**How to Read This Failure:**

**Success Path (11:15:20-11:15:21)**
```
Everything normal until execution:
  ✓ Connection successful
  ✓ OU determined
  ✓ Command built
  ✓ Ready to execute
```

**Failure Point (11:15:21-11:15:22)**
```
ERROR indicators:
  ERROR "PowerShell execution failed" - Command failed
  ERROR "Exit code: 1 (failure)" - Non-zero exit code
  ERROR "Error output: ... account already exists" - Specific error
  ERROR "LDAP Error 68: ENTRY_ALREADY_EXISTS" - Error code
  
What this tells you:
  ✗ Account creation attempted
  ✗ Account already exists in AD
  ✗ Duplicate account issue
```

**Additional Investigation (11:15:22)**
```
DEBUG "Checking for existing account" - Connector investigating
DEBUG "Existing account found" - Confirms account exists
DEBUG "Created: 2024-01-15" - Shows when it was created
  
Conclusion:
  - Account jane.doe exists since 2024-01-15
  - This is likely correlation issue
  - Need to link existing account to identity
```

**Final Result (11:15:22)**
```
ERROR "Account creation failed: Account already exists" - Summary
INFO "Provisioning failed for: jane.doe" - Final status
INFO "Duration: 2 seconds" - Quick failure (didn't take long)
```

---

## Reading Different Failure Scenarios

### **Scenario 1: Permission Failure**
```
2024-02-14 14:15:31 INFO [AD-Connector] Starting account creation for: alice.johnson
2024-02-14 14:15:31 DEBUG [AD-Connector] Target OU: OU=Engineering,OU=Users,DC=company,DC=com
2024-02-14 14:15:32 DEBUG [AD-Connector] Executing: New-ADUser...
2024-02-14 14:15:33 ERROR [AD-Connector] PowerShell execution failed
2024-02-14 14:15:33 ERROR [AD-Connector] Error: Insufficient access rights to perform the operation
2024-02-14 14:15:33 ERROR [AD-Connector] LDAP Error 50: INSUFFICIENT_ACCESS_RIGHTS
2024-02-14 14:15:33 ERROR [AD-Connector] Failed OU: OU=Engineering,OU=Users,DC=company,DC=com
2024-02-14 14:15:33 ERROR [AD-Connector] Service Account: svc_sailpoint
2024-02-14 14:15:33 ERROR [AD-Connector] Account creation failed: Insufficient permissions
```

**What to look for:**
```
Key indicators of permission issue:
  ✓ "Insufficient access rights" message
  ✓ LDAP Error 50
  ✓ Shows which OU failed
  ✓ Shows which service account

Diagnosis:
  Service account svc_sailpoint lacks create permissions on OU=Engineering
  
Fix:
  Grant create permissions to svc_sailpoint on Engineering OU
```

---

### **Scenario 2: Missing Required Attribute**
```
2024-02-14 11:30:10 INFO [AD-Connector] Starting account creation for: bob.wilson
2024-02-14 11:30:11 DEBUG [AD-Connector] Input parameters:
2024-02-14 11:30:11 DEBUG [AD-Connector]   username: bob.wilson
2024-02-14 11:30:11 DEBUG [AD-Connector]   firstName: Bob
2024-02-14 11:30:11 DEBUG [AD-Connector]   lastName: null
2024-02-14 11:30:11 DEBUG [AD-Connector]   department: IT
2024-02-14 11:30:11 ERROR [AD-Connector] Missing required attribute: lastName
2024-02-14 11:30:11 ERROR [AD-Connector] Cannot create account without surname
2024-02-14 11:30:12 ERROR [AD-Connector] Account creation failed: Missing required attribute
```

**What to look for:**
```
Key indicators of missing attribute:
  ✓ DEBUG shows "lastName: null"
  ✓ ERROR "Missing required attribute: lastName"
  ✓ Failed before PowerShell execution (data validation)

Diagnosis:
  Identity in ISC missing lastName attribute
  
Fix:
  Populate lastName in source system or ISC
```

---

### **Scenario 3: Invalid OU Path**
```
2024-02-14 15:45:16 INFO [AD-Connector] Starting account creation for: mike.davis
2024-02-14 15:45:16 DEBUG [AD-Connector] Department: Sales
2024-02-14 15:45:16 DEBUG [AD-Connector] Applying OU placement rule
2024-02-14 15:45:16 DEBUG [AD-Connector] Target OU: OU=Salse,OU=Users,DC=company,DC=com
2024-02-14 15:45:17 DEBUG [AD-Connector] Executing: New-ADUser ... -Path "OU=Salse,OU=Users,DC=company,DC=com"
2024-02-14 15:45:18 ERROR [AD-Connector] PowerShell execution failed
2024-02-14 15:45:18 ERROR [AD-Connector] Error: The object 'OU=Salse,OU=Users,DC=company,DC=com' cannot be found
2024-02-14 15:45:18 ERROR [AD-Connector] LDAP Error 32: NO_SUCH_OBJECT
2024-02-14 15:45:18 ERROR [AD-Connector] Invalid OU path: OU=Salse,OU=Users,DC=company,DC=com
```

**What to look for:**
```
Key indicators of invalid OU:
  ✓ DEBUG shows typo: "OU=Salse" instead of "OU=Sales"
  ✓ ERROR "object cannot be found"
  ✓ LDAP Error 32 (NO_SUCH_OBJECT)

Diagnosis:
  Typo in OU placement rule configuration
  
Fix:
  Correct OU mapping: Sales → OU=Sales (not OU=Salse)
```

---

### **Scenario 4: Connection Timeout**
```
2024-02-14 16:20:10 INFO [AD-Connector] Starting account creation for: test.user
2024-02-14 16:20:10 DEBUG [AD-Connector] Connecting to domain controller
2024-02-14 16:20:10 DEBUG [AD-Connector] Target DC: dc01.company.com:636
2024-02-14 16:20:10 DEBUG [AD-Connector] Connection attempt 1
2024-02-14 16:20:40 WARN [AD-Connector] Connection timeout (30 seconds)
2024-02-14 16:20:40 DEBUG [AD-Connector] Retrying connection (attempt 2)
2024-02-14 16:21:10 WARN [AD-Connector] Connection timeout (30 seconds)
2024-02-14 16:21:10 DEBUG [AD-Connector] Retrying connection (attempt 3)
2024-02-14 16:21:40 ERROR [AD-Connector] Connection timeout (30 seconds)
2024-02-14 16:21:40 ERROR [AD-Connector] Failed to connect after 3 attempts
2024-02-14 16:21:40 ERROR [AD-Connector] Cannot reach domain controller: dc01.company.com:636
2024-02-14 16:21:40 ERROR [AD-Connector] Account creation failed: Connection timeout
```

**What to look for:**
```
Key indicators of connection issue:
  ✓ WARN "Connection timeout" - Multiple warnings
  ✓ DEBUG "Retrying connection" - Automatic retries
  ✓ ERROR "Failed to connect after 3 attempts" - All retries failed
  ✓ Long duration (90 seconds total - 3 × 30 sec timeouts)

Diagnosis:
  Cannot reach domain controller (network issue)
  
Possible causes:
  - Network connectivity problem
  - Firewall blocking
  - Domain controller down
  - DNS resolution failure
  
Fix:
  Check network connectivity
  Verify DC is running
  Check firewall rules
```

---

## Reading Salesforce Provisioning Logs

### **Successful Salesforce Account Creation**
```
2024-02-14 10:30:15 INFO [SF-Connector] Starting account creation for: john.smith@company.com
2024-02-14 10:30:15 DEBUG [SF-Connector] Identity: John Smith (EMP12345)
2024-02-14 10:30:15 DEBUG [SF-Connector] Operation: Create User

2024-02-14 10:30:15 DEBUG [SF-Connector] Authenticating to Salesforce
2024-02-14 10:30:15 DEBUG [SF-Connector] OAuth token request
2024-02-14 10:30:16 DEBUG [SF-Connector] OAuth token received
2024-02-14 10:30:16 DEBUG [SF-Connector] Token expires in: 7200 seconds

2024-02-14 10:30:16 DEBUG [SF-Connector] Building API request
2024-02-14 10:30:16 DEBUG [SF-Connector] Endpoint: POST /services/data/v58.0/sobjects/User
2024-02-14 10:30:16 DEBUG [SF-Connector] Request payload:
2024-02-14 10:30:16 DEBUG [SF-Connector] {
2024-02-14 10:30:16 DEBUG [SF-Connector]   "Username": "john.smith@company.com",
2024-02-14 10:30:16 DEBUG [SF-Connector]   "Email": "john.smith@company.com",
2024-02-14 10:30:16 DEBUG [SF-Connector]   "LastName": "Smith",
2024-02-14 10:30:16 DEBUG [SF-Connector]   "FirstName": "John",
2024-02-14 10:30:16 DEBUG [SF-Connector]   "Alias": "jsmith",
2024-02-14 10:30:16 DEBUG [SF-Connector]   "ProfileId": "00exx000001abcd",
2024-02-14 10:30:16 DEBUG [SF-Connector]   "TimeZoneSidKey": "America/New_York",
2024-02-14 10:30:16 DEBUG [SF-Connector]   "LocaleSidKey": "en_US",
2024-02-14 10:30:16 DEBUG [SF-Connector]   "EmailEncodingKey": "UTF-8",
2024-02-14 10:30:16 DEBUG [SF-Connector]   "LanguageLocaleKey": "en_US"
2024-02-14 10:30:16 DEBUG [SF-Connector] }

2024-02-14 10:30:16 DEBUG [SF-Connector] Sending API request
2024-02-14 10:30:17 DEBUG [SF-Connector] Response received
2024-02-14 10:30:17 DEBUG [SF-Connector] HTTP Status: 201 Created
2024-02-14 10:30:17 DEBUG [SF-Connector] Response payload:
2024-02-14 10:30:17 DEBUG [SF-Connector] {
2024-02-14 10:30:17 DEBUG [SF-Connector]   "id": "005xx000001234AAA",
2024-02-14 10:30:17 DEBUG [SF-Connector]   "success": true,
2024-02-14 10:30:17 DEBUG [SF-Connector]   "errors": []
2024-02-14 10:30:17 DEBUG [SF-Connector] }

2024-02-14 10:30:17 INFO [SF-Connector] User created successfully
2024-02-14 10:30:17 INFO [SF-Connector] Salesforce User ID: 005xx000001234AAA
2024-02-14 10:30:17 INFO [SF-Connector] Duration: 2 seconds
```

**How to Read Salesforce Logs:**

**Authentication (10:30:15-10:30:16)**
```
What's happening:
  ✓ Requesting OAuth token
  ✓ Token received
  ✓ Token valid for 2 hours

Key indicators:
  DEBUG "OAuth token request" - Starting auth
  DEBUG "OAuth token received" - Auth successful
  DEBUG "Token expires in: 7200 seconds" - Token lifetime
```

**Request Building (10:30:16)**
```
What's happening:
  ✓ Constructing API request
  ✓ Shows exact JSON payload
  ✓ All required fields present

Key indicators:
  DEBUG "Building API request" - Preparing request
  DEBUG shows full JSON payload - Can verify all fields
  DEBUG shows endpoint - API URL
```

**API Call (10:30:16-10:30:17)**
```
What's happening:
  ✓ Sending request to Salesforce
  ✓ Response received
  ✓ HTTP 201 Created (success)

Key indicators:
  DEBUG "Sending API request" - Making call
  DEBUG "HTTP Status: 201 Created" - Success status
  DEBUG shows response JSON - Salesforce User ID returned
```

**Success (10:30:17)**
```
What's happening:
  ✓ User created in Salesforce
  ✓ User ID captured
  ✓ Operation complete

Key indicators:
  INFO "User created successfully" - Final success
  INFO "Salesforce User ID: 005xx..." - ID for reference
  INFO "Duration: 2 seconds" - Quick operation
```

---

### **Failed Salesforce Provisioning - Unauthorized**
```
2024-02-14 11:20:15 INFO [SF-Connector] Starting account creation for: test.user@company.com
2024-02-14 11:20:15 DEBUG [SF-Connector] Authenticating to Salesforce
2024-02-14 11:20:15 DEBUG [SF-Connector] OAuth token request
2024-02-14 11:20:16 ERROR [SF-Connector] OAuth authentication failed
2024-02-14 11:20:16 ERROR [SF-Connector] HTTP Status: 401 Unauthorized
2024-02-14 11:20:16 ERROR [SF-Connector] Response: {"error":"invalid_client","error_description":"client identifier invalid"}
2024-02-14 11:20:16 ERROR [SF-Connector] Check OAuth credentials in ISC configuration
2024-02-14 11:20:16 ERROR [SF-Connector] Account creation failed: Authentication failed
```

**What to look for:**
```
Key indicators of auth failure:
  ✓ ERROR "OAuth authentication failed"
  ✓ HTTP 401 Unauthorized
  ✓ "invalid_client" error
  ✓ Failed before API call (authentication issue)

Diagnosis:
  OAuth client ID or secret incorrect
  
Fix:
  Update OAuth credentials in ISC
  Re-authenticate to Salesforce
```

---

## Reading JDBC Provisioning Logs

### **Successful Database Provisioning**
```
2024-02-14 10:30:15 INFO [JDBC-Connector] Starting account creation for: john.smith
2024-02-14 10:30:15 DEBUG [JDBC-Connector] Connecting to database
2024-02-14 10:30:15 DEBUG [JDBC-Connector] JDBC URL: jdbc:oracle:thin:@oracledb:1521:PROD
2024-02-14 10:30:15 DEBUG [JDBC-Connector] Connection established

2024-02-14 10:30:16 DEBUG [JDBC-Connector] Preparing SQL statement
2024-02-14 10:30:16 DEBUG [JDBC-Connector] SQL: INSERT INTO users (user_id, username, first_name, last_name, email, department, created_date) VALUES (?, ?, ?, ?, ?, ?, ?)
2024-02-14 10:30:16 DEBUG [JDBC-Connector] Parameters:
2024-02-14 10:30:16 DEBUG [JDBC-Connector]   [1] user_id: 12345 (auto-generated)
2024-02-14 10:30:16 DEBUG [JDBC-Connector]   [2] username: john.smith
2024-02-14 10:30:16 DEBUG [JDBC-Connector]   [3] first_name: John
2024-02-14 10:30:16 DEBUG [JDBC-Connector]   [4] last_name: Smith
2024-02-14 10:30:16 DEBUG [JDBC-Connector]   [5] email: john.smith@company.com
2024-02-14 10:30:16 DEBUG [JDBC-Connector]   [6] department: Sales
2024-02-14 10:30:16 DEBUG [JDBC-Connector]   [7] created_date: 2024-02-14 10:30:16

2024-02-14 10:30:16 DEBUG [JDBC-Connector] Executing SQL statement
2024-02-14 10:30:17 DEBUG [JDBC-Connector] Rows affected: 1
2024-02-14 10:30:17 DEBUG [JDBC-Connector] Committing transaction
2024-02-14 10:30:17 INFO [JDBC-Connector] User created in database
2024-02-14 10:30:17 INFO [JDBC-Connector] User ID: 12345
```

**How to Read Database Logs:**

**Connection (10:30:15)**
```
Key indicators:
  DEBUG "Connecting to database" - Starting connection
  DEBUG shows JDBC URL - Connection details
  DEBUG "Connection established" - Connected successfully
```

**SQL Preparation (10:30:16)**
```
Key indicators:
  DEBUG "Preparing SQL statement" - Building query
  DEBUG shows exact SQL - Can verify syntax
  DEBUG shows parameters - Can verify data
  DEBUG shows numbered parameters [1], [2], etc. - Parameter order
```

**Execution (10:30:16-10:30:17)**
```
Key indicators:
  DEBUG "Executing SQL statement" - Running query
  DEBUG "Rows affected: 1" - One row inserted (success)
  DEBUG "Committing transaction" - Committing changes
  INFO "User created in database" - Final success
```

---

## Common Log Reading Patterns

### **Pattern 1: Timing Analysis**

**Normal Timing:**
```
2024-02-14 10:30:15 INFO Starting operation
2024-02-14 10:30:17 INFO Operation complete
Duration: 2 seconds (normal)
```

**Slow Operation:**
```
2024-02-14 10:30:15 INFO Starting operation
2024-02-14 10:30:45 INFO Operation complete
Duration: 30 seconds (slow - investigate)
```

**What to look for:**
```
✓ Long gaps between log entries = performance issue
✓ Compare duration to normal operations
✓ Look for timeouts or retries
✓ Check for network delays
```

---

### **Pattern 2: Retry Behavior**

**Automatic Retry:**
```
2024-02-14 10:30:15 DEBUG Attempt 1: Starting operation
2024-02-14 10:30:20 WARN Attempt 1 failed: Connection timeout
2024-02-14 10:30:25 DEBUG Attempt 2: Starting operation
2024-02-14 10:30:30 WARN Attempt 2 failed: Connection timeout
2024-02-14 10:30:35 DEBUG Attempt 3: Starting operation
2024-02-14 10:30:37 INFO Attempt 3 succeeded
```

**What to look for:**
```
✓ Multiple attempts indicate transient failures
✓ Success after retries = temporary issue (network glitch)
✓ All retries failed = persistent problem
✓ Count attempts to see if retry limit reached
```

---

### **Pattern 3: Batch Operations**

**Multiple Accounts:**
```
2024-02-14 10:30:15 INFO Starting batch provisioning (10 accounts)
2024-02-14 10:30:16 INFO [1/10] Account created: john.smith
2024-02-14 10:30:17 INFO [2/10] Account created: jane.doe
2024-02-14 10:30:18 ERROR [3/10] Account creation failed: bob.wilson
2024-02-14 10:30:19 INFO [4/10] Account created: alice.johnson
...
2024-02-14 10:30:25 INFO Batch complete: 9 succeeded, 1 failed
```

**What to look for:**
```
✓ Batch indicators [1/10], [2/10], etc.
✓ Success vs. failure count
✓ Which accounts failed
✓ Overall success rate
```

---

## Practice Exercise

**Question:** Review this log sequence and explain what happened during the provisioning operation:
```
2024-02-14 14:30:15 INFO [AD-Connector] Starting account creation for: alice.brown
2024-02-14 14:30:15 DEBUG [AD-Connector] Department: Engineering
2024-02-14 14:30:15 DEBUG [AD-Connector] LDAP bind successful
2024-02-14 14:30:16 DEBUG [AD-Connector] Target OU: OU=Engineering,OU=Users,DC=company,DC=com
2024-02-14 14:30:16 DEBUG [AD-Connector] Executing: New-ADUser -Name "alice.brown" -Path "OU=Engineering,OU=Users,DC=company,DC=com"
2024-02-14 14:30:17 ERROR [AD-Connector] PowerShell execution failed
2024-02-14 14:30:17 ERROR [AD-Connector] Error: Insufficient access rights to perform the operation
2024-02-14 14:30:17 ERROR [AD-Connector] LDAP Error 50
2024-02-14 14:30:17 ERROR [AD-Connector] Account creation failed
```

<details>
<summary>Answer</summary>

**Complete Log Analysis:**

---

**OPERATION OVERVIEW**
```
Operation: Create Active Directory account
Identity: Alice Brown
Target Account: alice.brown
Department: Engineering
Timestamp: 2024-02-14 14:30:15 - 14:30:17
Duration: 2 seconds
Result: FAILED
```

---

**STEP-BY-STEP ANALYSIS**

**Entry 1-2: Operation Initialization (14:30:15)**
```
2024-02-14 14:30:15 INFO [AD-Connector] Starting account creation for: alice.brown
2024-02-14 14:30:15 DEBUG [AD-Connector] Department: Engineering

What's happening:
  ✓ Account creation operation starts
  ✓ Target user: alice.brown
  ✓ Department: Engineering

Status: Normal initialization
```

**Entry 3: LDAP Connection (14:30:15)**
```
2024-02-14 14:30:15 DEBUG [AD-Connector] LDAP bind successful

What's happening:
  ✓ Connected to Active Directory
  ✓ LDAP bind successful
  ✓ Service account authenticated

Status: Connection successful
Indicator: Service account can authenticate to AD
```

**Entry 4: OU Determination (14:30:16)**
```
2024-02-14 14:30:16 DEBUG [AD-Connector] Target OU: OU=Engineering,OU=Users,DC=company,DC=com

What's happening:
  ✓ Department "Engineering" mapped to OU
  ✓ Target OU determined
  ✓ Will attempt to create account in Engineering OU

Status: OU mapping successful
Note: OU path appears correct (no typos)
```

**Entry 5: Command Execution Attempt (14:30:16)**
```
2024-02-14 14:30:16 DEBUG [AD-Connector] Executing: New-ADUser -Name "alice.brown" -Path "OU=Engineering,OU=Users,DC=company,DC=com"

What's happening:
  ✓ PowerShell command built
  ✓ Command being executed
  ✓ Attempting to create user in Engineering OU

Status: Execution started
Command: New-ADUser cmdlet
Path: OU=Engineering,OU=Users,DC=company,DC=com
```

**Entry 6-9: FAILURE (14:30:17)**
```
2024-02-14 14:30:17 ERROR [AD-Connector] PowerShell execution failed
2024-02-14 14:30:17 ERROR [AD-Connector] Error: Insufficient access rights to perform the operation
2024-02-14 14:30:17 ERROR [AD-Connector] LDAP Error 50
2024-02-14 14:30:17 ERROR [AD-Connector] Account creation failed

What's happening:
  ✗ PowerShell command failed
  ✗ Insufficient access rights
  ✗ LDAP Error 50 (permission error)
  ✗ Account NOT created

Status: FAILED - Permission issue
Error Code: LDAP Error 50 (INSUFFICIENT_ACCESS_RIGHTS)
```

---

**ROOT CAUSE ANALYSIS**

**What the Logs Tell Us:**
```
✓ Connection successful:
  - LDAP bind worked
  - Service account can authenticate
  - Network connectivity OK

✓ Configuration correct:
  - OU path correct (OU=Engineering...)
  - Command syntax correct
  - No data quality issues

✗ Permission problem:
  - Service account authenticated
  - But lacks create permissions on Engineering OU
  - LDAP Error 50 = INSUFFICIENT_ACCESS_RIGHTS
```

**Root Cause:**
```
Service account (likely svc_sailpoint) does not have 
"Create User Objects" permission on OU=Engineering

The service account CAN:
  ✓ Authenticate to Active Directory (LDAP bind successful)
  ✓ Read the OU (OU path determined)
  ✓ Execute PowerShell commands

The service account CANNOT:
  ✗ Create user objects in OU=Engineering
  ✗ Write to this specific OU
```

**Why This Happened:**
```
Possible scenarios:

1. Engineering OU has different permissions than other OUs
   - Other OUs may allow creation
   - Engineering OU was not delegated properly

2. Permission delegation incomplete
   - Service account given permissions on some OUs
   - Engineering OU was missed

3. Recent change
   - Engineering OU created recently
   - Permissions not yet configured

4. Permission revoked
   - Permissions were removed
   - Security change or policy update
```

---

**DIAGNOSTIC SUMMARY**

**What Worked:**
```
✓ LDAP connection (authentication successful)
✓ OU path determination (correct mapping)
✓ Command execution attempt (no syntax errors)
```

**What Failed:**
```
✗ User creation (insufficient permissions)
✗ Write operation to Engineering OU
```

**Error Indicators:**
```
Primary: "Insufficient access rights to perform the operation"
Error Code: LDAP Error 50
Target OU: OU=Engineering,OU=Users,DC=company,DC=com
Service Account: (implied svc_sailpoint or similar)
```

---

**RESOLUTION STEPS**

**Step 1: Verify Current Permissions**
```
Action: Check what permissions service account has

In Active Directory:
  1. Open AD Users and Computers
  2. Navigate to OU=Engineering,OU=Users,DC=company,DC=com
  3. Right-click → Properties → Security → Advanced
  4. Look for service account (svc_sailpoint)
  5. Check permissions

Current state (likely):
  ✗ Service account missing from permissions
  OR
  ✗ Service account has Read but not Create permissions
```

**Step 2: Grant Required Permissions**
```
Action: Delegate control to service account

Process:
  1. Right-click on OU=Engineering
  2. Select "Delegate Control"
  3. Click "Add"
  4. Enter: svc_sailpoint
  5. Click "Next"
  6. Select: "Create, delete, and manage user accounts"
  7. Click "Next" → "Finish"

This grants:
  ✓ Create user objects
  ✓ Delete user objects
  ✓ Reset passwords
  ✓ Modify user accounts
```

**Step 3: Verify Fix**
```
Action: Test account creation in Engineering OU

Test methods:

Option A: Retry in ISC
  1. ISC → Admin → Activity
  2. Find failed alice.brown provisioning
  3. Click "Retry"
  4. Monitor logs for success

Option B: Manual test
  1. Create test identity in Engineering
  2. Trigger account creation
  3. Verify success

Expected result:
  2024-02-14 15:00:17 INFO Account created successfully: alice.brown
  2024-02-14 15:00:17 INFO DN: CN=alice.brown,OU=Engineering,OU=Users,DC=company,DC=com
```

**Step 4: Prevent Future Issues**
```
Action: Verify permissions on all OUs

Process:
  1. Document all OUs where users are created
  2. Verify service account has permissions on each
  3. Create checklist for new OU creation
  4. Include permission delegation in OU creation process

OUs to check:
  - OU=Engineering (just fixed)
  - OU=Sales (verify)
  - OU=IT (verify)
  - OU=Marketing (verify)
  - OU=HR (verify)
  - Any other OUs used for user creation
```

---

**COMPARISON: SIMILAR SCENARIO THAT WOULD SUCCEED**

**If permissions were correct, logs would show:**
```
2024-02-14 14:30:15 INFO [AD-Connector] Starting account creation for: alice.brown
2024-02-14 14:30:15 DEBUG [AD-Connector] Department: Engineering
2024-02-14 14:30:15 DEBUG [AD-Connector] LDAP bind successful
2024-02-14 14:30:16 DEBUG [AD-Connector] Target OU: OU=Engineering,OU=Users,DC=company,DC=com
2024-02-14 14:30:16 DEBUG [AD-Connector] Executing: New-ADUser -Name "alice.brown" -Path "OU=Engineering,OU=Users,DC=company,DC=com"
2024-02-14 14:30:17 DEBUG [AD-Connector] PowerShell execution successful
2024-02-14 14:30:17 DEBUG [AD-Connector] Exit code: 0
2024-02-14 14:30:17 INFO [AD-Connector] Account created successfully: alice.brown
2024-02-14 14:30:17 INFO [AD-Connector] DN: CN=alice.brown,OU=Engineering,OU=Users,DC=company,DC=com

Difference:
  ✓ "PowerShell execution successful" instead of "failed"
  ✓ "Exit code: 0" instead of error
  ✓ "Account created successfully" instead of "Account creation failed"
  ✓ No LDAP Error 50
```

---

**KEY LEARNING POINTS**

**From This Log Sequence:**
```
1. LDAP bind successful ≠ Sufficient permissions
   - Can authenticate but still lack create permissions
   - Need both authentication AND authorization

2. LDAP Error codes are critical
   - Error 50 = Permission issue (always)
   - Different from Error 68 (duplicate) or 32 (not found)

3. Failed OU tells you where to look
   - "Failed OU: OU=Engineering..." points to exact location
   - Check permissions specifically on that OU

4. Quick failure (2 seconds) = Configuration issue
   - Not network timeout (would be 30+ seconds)
   - Not data quality (would show in DEBUG)
   - Permission check happens immediately

5. Service account needs granular permissions
   - May work for some OUs but not others
   - Each OU may have different permissions
   - Must delegate to all relevant OUs
```

**Exam Tip:** LDAP bind successful + LDAP Error 50 = Service account can authenticate but lacks create permissions on target OU. Fix by delegating control to service account on the specific OU.
</details>

---

## Section Summary

**Core Concepts for Certification:**

✅ **Log Entry Structure:**
- **Format**: [Timestamp] [Level] [Component] Message
- **Components**: Date/time, severity (ERROR/WARN/INFO/DEBUG), connector name, description
- **Read sequentially**: Follow operation from start to finish

✅ **Successful Provisioning Indicators:**
- INFO "Starting account creation"
- DEBUG "LDAP bind successful" or "OAuth token received"
- DEBUG "Executing: [command]"
- DEBUG "Exit code: 0" or "HTTP 201 Created"
- INFO "Account created successfully"
- INFO "Provisioning completed successfully"

✅ **Failed Provisioning Indicators:**
- ERROR "PowerShell execution failed" or "API call failed"
- ERROR with specific error message
- ERROR with error code (LDAP Error XX, HTTP XXX)
- INFO "Provisioning failed"

✅ **Common Error Patterns:**
- **LDAP Error 68**: Account already exists (duplicate)
- **LDAP Error 50**: Insufficient permissions
- **LDAP Error 32**: Object not found (invalid OU/DN)
- **HTTP 401**: Authentication failed
- **Connection timeout**: Network/connectivity issue

✅ **Reading Strategy:**
1. Find operation start (INFO "Starting...")
2. Follow DEBUG entries for execution flow
3. Look for ERROR entries (failure point)
4. Check error code and message
5. Review context around error
6. Determine root cause

✅ **Key Log Details to Extract:**
- **What operation**: Create, Update, Delete
- **What account**: Username/email
- **What command**: Exact command executed
- **What error**: Specific error message and code
- **What failed**: OU path, attribute, connection, etc.
- **When**: Timestamp for correlation

**Exam Focus Areas:**
- Know how to read log entries sequentially
- Recognize successful vs. failed operations
- Identify error codes (LDAP 50/68/32, HTTP 401/429)
- Understand DEBUG shows execution details
- Know ERROR shows failure point
- Remember to look for "Exit code: 0" = success
- Understand timing gaps indicate delays

---

**End of Section 5.4.4: Reading Provisioning Logs and Events**

**Section 5.4: Provisioning Troubleshooting - COMPLETE**

**Completed Subsections:**
- ✅ 5.4.1: Enabling Connector Logging
- ✅ 5.4.2: Logging Levels and When to Use Them
- ✅ 5.4.3: Searching for Provisioning Errors
- ✅ 5.4.4: Reading Provisioning Logs and Events

---

**Section 5: Provisioning - COMPLETE**

**Completed Sections:**
- ✅ 5.1: Provisioning Fundamentals
- ✅ 5.2: Source Provisioning Components
- ✅ 5.3: Provisioning Channels
- ✅ 5.4: Provisioning Troubleshooting

---

**Study Tips for Section 5:**
- **Fundamentals**: Know 5 triggers, 6-phase lifecycle, disable→delete timeline
- **Components**: Provisioning policy controls operations, schema defines structure
- **Channels**: Cloud=Direct API, On-prem=VA, SCIM preferred
- **Troubleshooting**: INFO=production, DEBUG=troubleshooting, search ISC then VA logs
- **Log reading**: Follow sequence, look for ERROR entries, identify error codes

**Congratulations!** You've completed **Section 5: Provisioning** - a critical section covering how ISC actually provisions accounts and access to target systems.

**What's next for your certification preparation?**
