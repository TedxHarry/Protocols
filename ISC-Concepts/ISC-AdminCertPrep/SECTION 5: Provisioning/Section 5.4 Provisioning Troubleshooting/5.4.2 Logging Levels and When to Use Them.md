# 5.4.2 Logging Levels and When to Use Them

**Learning Objective:** Understand different logging levels, their verbosity, and appropriate use cases for each.

---

## Logging Levels Overview

**Definition:** Logging levels control the amount of detail captured in logs

**Hierarchy (Least to Most Verbose):**
```
OFF (no logging)
  ↓
ERROR (only errors)
  ↓
WARN (warnings and errors)
  ↓
INFO (informational + warnings + errors)
  ↓
DEBUG (detailed debugging info + all above)
  ↓
TRACE (very detailed, every step + all above)
```

**Key Concept:**
```
Higher levels include lower levels:
  DEBUG includes: DEBUG + INFO + WARN + ERROR
  INFO includes: INFO + WARN + ERROR
  WARN includes: WARN + ERROR
  ERROR includes: ERROR only
```

**Exam Tip:** Log levels are hierarchical. DEBUG includes everything. Use INFO for production, DEBUG for troubleshooting.

---

## Log Level: OFF

### **Description**

**What it does:**
```
Disables all logging
No log entries created
No file writes
```

**Use Cases:**
```
✗ Never recommended for production
✗ Never recommended for troubleshooting
✓ Only for testing log configuration itself
✓ Temporary disable during testing
```

**When to use:**
```
Acceptable:
  - Testing log configuration changes
  - Temporary disable for specific test
  - Performance testing (eliminate logging overhead)
  
Never use for:
  - Production environments
  - Normal operations
  - Any real provisioning
```

**Impact:**
```
✗ No audit trail
✗ Cannot troubleshoot issues
✗ No visibility into operations
✗ Compliance issues

Only use OFF briefly for testing purposes
```

---

## Log Level: ERROR

### **Description**

**What it logs:**
```
✓ Fatal errors
✓ Critical failures
✓ Operation failures
✗ Nothing else (no successes, no info)
```

**Log Volume:**
```
Very Low:
  - Only when errors occur
  - Empty logs if no errors
  - Minimal disk usage
```

### **Example Log Output**
```
2024-02-14 10:30:17 ERROR [AD-Connector] Account creation failed
2024-02-14 10:30:17 ERROR [AD-Connector] LDAP Error 68: ENTRY_ALREADY_EXISTS
2024-02-14 10:30:17 ERROR [AD-Connector] DN: CN=john.smith,OU=Users,DC=company,DC=com

2024-02-14 11:15:22 ERROR [SF-Connector] API call failed
2024-02-14 11:15:22 ERROR [SF-Connector] HTTP 401 Unauthorized
2024-02-14 11:15:22 ERROR [SF-Connector] OAuth token expired

2024-02-14 14:45:33 ERROR [JDBC-Connector] Database connection failed
2024-02-14 14:45:33 ERROR [JDBC-Connector] Connection timeout after 30 seconds
```

**What you WON'T see:**
```
✗ Successful operations
✗ Account creations that worked
✗ Normal operations
✗ Informational messages
✗ Warnings

Result: Only errors, no context
```

### **When to Use ERROR Level**

**Appropriate Scenarios:**
```
✗ Never recommended for production
✗ Not useful for troubleshooting

Theoretically useful for:
  - Minimal logging requirement
  - Extremely resource-constrained systems
  - Only care about failures

Practical reality:
  ERROR level too limited
  Use INFO instead (minimal overhead, much more useful)
```

**Why NOT to use ERROR:**
```
Problems:
  ✗ No success confirmations
  ✗ No context around errors
  ✗ Cannot see what led to error
  ✗ Cannot verify operations working
  ✗ Poor troubleshooting
  
Better choice: INFO level
  ✓ Still minimal overhead
  ✓ Provides context
  ✓ Shows successes
  ✓ Better visibility
```

---

## Log Level: WARN

### **Description**

**What it logs:**
```
✓ Warnings (potential issues)
✓ Errors (actual failures)
✗ Informational messages
✗ Debug details
```

**Log Volume:**
```
Low:
  - Warnings and errors only
  - Occasional entries
  - Low disk usage
```

### **Example Log Output**
```
2024-02-14 10:30:15 WARN [AD-Connector] Service account password expires in 7 days
2024-02-14 10:30:15 WARN [AD-Connector] Recommendation: Update password before expiration

2024-02-14 11:15:20 WARN [SF-Connector] API rate limit at 80% (8000 of 10000 calls)
2024-02-14 11:15:20 WARN [SF-Connector] Consider reducing request frequency

2024-02-14 14:45:30 ERROR [JDBC-Connector] Database connection failed
2024-02-14 14:45:30 ERROR [JDBC-Connector] Connection timeout after 30 seconds

2024-02-14 15:22:10 WARN [VA-Service] Certificate expires in 30 days
2024-02-14 15:22:10 WARN [VA-Service] Renew certificate to avoid service interruption
```

**What you see:**
```
✓ Warnings (things to watch)
✓ Errors (things that failed)
✗ Success confirmations
✗ Normal operations
```

### **When to Use WARN Level**

**Appropriate Scenarios:**
```
Limited use cases:
  - Monitoring for potential issues
  - Alert-focused logging
  - Minimal logging requirement
  
Still not recommended for:
  - Production (use INFO instead)
  - Troubleshooting (use DEBUG instead)
```

**Better alternative: INFO**
```
WARN limitations:
  ✗ No confirmation of successful operations
  ✗ Cannot verify provisioning worked
  ✗ Limited troubleshooting capability
  
INFO benefits:
  ✓ Includes all WARN messages
  ✓ Plus success confirmations
  ✓ Plus operational context
  ✓ Minimal additional overhead
  
Recommendation: Use INFO, not WARN
```

---

## Log Level: INFO

### **Description**

**What it logs:**
```
✓ Informational messages (operations)
✓ Success/completion confirmations
✓ Operational summaries
✓ Warnings (potential issues)
✓ Errors (failures)
```

**Log Volume:**
```
Moderate:
  - Logs key operations
  - Not overly verbose
  - Reasonable disk usage
  - Production-appropriate
```

### **Example Log Output**
```
2024-02-14 10:30:15 INFO [AD-Connector] Starting account creation for: john.smith
2024-02-14 10:30:16 INFO [AD-Connector] LDAP connection established: dc01.company.com
2024-02-14 10:30:17 INFO [AD-Connector] Account created successfully: john.smith
2024-02-14 10:30:17 INFO [AD-Connector] DN: CN=john.smith,OU=Users,DC=company,DC=com
2024-02-14 10:30:18 INFO [AD-Connector] Group membership added: VPN-Users

2024-02-14 11:15:20 INFO [SF-Connector] OAuth authentication successful
2024-02-14 11:15:21 INFO [SF-Connector] Creating Salesforce user: john.smith@company.com
2024-02-14 11:15:22 INFO [SF-Connector] User created successfully: 005xx000001234AAA
2024-02-14 11:15:22 INFO [SF-Connector] Profile assigned: Sales Cloud User

2024-02-14 14:45:30 WARN [JDBC-Connector] Database connection slow (5 seconds)
2024-02-14 14:45:35 INFO [JDBC-Connector] User created in database: user_id=12345

2024-02-14 15:22:10 ERROR [VA-Service] Configuration sync failed
2024-02-14 15:22:10 ERROR [VA-Service] Network timeout
```

**What you see:**
```
✓ Start/end of operations
✓ Success confirmations
✓ Key operational steps
✓ Warnings
✓ Errors
✗ Detailed debug information
✗ Step-by-step execution
```

### **When to Use INFO Level**

**Recommended for:**
```
✓ Production environments (RECOMMENDED)
✓ Normal operations
✓ Ongoing monitoring
✓ Standard logging needs
```

**Why INFO is Production Default:**
```
Benefits:
  ✓ Confirms operations completed
  ✓ Shows successes and failures
  ✓ Provides operational visibility
  ✓ Minimal performance impact
  ✓ Reasonable log size
  ✓ Sufficient for most needs
  
Overhead:
  ✓ Low CPU usage
  ✓ Low disk usage (~100-500 MB/day typical)
  ✓ Acceptable for 24/7 operation
```

**What INFO Provides:**
```
Operational Visibility:
  ✓ "Account created successfully" (confirmation)
  ✓ "1000 users provisioned today" (summary)
  ✓ "Connection established" (connectivity)
  ✓ "Operation completed in 2 seconds" (performance)
  
Troubleshooting Capability:
  ✓ Can see if operations completed
  ✓ Can identify when errors occurred
  ✓ Can see high-level flow
  ✗ Cannot see detailed execution (need DEBUG)
  
Audit Trail:
  ✓ Records all operations
  ✓ Shows who/what/when
  ✓ Compliance-friendly
```

**INFO Level Best Practices:**
```
Production Configuration:
  Connector Logging: INFO
  VA Service Logging: INFO
  Communication Logging: WARN or INFO
  
Result:
  ✓ Operational visibility
  ✓ Manageable log size
  ✓ Performance maintained
  ✓ Troubleshooting possible
```

---

## Log Level: DEBUG

### **Description**

**What it logs:**
```
✓ Detailed debugging information
✓ Step-by-step execution
✓ API requests/responses
✓ LDAP operations
✓ SQL statements
✓ Variable values
✓ All INFO messages
✓ All WARN messages
✓ All ERROR messages
```

**Log Volume:**
```
High:
  - Very detailed
  - Every operation logged
  - Large log files (GB/day possible)
  - Significant disk usage
```

### **Example Log Output**
```
2024-02-14 10:30:15 DEBUG [AD-Connector] Starting account creation
2024-02-14 10:30:15 DEBUG [AD-Connector] Input parameters: {username=john.smith, firstName=John, lastName=Smith, department=Sales}
2024-02-14 10:30:15 DEBUG [AD-Connector] Connecting to: dc01.company.com:636
2024-02-14 10:30:15 DEBUG [AD-Connector] Using LDAPS (secure)
2024-02-14 10:30:15 DEBUG [AD-Connector] Bind DN: CN=svc_sailpoint,OU=Service,DC=company,DC=com
2024-02-14 10:30:15 DEBUG [AD-Connector] Bind operation: bindRequest(DN='CN=svc_sailpoint,OU=Service,DC=company,DC=com')
2024-02-14 10:30:15 DEBUG [AD-Connector] Bind result: success (resultCode=0)
2024-02-14 10:30:15 DEBUG [AD-Connector] LDAP connection established
2024-02-14 10:30:16 DEBUG [AD-Connector] Determining target OU
2024-02-14 10:30:16 DEBUG [AD-Connector] Department=Sales maps to OU=Sales,OU=Users,DC=company,DC=com
2024-02-14 10:30:16 DEBUG [AD-Connector] Building PowerShell command
2024-02-14 10:30:16 DEBUG [AD-Connector] Command: New-ADUser -Name "john.smith" -GivenName "John" -Surname "Smith" -SamAccountName "john.smith" -UserPrincipalName "john.smith@company.com" -DisplayName "John Smith" -EmailAddress "john.smith@company.com" -Department "Sales" -Path "OU=Sales,OU=Users,DC=company,DC=com" -AccountPassword (ConvertTo-SecureString "TempPass123!" -AsPlainText -Force) -Enabled $true
2024-02-14 10:30:16 DEBUG [AD-Connector] Executing PowerShell command
2024-02-14 10:30:17 DEBUG [AD-Connector] PowerShell output: (none - success)
2024-02-14 10:30:17 DEBUG [AD-Connector] PowerShell exit code: 0
2024-02-14 10:30:17 DEBUG [AD-Connector] User created successfully
2024-02-14 10:30:17 DEBUG [AD-Connector] Created DN: CN=john.smith,OU=Sales,OU=Users,DC=company,DC=com
2024-02-14 10:30:17 INFO [AD-Connector] Account created successfully: john.smith
2024-02-14 10:30:17 DEBUG [AD-Connector] Adding to group: VPN-Users
2024-02-14 10:30:17 DEBUG [AD-Connector] Group DN: CN=VPN-Users,OU=Groups,DC=company,DC=com
2024-02-14 10:30:17 DEBUG [AD-Connector] Command: Add-ADGroupMember -Identity "VPN-Users" -Members "john.smith"
2024-02-14 10:30:18 DEBUG [AD-Connector] Group membership added successfully
2024-02-14 10:30:18 INFO [AD-Connector] Provisioning completed successfully
```

**What you see:**
```
✓ Every step of execution
✓ All parameters and values
✓ Full commands executed
✓ API request/response bodies
✓ Connection details
✓ Decision logic
✓ Timing information
✓ Everything
```

### **When to Use DEBUG Level**

**Appropriate Scenarios:**
```
✓ Troubleshooting provisioning failures
✓ Diagnosing configuration issues
✓ Testing new connector setup
✓ Investigating performance problems
✓ Working with SailPoint support
✓ Development and testing
```

**When NOT to Use DEBUG:**
```
✗ Production normal operations
✗ Long-term continuous logging
✗ Low disk space situations
✗ Performance-sensitive environments
✗ After issue resolved
```

**DEBUG Usage Pattern:**
```
Troubleshooting Process:
  1. Issue reported
  2. Enable DEBUG logging
  3. Reproduce issue
  4. Collect logs
  5. Analyze detailed logs
  6. Identify root cause
  7. Fix issue
  8. Disable DEBUG logging ← Important!
  
Duration: Hours to days (temporary)
Never leave DEBUG on permanently
```

### **DEBUG Level Benefits**

**Troubleshooting Power:**
```
✓ See exact commands executed
✓ See exact API calls made
✓ See parameters passed
✓ See responses received
✓ See where execution failed
✓ See error context
```

**Example - Debugging Failed Creation:**
```
Without DEBUG (INFO level):
  "Account creation failed"
  
With DEBUG:
  "PowerShell command: New-ADUser -Name 'john.smith' ..."
  "Error: The specified account already exists"
  "DN: CN=john.smith,OU=Users,DC=company,DC=com"
  
  Now you know:
    - Exact command executed
    - Exact error message
    - Exact location (DN)
    - Can investigate specific issue
```

### **DEBUG Level Costs**

**Disk Space:**
```
INFO level: ~100-500 MB/day (typical)
DEBUG level: ~1-10 GB/day (or more)

Impact:
  - 10-100x more data
  - Fills disk quickly
  - May need cleanup
  - Can cause disk full
```

**Performance:**
```
INFO level: Minimal impact (<1%)
DEBUG level: Moderate impact (1-5%)

Impact:
  - More CPU to format logs
  - More disk I/O to write logs
  - Slight provisioning slowdown
  - Usually acceptable for troubleshooting
```

**Log Rotation:**
```
INFO level: Daily rotation sufficient
DEBUG level: May rotate multiple times per day

Impact:
  - More log files
  - Faster rotation
  - Older logs compressed/deleted sooner
  - May lose data if not archived
```

---

## Log Level: TRACE

### **Description**

**What it logs:**
```
✓ Everything DEBUG logs
✓ Plus even more detail
✓ Every function call
✓ Every variable assignment
✓ Internal state changes
✓ Framework-level details
```

**Log Volume:**
```
Very High:
  - Extremely verbose
  - Massive log files (10s of GB/day)
  - Overwhelming detail
  - Typically too much information
```

### **Example Log Output**
```
2024-02-14 10:30:15 TRACE [AD-Connector] Entering method: createAccount
2024-02-14 10:30:15 TRACE [AD-Connector] Parameter: username=john.smith
2024-02-14 10:30:15 TRACE [AD-Connector] Parameter: firstName=John
2024-02-14 10:30:15 TRACE [AD-Connector] Parameter: lastName=Smith
2024-02-14 10:30:15 TRACE [AD-Connector] Local variable: targetDN=null
2024-02-14 10:30:15 TRACE [AD-Connector] Calling method: buildDistinguishedName
2024-02-14 10:30:15 TRACE [AD-Connector] Entering method: buildDistinguishedName
2024-02-14 10:30:15 TRACE [AD-Connector] Checking department mapping
2024-02-14 10:30:15 TRACE [AD-Connector] Department: Sales
2024-02-14 10:30:15 TRACE [AD-Connector] Lookup in department map
2024-02-14 10:30:15 TRACE [AD-Connector] Found mapping: Sales -> OU=Sales,OU=Users,DC=company,DC=com
2024-02-14 10:30:15 TRACE [AD-Connector] Returning: OU=Sales,OU=Users,DC=company,DC=com
2024-02-14 10:30:15 TRACE [AD-Connector] Exiting method: buildDistinguishedName
2024-02-14 10:30:15 TRACE [AD-Connector] Returned to method: createAccount
2024-02-14 10:30:15 TRACE [AD-Connector] Local variable: targetOU=OU=Sales,OU=Users,DC=company,DC=com
2024-02-14 10:30:15 TRACE [AD-Connector] Calling method: buildPowerShellCommand
2024-02-14 10:30:15 TRACE [AD-Connector] Entering method: buildPowerShellCommand
2024-02-14 10:30:15 TRACE [AD-Connector] Building command string
2024-02-14 10:30:15 TRACE [AD-Connector] Appending: New-ADUser
2024-02-14 10:30:15 TRACE [AD-Connector] Appending parameter: -Name
2024-02-14 10:30:15 TRACE [AD-Connector] Appending value: john.smith
... (hundreds more lines for single operation)
```

**What you see:**
```
✓ Every function entry/exit
✓ Every parameter
✓ Every variable
✓ Every decision point
✓ Internal framework operations
✓ Too much detail
```

### **When to Use TRACE Level**

**Rarely Appropriate:**
```
Limited use cases:
  ✓ Developer debugging (connector development)
  ✓ SailPoint support request (very rare)
  ✓ Investigating framework issues
  
Almost never for:
  ✗ Production troubleshooting
  ✗ Normal debugging (use DEBUG instead)
  ✗ General operations
```

**Why Avoid TRACE:**
```
Problems:
  ✗ Overwhelming amount of data
  ✗ Difficult to find relevant information
  ✗ Very large log files (10+ GB/day)
  ✗ Significant performance impact
  ✗ Signal-to-noise ratio very low
  
Better choice: DEBUG
  ✓ Detailed enough for troubleshooting
  ✓ Much less data
  ✓ Easier to analyze
  ✓ Lower performance impact
```

**TRACE vs DEBUG:**
```
DEBUG provides:
  ✓ API calls and responses
  ✓ SQL statements
  ✓ LDAP operations
  ✓ Error details
  ✓ Usually sufficient
  
TRACE adds:
  ✓ Framework internals
  ✓ Every function call
  ✓ Every variable
  ✗ Rarely needed
  
Recommendation: Use DEBUG, not TRACE
```

---

## Logging Level Selection Guide

### **Decision Matrix**

| Scenario | Recommended Level | Why |
|----------|-------------------|-----|
| **Production (normal)** | INFO | Operational visibility, minimal overhead |
| **Production (troubleshooting)** | DEBUG (temporary) | Detailed diagnostics, disable after |
| **Development/Testing** | DEBUG | Detailed feedback during development |
| **Performance Testing** | INFO or WARN | Minimize logging overhead |
| **Support Case** | DEBUG | SailPoint support needs details |
| **Very Rare Issues** | TRACE | Only if DEBUG insufficient |
| **Monitoring Only** | INFO | Balance visibility and overhead |
| **High Volume** | INFO | DEBUG too much data |

### **Environment-Based Recommendations**

**Production Environment:**
```
Normal Operations:
  Connector: INFO
  VA Service: INFO
  Communication: INFO or WARN
  
  Why:
    ✓ Confirms operations
    ✓ Minimal overhead
    ✓ Audit trail
    ✓ Manageable logs
    
Active Troubleshooting:
  Connector: DEBUG (temporary)
  VA Service: INFO
  Communication: DEBUG (if needed)
  
  Why:
    ✓ Detailed diagnostics
    ✓ Root cause analysis
    ✓ Short duration only
    
  Remember: Disable DEBUG after resolving issue!
```

**Development/Test Environment:**
```
Standard:
  Connector: DEBUG
  VA Service: DEBUG
  Communication: DEBUG
  
  Why:
    ✓ Immediate feedback
    ✓ Detailed testing
    ✓ Issue detection
    ✓ Performance acceptable
    
Before Production Deployment:
  Test with INFO level
  Verify logs reasonable
  Ensure performance acceptable
```

---

## Logging Level Impact Comparison

### **Log Volume Comparison**

**Same operation (create AD account), different levels:**
```
ERROR Level:
  Lines logged: 1 (only if error)
  Size: ~200 bytes
  Example:
    2024-02-14 10:30:17 ERROR Account creation failed

WARN Level:
  Lines logged: 1-2
  Size: ~400 bytes
  Example:
    2024-02-14 10:30:15 WARN Password expires soon
    2024-02-14 10:30:17 ERROR Account creation failed

INFO Level:
  Lines logged: 5-10
  Size: ~2 KB
  Example:
    2024-02-14 10:30:15 INFO Starting account creation: john.smith
    2024-02-14 10:30:16 INFO LDAP connection established
    2024-02-14 10:30:17 INFO Account created successfully
    2024-02-14 10:30:17 INFO DN: CN=john.smith,OU=Users,DC=company,DC=com
    2024-02-14 10:30:18 INFO Group added: VPN-Users

DEBUG Level:
  Lines logged: 50-100
  Size: ~20-50 KB
  Example:
    [All INFO lines plus...]
    2024-02-14 10:30:15 DEBUG Input parameters: {username=john.smith...}
    2024-02-14 10:30:15 DEBUG Connecting to: dc01.company.com:636
    2024-02-14 10:30:15 DEBUG Bind DN: CN=svc_sailpoint...
    2024-02-14 10:30:15 DEBUG Bind result: success
    2024-02-14 10:30:16 DEBUG Building PowerShell command
    2024-02-14 10:30:16 DEBUG Command: New-ADUser -Name "john.smith"...
    2024-02-14 10:30:17 DEBUG PowerShell exit code: 0
    ... (40+ more lines)

TRACE Level:
  Lines logged: 200-500
  Size: ~100-200 KB
  Example:
    [All DEBUG lines plus...]
    2024-02-14 10:30:15 TRACE Entering method: createAccount
    2024-02-14 10:30:15 TRACE Parameter: username=john.smith
    2024-02-14 10:30:15 TRACE Local variable: targetDN=null
    2024-02-14 10:30:15 TRACE Calling method: buildDN
    2024-02-14 10:30:15 TRACE Entering method: buildDN
    ... (hundreds more lines)
```

**Daily Volume Estimates (1000 accounts/day):**
```
ERROR:
  Single errors only
  ~10-100 KB/day (if errors occur)
  
WARN:
  Warnings + errors
  ~100-500 KB/day
  
INFO:
  ~100-500 MB/day
  Manageable, production-appropriate
  
DEBUG:
  ~1-10 GB/day
  Large, temporary use only
  
TRACE:
  ~10-100 GB/day
  Very large, rarely needed
```

---

## Logging Level Best Practices

### **Production Guidelines**

**Default Configuration:**
```
Set once, leave running:
  
  Connector: INFO
  VA Service: INFO
  ISC Communication: INFO or WARN
  
Benefits:
  ✓ Always have operational visibility
  ✓ Can review past operations
  ✓ Audit trail available
  ✓ Minimal performance impact
  ✓ Manageable log size
```

**Troubleshooting Process:**
```
Step 1: Issue reported
  Current level: INFO
  
Step 2: Enable DEBUG
  Change: INFO → DEBUG
  Apply immediately
  
Step 3: Reproduce issue
  Trigger provisioning operation
  Collect detailed logs
  
Step 4: Analyze logs
  Review DEBUG output
  Identify root cause
  
Step 5: Resolve issue
  Apply fix
  Test resolution
  
Step 6: Disable DEBUG
  Change: DEBUG → INFO
  Return to normal
  
Duration: Hours to 1-2 days max
Never leave DEBUG on indefinitely
```

### **Troubleshooting Decision Tree**
```
Issue occurs
  ↓
Is INFO level logging enabled?
  ├─ No → Enable INFO first
  │       Check if sufficient
  │       If not, proceed to DEBUG
  │
  └─ Yes → Review INFO logs
           ↓
           Do INFO logs show enough detail?
           ├─ Yes → Diagnose from INFO logs
           │        No DEBUG needed
           │
           └─ No → Enable DEBUG
                   Reproduce issue
                   Collect DEBUG logs
                   Analyze detailed output
                   ↓
                   Is DEBUG sufficient?
                   ├─ Yes → Fix issue
                   │        Disable DEBUG
                   │
                   └─ No → Consider TRACE
                           (Very rare)
                           Or contact support
```

---

## Practice Exercise

**Question:** You're seeing intermittent AD account creation failures (1 in 100). Current logging is INFO. What logging level should you use and why?

<details>
<summary>Answer</summary>

**Recommended: Enable DEBUG Logging (Temporarily)**

---

**Analysis of the Situation:**

**Problem Characteristics:**
```
Intermittent failure:
  ✓ Occurs occasionally (1 in 100)
  ✓ Not consistent
  ✓ Hard to predict
  ✓ Need to capture when it occurs
  
Current logging: INFO
  ✓ Shows "Account creation failed"
  ✗ Doesn't show detailed error
  ✗ Not enough to diagnose root cause
```

---

**Why DEBUG is Needed:**

**INFO Level Insufficient:**
```
What INFO shows:
  2024-02-14 10:30:15 INFO Starting account creation: john.smith
  2024-02-14 10:30:17 INFO Account creation failed
  
What's missing:
  ✗ What exact command was executed?
  ✗ What exact error occurred?
  ✗ What parameters were used?
  ✗ Where in the process did it fail?
  
Result: Cannot diagnose root cause
```

**DEBUG Level Provides:**
```
What DEBUG shows:
  2024-02-14 10:30:15 DEBUG Starting account creation
  2024-02-14 10:30:15 DEBUG Input parameters: {username=john.smith, firstName=John, lastName=Smith}
  2024-02-14 10:30:15 DEBUG Connecting to: dc01.company.com:636
  2024-02-14 10:30:15 DEBUG Bind DN: CN=svc_sailpoint,OU=Service,DC=company,DC=com
  2024-02-14 10:30:15 DEBUG Bind successful
  2024-02-14 10:30:16 DEBUG Determining target OU
  2024-02-14 10:30:16 DEBUG Department=Sales maps to OU=Sales,OU=Users,DC=company,DC=com
  2024-02-14 10:30:16 DEBUG Building PowerShell command
  2024-02-14 10:30:16 DEBUG Command: New-ADUser -Name "john.smith" -GivenName "John" -Surname "Smith" -SamAccountName "john.smith" -Path "OU=Sales,OU=Users,DC=company,DC=com" -Enabled $true
  2024-02-14 10:30:17 DEBUG Executing PowerShell command
  2024-02-14 10:30:17 ERROR PowerShell execution failed
  2024-02-14 10:30:17 ERROR Error: New-ADUser : The object name has bad syntax
  2024-02-14 10:30:17 ERROR LDAP Error 34: INVALID_DN_SYNTAX
  2024-02-14 10:30:17 ERROR Failed OU: OU=Sales,OU=Users,DC=company,DC=com
  
Now can see:
  ✓ Exact command executed
  ✓ Exact error (INVALID_DN_SYNTAX)
  ✓ Problematic OU path
  ✓ Can investigate OU configuration
```

---

**Why NOT Other Levels:**

**ERROR Level:**
```
✗ Only shows error occurred
✗ No context
✗ No details
✗ Cannot diagnose
✗ Too limited
```

**WARN Level:**
```
✗ Shows warnings and errors
✗ Still no detailed operation logs
✗ Cannot see execution flow
✗ Too limited
```

**INFO Level (Current):**
```
✗ Shows operation started/ended
✗ Shows error occurred
✗ Not enough detail for intermittent issues
✗ Cannot see exact failure point
```

**DEBUG Level:**
```
✓ Shows detailed execution
✓ Shows exact commands
✓ Shows exact errors
✓ Shows parameters
✓ Sufficient for diagnosis
✓ Recommended choice
```

**TRACE Level:**
```
✓ Even more detail than DEBUG
✗ Overkill for this issue
✗ Too much data (10x+ more than DEBUG)
✗ Harder to analyze
✗ Unnecessary overhead
✗ Not recommended
```

---

**Implementation Plan:**

**Step 1: Enable DEBUG Logging**
```
Action:
  Admin → Virtual Appliances → VA-PROD-01
  Settings → Logging
  Active Directory Connector: DEBUG
  Save
  
Or via config file:
  Edit: /opt/sailpoint/share/config/connector.properties
  Set: connector.ad.log.level=DEBUG
  Restart: systemctl restart ccg
```

**Step 2: Monitor for Failures**
```
With DEBUG enabled:
  - Let system run
  - Process 100s of accounts
  - Wait for next failure (1 in 100)
  - Detailed logs captured when it occurs
  
Duration: 
  If provisioning 100/day → expect failure every 1-2 days
  Keep DEBUG enabled for 3-7 days to catch multiple failures
```

**Step 3: Analyze DEBUG Logs When Failure Occurs**
```
When next failure happens:
  1. Check ISC activity for failure timestamp
  2. Extract VA logs around that time
  3. Search for failed account in connector.log:
     grep "john.smith" connector.log
     
  4. Review detailed DEBUG output
  5. Identify exact error and context
  6. Compare failed operations to successful ones
  7. Identify pattern or root cause
```

**Step 4: Identify Root Cause from DEBUG Logs**
```
Possible findings with DEBUG:

Example 1: OU Path Issue (Intermittent)
  DEBUG shows: OU=Sales,OU=Users,DC=company,DC=com
  Error: INVALID_DN_SYNTAX
  
  Analysis: Sometimes OU path has trailing space
  Root Cause: Data quality issue in source system
  Fix: Trim OU paths in provisioning policy
  
Example 2: Duplicate Account (Intermittent)
  DEBUG shows: Creating account: john.smith
  Error: ENTRY_ALREADY_EXISTS
  
  Analysis: Sometimes account already exists
  Root Cause: Correlation not catching existing accounts
  Fix: Improve correlation logic
  
Example 3: Connection Timeout (Intermittent)
  DEBUG shows: Connecting to: dc01.company.com
  Error: Connection timeout after 30 seconds
  
  Analysis: Occasional network issues
  Root Cause: Network latency spikes
  Fix: Increase timeout, add retry logic
  
Example 4: Missing Attribute (Intermittent)
  DEBUG shows: Parameters: {lastName=null}
  Error: Required field missing
  
  Analysis: Sometimes lastName is null
  Root Cause: Data quality - some records missing lastName
  Fix: Add validation, provide default value
```

**Step 5: Resolve Issue**
```
Based on root cause:
  1. Apply fix (e.g., trim OU paths, improve correlation)
  2. Test fix with DEBUG still enabled
  3. Verify issue resolved
  4. Monitor for several days
```

**Step 6: Disable DEBUG Logging**
```
After issue confirmed resolved:
  
  Action:
    Admin → Virtual Appliances → VA-PROD-01
    Settings → Logging
    Active Directory Connector: INFO (from DEBUG)
    Save
    
  Why disable:
    ✓ Issue resolved
    ✓ No longer need detailed logs
    ✓ Reduce log volume
    ✓ Reduce disk usage
    ✓ Reduce performance overhead
    
  Result:
    Return to normal INFO level
    Still have operational visibility
    Reasonable log size
```

---

**Why This Approach Works:**

**Advantages:**
```
✓ DEBUG captures intermittent issues
  - Logs every operation in detail
  - When rare failure occurs, full details captured
  - Can review after the fact
  
✓ Temporary use
  - Enable for troubleshooting period (days)
  - Disable after resolution
  - Manageable disk usage
  
✓ Detailed diagnosis
  - See exact error
  - See exact parameters
  - See execution flow
  - Identify root cause
```

**Alternative Approaches Considered:**

**Keep INFO level:**
```
✗ Problem: Not enough detail
✗ Will see failure but not cause
✗ Cannot diagnose intermittent issues
✗ Will need to enable DEBUG anyway
```

**Use TRACE level:**
```
✗ Problem: Too much data
✗ 10x+ more logs than DEBUG
✗ Harder to analyze
✗ Unnecessary detail
✗ Greater performance impact
```

**Enable DEBUG only when failure occurs:**
```
✗ Problem: Cannot predict when failure occurs
✗ Miss the detailed logs of the failure
✗ By the time you enable DEBUG, failure already happened
✗ Must enable preemptively
```

---

**Timeline:**
```
Day 0: Issue reported (1 in 100 failures)
  Current: INFO level
  Action: Enable DEBUG

Day 1-7: Monitoring period
  DEBUG enabled
  Process ~100 accounts/day
  Expect 1 failure every 1-2 days
  Capture detailed logs when failures occur
  
Day 3: First failure captured with DEBUG
  Review DEBUG logs
  Identify pattern
  
Day 5: Second failure captured
  Confirm pattern/root cause
  
Day 6: Apply fix
  Test with DEBUG still enabled
  
Day 7-10: Verify fix
  Monitor for failures
  None occur
  
Day 10: Issue resolved
  Disable DEBUG
  Return to INFO level
  
Total DEBUG duration: 10 days (acceptable)
```

---

**Summary:**
```
Issue: Intermittent AD account creation failures (1 in 100)
Current Logging: INFO (insufficient)
Recommended: Enable DEBUG temporarily

Why DEBUG:
  ✓ Provides detailed execution logs
  ✓ Captures exact errors and parameters
  ✓ Sufficient for diagnosing intermittent issues
  ✓ Not as overwhelming as TRACE
  
Process:
  1. Enable DEBUG on AD connector
  2. Monitor for 3-7 days (capture multiple failures)
  3. Analyze detailed logs when failures occur
  4. Identify root cause
  5. Apply fix
  6. Verify resolution
  7. Disable DEBUG (return to INFO)
  
Duration: Temporary (days to 2 weeks max)
Result: Root cause identified and resolved
```

**Exam Tip:** For intermittent issues, enable DEBUG temporarily to capture detailed logs when rare failures occur. INFO is insufficient for diagnosing intermittent problems. Always disable DEBUG after issue resolved.
</details>

---

## Section Summary

**Core Concepts for Certification:**

✅ **Logging Levels (Least to Most Verbose):**
- **OFF**: No logging (never use)
- **ERROR**: Only errors (too limited)
- **WARN**: Warnings + errors (still limited)
- **INFO**: Operations + warnings + errors (production default)
- **DEBUG**: Detailed debug + all above (troubleshooting)
- **TRACE**: Very detailed + all above (rarely needed)

✅ **Production Standard:**
- **Normal operations**: INFO level
- **Active troubleshooting**: DEBUG (temporary)
- **After resolution**: Return to INFO

✅ **Log Volume:**
- **INFO**: ~100-500 MB/day (manageable)
- **DEBUG**: ~1-10 GB/day (temporary only)
- **TRACE**: ~10-100 GB/day (rarely needed)

✅ **When to Use Each:**
- **INFO**: Production, monitoring, normal operations
- **DEBUG**: Troubleshooting, testing, support cases
- **TRACE**: Developer debugging, very rare issues

✅ **Key Principles:**
- INFO is production default (always enabled)
- DEBUG for troubleshooting (temporary)
- Disable DEBUG after issue resolved
- TRACE rarely needed (DEBUG usually sufficient)

✅ **What Each Level Shows:**
- **INFO**: Operation summaries, success/failure
- **DEBUG**: Detailed execution, API calls, SQL, commands
- **TRACE**: Framework internals, every function call

**Exam Focus Areas:**
- Know INFO is production default
- Understand DEBUG for troubleshooting only
- Remember to disable DEBUG after resolution
- Know log levels are hierarchical
- Understand DEBUG = detailed, TRACE = too detailed
- Know INFO provides operational visibility
- Remember DEBUG temporarily, not permanently

---

**End of Section 5.4.2: Logging Levels and When to Use Them**

**Next:** Section 5.4.3: Searching for Provisioning Errors

---

**Study Tips:**
- **Production**: INFO always
- **Troubleshooting**: DEBUG temporarily
- **Hierarchy**: DEBUG includes INFO, WARN, ERROR
- **Volume**: DEBUG = 10-100x more than INFO
- **After fix**: Always disable DEBUG
- **TRACE**: Rarely needed (DEBUG sufficient)
- **Remember**: INFO = normal, DEBUG = troubleshooting
