# 5.3.3 Channel Selection Criteria

**Learning Objective:** Understand the criteria and factors that determine the best provisioning channel for each scenario.

---

## Channel Selection Framework

**Key Decision Factors:**

| Factor | Impact on Channel Choice | Weight |
|--------|--------------------------|--------|
| **Source Location** | Cloud vs. On-premises | Critical |
| **Available Protocols** | API, LDAP, JDBC, SSH | High |
| **Performance Requirements** | Real-time vs. Batch | High |
| **Existing Infrastructure** | VA available or not | Medium |
| **Scalability Needs** | Volume of users | Medium |
| **Security Requirements** | Firewall rules, compliance | High |
| **Cost Considerations** | VA infrastructure costs | Medium |
| **Maintenance Burden** | Ongoing management effort | Medium |

**Exam Tip:** Source location is the primary factor. Cloud = Direct API, On-premises = VA. Then consider protocols, performance, and other factors.

---

## Criterion 1: Source Location

### **Cloud-Based Sources**

**Characteristics:**
```
✓ Accessible via internet
✓ SaaS applications
✓ Cloud-hosted services
✓ No physical infrastructure
```

**Recommended Channel: Direct API**

**Why:**
```
✓ ISC is cloud-based
✓ Direct cloud-to-cloud connection
✓ No intermediary needed
✓ Optimal performance
✓ Lower cost (no VA)
```

**Examples:**
```
Cloud Sources → Direct API:
  ✓ Salesforce
  ✓ Office 365 / Azure AD
  ✓ ServiceNow
  ✓ Workday
  ✓ Slack
  ✓ Zoom
  ✓ GitHub
  ✓ Box
  ✓ Dropbox
  ✓ Google Workspace
```

**Exception:**
```
Some hybrid scenarios:
  Azure AD Connect (sync to on-prem AD)
  → May use Cloud Gateway instead
  
  But generally: Cloud = Direct API
```

---

### **On-Premises Sources**

**Characteristics:**
```
✓ Behind corporate firewall
✓ On company network
✓ Not internet-accessible
✓ Physical infrastructure
```

**Recommended Channel: Virtual Appliance**

**Why:**
```
✓ Only way to reach on-prem from cloud
✓ Secure (outbound connections only)
✓ No inbound firewall rules needed
✓ Supports legacy protocols
✓ Required for network access
```

**Examples:**
```
On-Premises Sources → VA:
  ✓ Active Directory
  ✓ Exchange Server (on-prem)
  ✓ Oracle Database
  ✓ SQL Server
  ✓ SAP (on-prem)
  ✓ PeopleSoft
  ✓ Legacy mainframes
  ✓ Custom on-prem applications
```

**No Exception:**
```
On-premises always requires VA
Cannot use Direct API (network unreachable)
```

---

### **Hybrid Sources**

**Characteristics:**
```
✓ Partially cloud, partially on-prem
✓ Synchronized between environments
✓ Example: Azure AD + AD Connect
```

**Recommended Channel: Depends on target**

**Decision:**
```
If provisioning to cloud component:
  → Use Direct API or Cloud Gateway
  Example: Provision to Azure AD (cloud)
  
If provisioning to on-prem component:
  → Use Virtual Appliance
  Example: Provision to on-prem AD
  
Often use both:
  → Provision to Azure AD (Direct API)
  → Sync handles on-prem AD (via AD Connect)
```

**Example - Azure AD Hybrid:**
```
Scenario: Company has Azure AD + on-prem AD with AD Connect

Option 1: Provision to Azure AD (Cloud Gateway)
  ISC → Azure AD (via Direct API/Cloud Gateway)
  Azure AD → On-prem AD (via AD Connect sync)
  
  Benefit: One provisioning point (cloud)
  Limitation: Sync delay for on-prem

Option 2: Provision to On-Prem AD (VA)
  ISC → On-prem AD (via VA)
  On-prem AD → Azure AD (via AD Connect sync)
  
  Benefit: Direct control of on-prem
  Limitation: Still requires AD Connect

Option 3: Dual Provisioning (Both)
  ISC → Azure AD (Direct API)
  ISC → On-prem AD (VA)
  
  Benefit: Full control both sides
  Limitation: More complex, potential conflicts
  
Recommendation:
  Usually Option 1 (provision to Azure AD)
  Let AD Connect handle on-prem sync
```

---

## Criterion 2: Available Protocols

### **Modern APIs (REST/SOAP)**

**If source supports modern API:**
```
Characteristics:
  ✓ RESTful API available
  ✓ JSON/XML format
  ✓ Standard HTTP methods
  ✓ Well-documented
```

**Channel Selection:**
```
Cloud source with REST API:
  → Use Direct API
  
On-prem source with REST API:
  → Use VA + Web Services Connector
```

**Examples:**
```
REST API Sources:
  Cloud:
    ✓ Salesforce (REST API)
    ✓ ServiceNow (REST API)
    ✓ Custom cloud app (REST)
    → Direct API
    
  On-Premises:
    ✓ Custom on-prem app (REST)
    ✓ Internal web services
    → VA + Web Services
```

---

### **SCIM Protocol**

**If source supports SCIM:**
```
Characteristics:
  ✓ SCIM 2.0 standard
  ✓ Purpose-built for provisioning
  ✓ Consistent across vendors
  ✓ Industry standard
```

**Channel Selection:**
```
Always use Direct API (SCIM)
Regardless of other factors
SCIM is preferred when available
```

**Why prefer SCIM:**
```
✓ Standardized (same for all SCIM apps)
✓ Designed for provisioning (not general API)
✓ Reliable and well-tested
✓ Easy to configure (similar across apps)
✓ Widely supported
```

**Examples:**
```
SCIM-Enabled Sources:
  ✓ Slack → Direct API (SCIM)
  ✓ Zoom → Direct API (SCIM)
  ✓ GitHub → Direct API (SCIM)
  ✓ Atlassian → Direct API (SCIM)
  ✓ Dropbox → Direct API (SCIM)
  ✓ Box → Direct API (SCIM)
  
Even if vendor has custom API, use SCIM if available
```

---

### **LDAP Protocol**

**If source uses LDAP:**
```
Characteristics:
  ✓ Directory service
  ✓ LDAP protocol (389/636)
  ✓ Hierarchical structure
  ✓ Common for identity stores
```

**Channel Selection:**
```
Always requires Virtual Appliance
LDAP sources typically on-premises
```

**Examples:**
```
LDAP Sources:
  ✓ Active Directory → VA (LDAP/PowerShell)
  ✓ OpenLDAP → VA (LDAP)
  ✓ Oracle Internet Directory → VA (LDAP)
  ✓ IBM Directory Server → VA (LDAP)
  
Exception: Azure AD (cloud, not traditional LDAP)
  → Use Cloud Gateway or Direct API (Graph)
```

---

### **Database Protocols (JDBC/ODBC)**

**If source is a database:**
```
Characteristics:
  ✓ Relational database
  ✓ SQL queries
  ✓ JDBC/ODBC connectivity
  ✓ Table-based structure
```

**Channel Selection:**
```
Always requires Virtual Appliance
Databases typically on-premises
Use JDBC connector via VA
```

**Examples:**
```
Database Sources:
  ✓ Oracle Database → VA (JDBC)
  ✓ SQL Server → VA (JDBC)
  ✓ MySQL → VA (JDBC)
  ✓ PostgreSQL → VA (JDBC)
  ✓ DB2 → VA (JDBC)
  
Even if database cloud-hosted:
  → May still require VA for security
  → Or use Direct API if cloud DB has REST API
```

---

### **Legacy Protocols (SSH, Telnet, File-Based)**

**If source has limited connectivity:**
```
Characteristics:
  ✗ No modern API
  ✗ No LDAP
  ✗ No database access
  ✓ Has SSH or command-line
  ✓ Or file-based integration
```

**Channel Selection:**
```
Virtual Appliance with custom integration:
  → VA + SSH Connector
  → VA + File-Based Integration
  → VA + Custom Scripts
```

**Examples:**
```
Legacy Systems:
  ✓ Unix/Linux systems → VA (SSH)
  ✓ AS/400 Mainframe → VA (SSH or File)
  ✓ Legacy HR system → VA (File-Based)
  ✓ Proprietary systems → VA (Custom)
```

---

## Criterion 3: Performance Requirements

### **Real-Time Provisioning Needed**

**Requirements:**
```
✓ Provision within seconds
✓ Immediate access required
✓ User-facing operations
✓ High priority
```

**Channel Selection:**
```
Prefer channels with fastest performance:

Best: Direct API (Cloud)
  Duration: 1-3 seconds
  Use when: Source is cloud-based
  
Good: Virtual Appliance
  Duration: 3-10 seconds
  Use when: Source is on-premises
  
Avoid: Batch/File-Based
  Duration: Minutes to hours
  Not suitable for real-time
```

**Examples:**
```
Real-Time Scenarios:
  
  New hire starts today:
    ✓ Direct API to Salesforce (2 sec)
    ✓ VA to Active Directory (5 sec)
    → Fast enough for day-one access
    
  Termination (security critical):
    ✓ Direct API to cloud apps (1-3 sec)
    ✓ VA to on-prem AD (3-5 sec)
    → Immediate access revocation
    
  User requests access:
    ✓ Direct API preferred (faster response)
    ✓ VA acceptable (still quick)
    → User gets access within minutes
```

---

### **Batch Processing Acceptable**

**Requirements:**
```
✓ Hourly or daily processing acceptable
✓ Bulk operations
✓ Lower priority
✓ Non-urgent changes
```

**Channel Selection:**
```
Any channel works, optimize for cost/simplicity:

Acceptable: File-Based Integration
  Duration: Hours (batch window)
  Use when: Legacy systems, bulk only
  
Acceptable: Scheduled Provisioning
  Duration: Next batch window
  Use when: Non-urgent, cost-sensitive
```

**Examples:**
```
Batch Scenarios:
  
  Bulk role assignment:
    → Queue for next batch
    → Process 1000s at once
    → Batch every 2 hours
    
  Attribute synchronization:
    → Not urgent
    → Update nightly
    → File-based acceptable
    
  Legacy system provisioning:
    → No real-time capability
    → CSV export/import
    → Daily batch process
```

---

## Criterion 4: Existing Infrastructure

### **Virtual Appliance Already Deployed**

**If VA exists:**
```
Current State:
  ✓ VA already running
  ✓ Configured and maintained
  ✓ Supporting other sources
  ✓ Operational and monitored
```

**Channel Selection Impact:**
```
Advantage for VA-based channels:
  ✓ Reuse existing infrastructure
  ✓ No additional deployment
  ✓ Familiar to operations team
  ✓ Marginal cost to add source
  
Decision:
  If source can use either VA or Direct API:
    → Consider reusing VA
    → Especially for similar sources
    
  If source requires specific channel:
    → Use required channel regardless
```

**Examples:**
```
Scenario: VA deployed for Active Directory

New requirement: Provision to SQL Server database
  Option 1: VA + JDBC (reuse VA)
    ✓ Same VA as AD
    ✓ No new infrastructure
    ✓ Quick to configure
    
  Option 2: Would Direct API work?
    ✗ SQL Server on-premises
    ✗ Direct API cannot reach
    → Must use VA anyway
    
  Decision: VA (required + existing)

New requirement: Provision to Salesforce
  Option 1: Direct API
    ✓ Faster (cloud-to-cloud)
    ✓ No VA dependency
    ✓ Simpler architecture
    
  Option 2: VA (reuse existing)
    ✗ Slower (extra hop)
    ✗ VA dependency
    ✗ Unnecessary complexity
    
  Decision: Direct API (better choice)
```

---

### **No Existing Infrastructure**

**If no VA:**
```
Current State:
  ✗ No VA deployed
  ✗ No on-premises infrastructure
  ✗ Cloud-only or greenfield
```

**Channel Selection Impact:**
```
Preference for Direct API:
  ✓ No infrastructure needed
  ✓ Lower cost (no VA)
  ✓ Faster to deploy
  ✓ Less to maintain
  
Only deploy VA if:
  ✓ Required (on-premises sources)
  ✓ Multiple sources need it
  ✓ Long-term requirement
```

**Decision Tree:**
```
No VA exists, need to provision to source:

1. Is source on-premises?
   YES → Must deploy VA (no choice)
   NO → Continue to 2
   
2. Can source use Direct API?
   YES → Use Direct API (preferred)
   NO → Continue to 3
   
3. How many sources need VA?
   One source only → Evaluate alternatives
   Multiple sources → Deploy VA
   
4. Is this long-term or temporary?
   Long-term → Deploy VA
   Temporary → Find alternative
```

---

## Criterion 5: Scalability Needs

### **Small Deployment (< 1,000 Users)**

**Characteristics:**
```
✓ Small user base
✓ Limited provisioning volume
✓ Low throughput requirements
```

**Channel Selection:**
```
Any channel works:
  → Focus on simplicity
  → Minimize infrastructure
  → Optimize for low maintenance
  
Prefer:
  ✓ Direct API (if cloud)
  ✓ Single VA (if on-prem)
  
Avoid:
  ✗ Complex multi-VA setups
  ✗ Over-engineering
```

**Example:**
```
100-person startup:
  
  Sources:
    - Google Workspace (cloud) → Direct API
    - Slack (cloud) → Direct API (SCIM)
    - GitHub (cloud) → Direct API (SCIM)
    
  No on-premises sources
  No VA needed
  Simple, low-cost setup
```

---

### **Medium Deployment (1,000 - 10,000 Users)**

**Characteristics:**
```
✓ Medium user base
✓ Moderate provisioning volume
✓ Standard throughput needs
```

**Channel Selection:**
```
Standard approach:
  → Direct API for cloud sources
  → Single VA for on-prem sources
  → Monitor VA performance
  
VA Capacity:
  ✓ Single VA handles 5,000-10,000 users
  ✓ Adequate for most medium deployments
```

**Example:**
```
5,000-person company:
  
  Sources:
    - Active Directory (on-prem) → VA-PROD-01
    - Exchange (on-prem) → VA-PROD-01 (same)
    - SQL Database (on-prem) → VA-PROD-01 (same)
    - Salesforce (cloud) → Direct API
    - Office 365 (cloud) → Direct API
    - ServiceNow (cloud) → Direct API
    
  One VA serves all on-prem sources
  Direct API for all cloud sources
  Standard architecture
```

---

### **Large Deployment (> 10,000 Users)**

**Characteristics:**
```
✓ Large user base
✓ High provisioning volume
✓ High throughput requirements
✓ Geographic distribution
```

**Channel Selection:**
```
Scaled approach:
  → Direct API for cloud (handles scale)
  → Multiple VAs for on-prem (load balance)
  → Regional deployment
  → High availability
  
VA Architecture:
  ✓ Multiple VAs (3+)
  ✓ Geographic distribution
  ✓ Load balancing
  ✓ Redundancy
```

**Example:**
```
50,000-person global enterprise:
  
  VA Deployment:
    - VA-US-01: North America (15,000 users)
    - VA-US-02: North America (backup/load balance)
    - VA-EU-01: Europe (20,000 users)
    - VA-EU-02: Europe (backup)
    - VA-APAC-01: Asia Pacific (15,000 users)
    
  Cloud Sources:
    - All via Direct API (scales easily)
    
  Architecture:
    ✓ Regional VAs for on-prem sources
    ✓ Load balancing across VAs
    ✓ High availability (2 VAs per region)
    ✓ Disaster recovery
```

---

## Criterion 6: Security Requirements

### **Firewall Restrictions**

**Strict Firewall Policy:**
```
Requirement: No inbound connections allowed

Channel Impact:
  ✓ Virtual Appliance perfect (outbound only)
  ✗ Cannot use inbound channels
  
Why VA works:
  ✓ VA initiates all connections
  ✓ Outbound HTTPS to ISC
  ✓ No inbound rules needed
  ✓ Security-approved architecture
```

**Example:**
```
Company policy: No inbound firewall rules

On-premises AD provisioning:
  ✓ VA initiates outbound to ISC (443)
  ✓ VA connects locally to AD (LDAP 389/636)
  ✓ No inbound connections
  ✓ Complies with security policy
```

---

### **Data Residency Requirements**

**Regulatory Constraint:**
```
Requirement: Data cannot leave country/region

Channel Impact:
  ? Direct API may route through cloud
  ✓ VA processes data locally
  ✓ Regional VA deployment
  
Solution:
  → Deploy VA in required region
  → Data processed locally
  → Only metadata sent to ISC
```

**Example:**
```
EU GDPR requirement: Data stays in EU

Solution:
  ✓ Deploy VA in EU data center
  ✓ VA processes EU users locally
  ✓ Minimal data sent to ISC (metadata only)
  ✓ Complies with GDPR
```

---

### **Compliance Standards**

**Regulatory Requirements:**
```
SOX, HIPAA, PCI-DSS, etc.

Channel Selection:
  → Choose channel with best audit trail
  → Ensure logging and monitoring
  → Verify encryption standards
  
All channels support:
  ✓ Audit logging
  ✓ TLS encryption
  ✓ Certificate-based auth
  ✓ Compliance requirements
```

---

## Criterion 7: Cost Considerations

### **Infrastructure Costs**

**Virtual Appliance Costs:**
```
VA Infrastructure:
  - Server hardware/VM ($2,000-5,000)
  - Windows Server license ($500-1,000)
  - Ongoing maintenance (IT time)
  - Monitoring tools
  - High availability (2x cost)
  
Annual TCO: $5,000-10,000 per VA
```

**Direct API Costs:**
```
Direct API:
  - No infrastructure needed
  - No server costs
  - No maintenance overhead
  - Included in ISC subscription
  
Annual TCO: $0 additional
```

**Cost Comparison:**
```
Cloud Source Provisioning:
  Direct API: $0
  VA: $5,000+ (unnecessary)
  Savings: $5,000+ per year
  
  Decision: Use Direct API
  
On-Premises Source:
  VA: $5,000+ (required)
  Direct API: Not possible
  
  Decision: Must use VA
```

---

### **Operational Costs**

**Ongoing Maintenance:**
```
Direct API:
  ✓ Minimal maintenance (SailPoint manages)
  ✓ Automatic updates
  ✓ Low IT overhead
  
Virtual Appliance:
  ✗ VA patching required
  ✗ OS updates needed
  ✗ Monitoring required
  ✗ Higher IT overhead
```

**Decision Impact:**
```
When choice exists:
  → Direct API saves operational costs
  → Lower long-term TCO
  → Less IT burden
  
When VA required:
  → Accept operational costs
  → Plan for ongoing maintenance
  → Budget for IT resources
```

---

## Criterion 8: Time to Deploy

### **Rapid Deployment Needed**

**Urgent Requirement:**
```
Need provisioning live in days/weeks

Channel Selection:
  Fastest: Direct API
    - Configure in ISC
    - Test
    - Deploy
    Time: Hours to 1-2 days
    
  Slower: Virtual Appliance
    - Procure server/VM
    - Install OS
    - Install VA software
    - Configure network
    - Configure connector
    - Test
    - Deploy
    Time: 1-2 weeks
```

**Example:**
```
Urgent: M&A integration in 2 weeks

Cloud Sources:
  ✓ Use Direct API
  ✓ Configure in 1-2 days
  ✓ Fast deployment
  
On-Premises Sources:
  ✓ Deploy VA (1 week)
  ✓ Configure (2-3 days)
  ✓ Test (2-3 days)
  ✓ Total: ~2 weeks (tight but possible)
```

---

### **Standard Timeline**

**Normal Project Schedule:**
```
Deployment over months

Channel Selection:
  → Choose best long-term option
  → Don't optimize for speed alone
  → Consider all factors
  
Timeline not a constraint
```

---

## Channel Selection Decision Matrix

### **Scoring System**

**Rate each factor 1-10:**

| Factor | Weight | Direct API Score | VA Score | SCIM Score |
|--------|--------|------------------|----------|------------|
| Source is cloud | 10 | 10 | 0 | 10 |
| Source is on-prem | 10 | 0 | 10 | 0 |
| Real-time needed | 8 | 10 | 7 | 10 |
| No infrastructure | 7 | 10 | 0 | 10 |
| Low maintenance | 6 | 10 | 3 | 10 |
| Fast deployment | 5 | 10 | 3 | 10 |
| Low cost | 5 | 10 | 3 | 10 |
| Scalability | 4 | 10 | 6 | 10 |

**Calculate weighted score for each channel, choose highest**

---

## Practice Exercise

**Question:** You need to provision to the following sources: (1) Salesforce (cloud, has SCIM), (2) On-prem Oracle database, (3) Slack (cloud, has SCIM). What channel for each and why?

<details>
<summary>Answer</summary>

**Channel Recommendations:**

---

**Source 1: Salesforce (Cloud, has SCIM)**

**Recommended Channel: Direct API (SCIM preferred, but Salesforce has native connector)**

**Analysis:**

**Available Options:**
```
Option A: Direct API (Native Salesforce Connector)
  ✓ SailPoint has native connector
  ✓ Optimized for Salesforce
  ✓ Full feature support
  ✓ Well-tested and reliable
  
Option B: Direct API (SCIM)
  ✓ Salesforce supports SCIM 2.0
  ✓ Standard protocol
  ✓ Also valid choice
  
Option C: Virtual Appliance
  ✗ Unnecessary (Salesforce is cloud)
  ✗ Adds complexity and cost
  ✗ Slower performance
```

**Decision: Direct API (Native Connector)**

**Reasoning:**
```
Why Native over SCIM:
  ✓ Native connector more feature-rich
  ✓ Salesforce-specific optimizations
  ✓ Better tested by SailPoint
  ✓ Handles Salesforce-specific features
  
  SCIM would also work, but native is better
```

**Criteria Evaluation:**
```
✓ Source Location: Cloud (Direct API suitable)
✓ Protocol: REST API available (native connector)
✓ Performance: Real-time (1-3 seconds)
✓ Infrastructure: None needed
✓ Cost: No additional cost
✓ Maintenance: Low (SailPoint manages)
✓ Deployment: Fast (hours to configure)
✓ Scalability: High (cloud-to-cloud)

Score: 10/10 for Direct API
```

**Implementation:**
```
1. Configure Salesforce Source in ISC
   Connection Type: Direct API
   Connector: Salesforce
   
2. Create Connected App in Salesforce
   OAuth 2.0 enabled
   
3. Configure in ISC
   OAuth credentials
   Test connection
   
4. Configure Provisioning
   Enable: Create, Update, Disable
   Map attributes
   
5. Test and Deploy
   Duration: 2-4 hours
```

---

**Source 2: On-Premises Oracle Database**

**Recommended Channel: Virtual Appliance (JDBC Connector)**

**Analysis:**

**Available Options:**
```
Option A: Direct API
  ✗ Database is on-premises
  ✗ Not accessible from internet
  ✗ Behind corporate firewall
  ✗ Cannot use Direct API
  
Option B: Virtual Appliance (JDBC)
  ✓ VA can reach on-prem database
  ✓ JDBC connector available
  ✓ Secure (outbound connections)
  ✓ Only viable option
  
Option C: SCIM
  ✗ Oracle database doesn't support SCIM
  ✗ Not applicable
```

**Decision: Virtual Appliance (JDBC)**

**Reasoning:**
```
Why VA Required:
  ✓ Database on-premises (not cloud)
  ✓ No internet access (behind firewall)
  ✓ VA is only way to reach it
  ✓ JDBC is standard database protocol
  
  No alternative exists
```

**Criteria Evaluation:**
```
✓ Source Location: On-premises (VA required)
✓ Protocol: JDBC (VA supports it)
✓ Performance: Adequate (3-10 seconds)
✓ Infrastructure: VA needed (deploy if not exists)
✓ Cost: VA infrastructure cost ($5,000+)
✓ Maintenance: Medium (VA upkeep)
✓ Deployment: Slower (1-2 weeks if new VA)
✓ Scalability: Good (VA handles 5,000+ users)

Score: VA is only option (required)
```

**Implementation:**
```
1. Deploy Virtual Appliance (if not exists)
   Install on Windows Server
   On corporate network
   Can reach Oracle database
   
2. Configure Oracle Source in ISC
   Source Type: JDBC
   Channel: Via Virtual Appliance
   VA: VA-PROD-01
   
3. Configure JDBC Connection
   Driver: Oracle JDBC Driver
   Connection String: jdbc:oracle:thin:@oracledb:1521:PROD
   Service Account: sailpoint_provisioning
   
4. Configure Provisioning SQL
   Create: INSERT INTO users (...)
   Update: UPDATE users SET ... WHERE user_id = ?
   Disable: UPDATE users SET status = 'INACTIVE' WHERE user_id = ?
   Delete: DELETE FROM users WHERE user_id = ?
   
5. Test Provisioning
   Create test user
   Verify in database
   
6. Deploy
   Duration: 1-2 weeks (if new VA)
   Duration: 2-3 days (if VA exists)
```

**VA Configuration:**
```
VA Details:
  Name: VA-PROD-01
  Location: Corporate network (can reach Oracle)
  OS: Windows Server 2019
  
Connections:
  Outbound: HTTPS to ISC (443)
  Local: Oracle database (1521)
  
Security:
  ✓ No inbound firewall rules
  ✓ VA initiates all connections
  ✓ Service account with limited permissions
```

---

**Source 3: Slack (Cloud, has SCIM)**

**Recommended Channel: Direct API (SCIM 2.0)**

**Analysis:**

**Available Options:**
```
Option A: Direct API (SCIM 2.0)
  ✓ Slack supports SCIM 2.0
  ✓ Industry standard protocol
  ✓ Purpose-built for provisioning
  ✓ Recommended by Slack
  
Option B: Direct API (Slack Custom API)
  ✓ Slack has custom APIs
  ✗ More complex than SCIM
  ✗ SCIM preferred
  
Option C: Virtual Appliance
  ✗ Unnecessary (Slack is cloud)
  ✗ Adds complexity
  ✗ No benefit
```

**Decision: Direct API (SCIM 2.0)**

**Reasoning:**
```
Why SCIM:
  ✓ Slack explicitly supports SCIM 2.0
  ✓ Standard protocol for provisioning
  ✓ Simple to configure
  ✓ Reliable and well-tested
  ✓ Consistent with other SCIM apps
  
  When SCIM available, always use it
```

**Criteria Evaluation:**
```
✓ Source Location: Cloud (Direct API suitable)
✓ Protocol: SCIM 2.0 (preferred protocol)
✓ Performance: Real-time (1-2 seconds)
✓ Infrastructure: None needed
✓ Cost: No additional cost
✓ Maintenance: Low (SailPoint manages)
✓ Deployment: Fast (hours to configure)
✓ Scalability: High (cloud-to-cloud)

Score: 10/10 for Direct API (SCIM)
```

**Implementation:**
```
1. Enable SCIM in Slack
   Slack Admin Console
   Settings → Authentication
   Enable SCIM provisioning
   Generate SCIM token
   
2. Configure Slack Source in ISC
   Connection Type: Direct API (SCIM 2.0)
   SCIM Endpoint: https://api.slack.com/scim/v2
   Authentication: Bearer Token
   Token: [from Slack]
   
3. Configure Attribute Mapping
   ISC → SCIM:
     email → userName
     firstName → name.givenName
     lastName → name.familyName
     email → emails[0].value
     cloudLifecycleState → active
     
4. Configure Provisioning
   Enable: Create, Update, Disable
   Operations: Standard SCIM
   
5. Test and Deploy
   Create test user via SCIM
   Verify in Slack workspace
   Duration: 1-2 hours
```

**SCIM Benefits:**
```
Why SCIM for Slack:
  ✓ Slack designed SCIM for provisioning
  ✓ More reliable than custom APIs
  ✓ Standard operations (POST, PUT, PATCH, DELETE)
  ✓ Consistent with other SCIM apps
  ✓ Easy to configure (template available)
  
  Future-proof:
    Can add Zoom, GitHub (also SCIM)
    Same configuration pattern
```

---

**Complete Architecture Summary:**
```
                    ISC (Cloud)
                         │
         ┌───────────────┼───────────────┐
         │               │               │
    Direct API      VA-PROD-01      Direct API
    (Native)         (JDBC)          (SCIM)
         │               │               │
         ↓               ↓               ↓
    Salesforce      Oracle DB         Slack
     (Cloud)        (On-Prem)        (Cloud)


Channel Summary:
  ✓ Salesforce: Direct API (native connector)
  ✓ Oracle DB: VA (JDBC) - required for on-prem
  ✓ Slack: Direct API (SCIM 2.0)
  
  2 Direct API (cloud sources)
  1 VA (on-prem source)
```

---

**Decision Summary Table:**

| Source | Location | Protocol | Channel | Reasoning |
|--------|----------|----------|---------|-----------|
| **Salesforce** | Cloud | REST/SCIM | Direct API (Native) | Native connector optimal |
| **Oracle DB** | On-prem | JDBC | VA (JDBC) | Only option for on-prem DB |
| **Slack** | Cloud | SCIM 2.0 | Direct API (SCIM) | SCIM is standard for Slack |

---

**Deployment Timeline:**
```
Week 1:
  Days 1-2: Configure Salesforce (Direct API)
    ✓ Fast setup
    ✓ Test and deploy
    
  Days 3-5: Deploy VA for Oracle
    ✓ Install VA (if needed)
    ✓ Configure JDBC
    ✓ Test database connection
    
  Day 5: Configure Slack (Direct API/SCIM)
    ✓ Quick setup (hours)
    ✓ Test and deploy
    
Week 2:
  Days 1-3: Test all three sources
    ✓ End-to-end provisioning
    ✓ Verify all operations
    
  Days 4-5: Deploy to production
    ✓ Enable for all users
    ✓ Monitor
```

---

**Cost Analysis:**
```
Salesforce (Direct API):
  Infrastructure: $0
  Maintenance: Low
  Annual Cost: $0
  
Oracle DB (VA):
  Infrastructure: $5,000 (VA deployment)
  Maintenance: Medium
  Annual Cost: $5,000-7,000
  
Slack (Direct API/SCIM):
  Infrastructure: $0
  Maintenance: Low
  Annual Cost: $0
  
Total: $5,000-7,000 (VA only)
```

---

**Optimization Notes:**
```
If deploying VA for Oracle:
  ✓ Can reuse same VA for other on-prem sources
  ✓ Active Directory (add to same VA)
  ✓ SQL Server (add to same VA)
  ✓ Custom on-prem apps (add to same VA)
  
  Marginal cost to add additional sources to existing VA
  
Cloud sources:
  ✓ Always use Direct API when available
  ✓ No infrastructure cost
  ✓ Fastest performance
  ✓ Lowest maintenance
```

**Exam Tip:** Cloud sources use Direct API (Salesforce native or SCIM for Slack). On-premises database requires VA with JDBC. Choose SCIM when available (Slack), native connector when available (Salesforce).
</details>

---

## Section Summary

**Core Concepts for Certification:**

✅ **Primary Selection Criteria:**
- **Source Location**: Cloud → Direct API, On-prem → VA (most critical)
- **Available Protocols**: SCIM preferred, REST/SOAP good, LDAP/JDBC require VA
- **Performance Needs**: Real-time → Direct API or VA, Batch → Any channel
- **Existing Infrastructure**: Reuse VA if available, deploy only if needed

✅ **Decision Priority:**
1. **Location** (cloud vs. on-prem) - eliminates options
2. **Protocol** (SCIM, REST, LDAP, JDBC) - determines capability
3. **Performance** (real-time vs. batch) - influences choice
4. **Cost** (infrastructure, maintenance) - optimization factor

✅ **Channel Preferences:**
- **SCIM**: Always prefer when available (standard protocol)
- **Direct API**: Prefer for cloud sources (fast, simple, low cost)
- **Virtual Appliance**: Required for on-premises (only option)
- **File-Based**: Last resort for legacy (batch only)

✅ **Key Decision Points:**
- Cloud source with SCIM → Direct API (SCIM)
- Cloud source without SCIM → Direct API (native/REST)
- On-prem with API → VA + Web Services
- On-prem database → VA + JDBC
- On-prem directory → VA + LDAP
- Legacy system → VA + custom integration

✅ **Evaluation Factors:**
- **Technical**: Location, protocols, performance
- **Operational**: Infrastructure, maintenance, deployment time
- **Financial**: Infrastructure costs, ongoing costs, TCO
- **Strategic**: Scalability, security, compliance

**Exam Focus Areas:**
- Know source location is primary decision factor
- Understand protocol determines channel capability
- Remember SCIM is preferred when available
- Know VA required for all on-premises sources
- Understand cost/benefit of Direct API vs. VA
- Recognize multiple criteria influence final decision

---

**End of Section 5.3: Provisioning Channels**

**Completed:**
- ✅ 5.3.1: Available Provisioning Channels
- ✅ 5.3.2: Use Cases for Each Channel
- ✅ 5.3.3: Channel Selection Criteria

**Next:** Section 5.4: Provisioning Troubleshooting

---

**Study Tips:**
- **Primary rule**: Cloud = Direct API, On-prem = VA
- **SCIM rule**: Use SCIM when available (Slack, Zoom, GitHub)
- **Protocol rule**: REST → Direct API or VA+Web Services, LDAP/JDBC → VA
- **Cost rule**: Direct API = $0, VA = $5,000+
- **Performance rule**: Direct API faster than VA (fewer hops)
- **Decision process**: Location → Protocol → Performance → Cost


