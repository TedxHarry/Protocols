![Cover](./covers/2.08-pagination-sorting.png)
# ğŸ† Section 2.08 | SCIM in Practice | â€œPagination & Sortingâ€

When working with SCIM, you rarely deal with just one or two users.  
Enterprise systems often manage **tens of thousands** of identities... which means your integration must handle **large result sets** efficiently.  

Thatâ€™s where **pagination** and **sorting** come in. These features ensure SCIM APIs return data in manageable chunks, while letting you order results for easier processing.  

---

## ğŸ“– Why Pagination & Sorting Matter  

- **Performance** â†’ Avoids timeouts and giant payloads.  
- **Scalability** â†’ Supports thousands of users without overloading servers.  
- **Consistency** â†’ Ensures reliable syncs across large datasets.  
- **Compliance** â†’ Sorting helps with predictable audits and reporting.  

---

## 1ï¸âƒ£ Pagination in SCIM  

Pagination is controlled by three main parameters:  

- `startIndex` â†’ the starting position (1-based index).  
- `count` â†’ how many results to return in one page.  
- `totalResults` â†’ returned by the server, tells you how many total items match.  

**Example: First 50 users**  

```http
GET /Users?startIndex=1&count=50
```

**Response:**  

```json
{
  "totalResults": 2350,
  "itemsPerPage": 50,
  "startIndex": 1,
  "Resources": [ ... ]
}
```

**Example: Next 50 users**  

```http
GET /Users?startIndex=51&count=50
```

---

## 2ï¸âƒ£ Sorting in SCIM  

Sorting makes it easier to process results in a predictable order.  

Parameters:  
- `sortBy` â†’ which attribute to sort on.  
- `sortOrder` â†’ `ascending` (default) or `descending`.  

**Example: Get users sorted by familyName (A â†’ Z)**  

```http
GET /Users?sortBy=name.familyName&sortOrder=ascending
```

**Example: Get groups sorted by displayName (Z â†’ A)**  

```http
GET /Groups?sortBy=displayName&sortOrder=descending
```

---

## 3ï¸âƒ£ Combining Pagination, Filtering & Sorting  

Real-world queries often mix these features.  

**Example: First 100 active Engineers, sorted by last name**  

```http
GET /Users?filter=active eq true and department eq "Engineering"&startIndex=1&count=100&sortBy=name.familyName&sortOrder=ascending
```

---

## âš ï¸ Common Pitfalls (and Impact)  

- âŒ **Assuming default page size** â†’ many SPs default to 100 or 200; donâ€™t rely on it.  
- âŒ **Not checking `totalResults`** â†’ you may miss data if you stop after one page.  
- âŒ **Large `count` values** â†’ can cause timeouts or rejected requests.  
- âŒ **Inconsistent sorting** â†’ some SPs donâ€™t guarantee stable ordering across pages.  
- âŒ **Unsupported sortBy fields** â†’ querying on attributes not indexed may fail.  

---

## âœ… Best Practices  

- Always **read `totalResults`** to know how many pages to request.  
- Choose a **reasonable count** (50â€“200) for stable performance.  
- Combine pagination with filtering to minimize payload size.  
- Donâ€™t assume every attribute is sortable... test with your SP.  
- Log `startIndex` and `count` values to troubleshoot sync issues.  

---

## ğŸ¢ Real-World Examples  

- **Provisioning Connector** â†’ Fetches all users in pages of 200, continues until `totalResults` reached.  
- **Audit Report** â†’ Sorted by `userName` to generate a clean export.  
- **Departmental Sync** â†’ Filters by department, sorts by last name, fetches in batches.  

---

## ğŸ“ Self-Check  

1ï¸âƒ£ What SCIM attributes control pagination?  
2ï¸âƒ£ How do you know when youâ€™ve retrieved all pages?  
3ï¸âƒ£ Why is it risky to use a very large `count` value?  
4ï¸âƒ£ Give an example of a query combining filter + pagination + sorting.  

---

## ğŸ¯ Final Takeaway  

Pagination and sorting turn SCIM from a toy protocol into an **enterprise-ready standard**.  

- Use `startIndex`, `count`, and `totalResults` to handle big datasets.  
- Use `sortBy` and `sortOrder` for predictable ordering.  
- Combine with filtering for precise, scalable syncs.  

ğŸ’¡ Reliable pagination and sorting are the backbone of **large-scale provisioning** and **compliance reporting**.  

---

## ğŸ”— Navigation  

ğŸ‘‰ Back: [2.07 Advanced Filtering & Query Parameters](2.07-advanced-filtering.md)  
ğŸ‘‰ Next: [2.09 Attribute Selection (`attributes` and `excludedAttributes`)](2.09-attribute-selection.md)  
