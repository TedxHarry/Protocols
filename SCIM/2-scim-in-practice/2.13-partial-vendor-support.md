![Cover](./covers/2.13-partial-vendor-support.png)

# ğŸ† Section 2.13 | SCIM in Practice | â€œDealing with Partial Vendor Implementationsâ€

SCIM is a **standard**, but in practice vendors often implement **only parts of the spec**.  
As an engineer, youâ€™ll face differences that can break integrations if youâ€™re not prepared.  

This section explains common gaps, how to detect them, and practical strategies to work around inconsistencies.  

---

## ğŸ“– Why Vendor Variations Happen  

- SCIM is **flexible** â†’ vendors choose what fits their product.  
- Some features are **expensive** to support (bulk, complex filters).  
- Vendors prioritize **business needs** over strict RFC compliance.  
- Different versions of SCIM libraries across platforms.  

Result â†’ no two SCIM integrations behave exactly the same.  

---

## 1ï¸âƒ£ Common Areas of Partial Support  

- **PATCH** â†’ some vendors only allow `replace`, not `add` or `remove`.  
- **DELETE** â†’ ignored or replaced with `active:false`.  
- **Bulk (`/Bulk`)** â†’ unsupported or heavily limited (max 100 ops).  
- **Filtering** â†’ only `eq` supported, others ignored.  
- **Sorting & Pagination** â†’ inconsistently implemented.  
- **Attributes** â†’ custom attributes dropped silently.  
- **Error Handling** â†’ plain HTTP errors instead of SCIM error schema.  

---

## 2ï¸âƒ£ Detecting Vendor Support Gaps  

- Check `/ServiceProviderConfig` â†’ lists supported features.  
- Read vendor API docs carefully.  
- Test incrementally â†’ try small requests before scaling up.  
- Observe error responses â†’ often reveal unsupported features.  

**Example: Check if PATCH supported**  

```http
GET /ServiceProviderConfig
```

**Response (excerpt):**  

```json
{
  "patch": { "supported": true },
  "bulk": { "supported": false },
  "filter": { "supported": true, "maxResults": 200 },
  "sort": { "supported": false }
}
```

---

## 3ï¸âƒ£ Hands-On Lab: Spotting Gaps  

### Step 1 â†’ Query Service Provider Config  

```http
GET /ServiceProviderConfig
```

### Step 2 â†’ Try Unsupported Operation  

If docs say `bulk` not supported â†’ send a Bulk request anyway.  

**Expected Response:**  

```json
{
  "schemas": ["urn:ietf:params:scim:api:messages:2.0:Error"],
  "status": "501",
  "scimType": "invalidSyntax",
  "detail": "Bulk operations are not supported."
}
```

### Step 3 â†’ Adjust Integration  

Fallback to multiple single operations if bulk is missing.  

---

## âš ï¸ Common Pitfalls (and Impact)  

- âŒ **Assuming full RFC compliance** â†’ integrations fail unexpectedly.  
- âŒ **Not testing early** â†’ only discover gaps during production rollout.  
- âŒ **Relying on custom attributes** â†’ silently ignored by SP.  
- âŒ **Ignoring pagination limits** â†’ missing data in large sync jobs.  
- âŒ **Assuming PATCH=PUT** â†’ can cause unintended overwrites.  

---

## âœ… Best Practices  

- Always interrogate `/ServiceProviderConfig` before coding.  
- Design integrations to **fall back** when features missing.  
- Log feature detection results for future debugging.  
- Document vendor quirks in your projectâ€™s knowledge base.  
- Use **incremental syncs** if filters or sorting are limited.  

---

## ğŸ¢ Real-World Scenarios  

- **Okta â†’ Zoom** â†’ Zoom ignores unsupported filters; must fetch all users + filter client-side.  
- **Azure AD â†’ SaaS App** â†’ app ignores `DELETE`, requires `active:false`.  
- **Custom HR â†’ Vendor X** â†’ Bulk not supported; implemented loop with POST.  

---

## ğŸ“ Self-Check  

1ï¸âƒ£ What endpoint tells you what features a SCIM Service Provider supports?  
2ï¸âƒ£ Give one example of a feature often missing in vendor implementations.  
3ï¸âƒ£ How should you handle a vendor that ignores custom attributes?  
4ï¸âƒ£ Why is it risky to assume PATCH works the same everywhere?  

---

## ğŸ¯ Final Takeaway  

SCIM is a standard, but **real-world implementations vary widely**.  
- Expect missing features (bulk, filters, PATCH ops).  
- Detect capabilities via `/ServiceProviderConfig`.  
- Build **fallbacks and workarounds** into your integration.  

ğŸ’¡ Robust SCIM engineers donâ€™t just code to the RFC â€” they design for vendor quirks.  

---

## ğŸ”— Navigation  

ğŸ‘‰ Back: [2.12 SCIM Error Model (and Why It Matters)](2.12-error-model.md)  
ğŸ‘‰ Next: [2.14 Performance & Rate Limits](2.14-performance-rate-limits.md)  
